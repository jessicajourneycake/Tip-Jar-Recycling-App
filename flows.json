[{"id":"69946986.be4818","type":"tab","label":"Flow 1","disabled":true,"info":""},{"id":"66a069b5.826898","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"80f24fcb.041b1","type":"tab","label":"DELETE","disabled":false,"info":""},{"id":"54c70365.d5e51c","type":"tab","label":"IN USE","disabled":false,"info":""},{"id":"6743a398.2adedc","type":"tab","label":"Flow 3","disabled":false,"info":""},{"id":"e1413e6b.06f05","type":"tab","label":"VIRTUAL BIN","disabled":false,"info":""},{"id":"7e27ab14.c7aa04","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"815c8219.f9012","type":"tab","label":"IN USE MOBILE","disabled":false,"info":""},{"id":"11f2b679.72250a","type":"tab","label":"RECYCLE SCAN","disabled":false,"info":""},{"id":"20500362.dcae9c","type":"tab","label":"REGISTRYCHECK","disabled":false,"info":""},{"id":"b85a6914.392f38","type":"tab","label":"RED","disabled":false,"info":""},{"id":"c4ec86ba.085538","type":"tab","label":"RED COUNT","disabled":false,"info":""},{"id":"e37b953f.b70e58","type":"tab","label":"YELLOW","disabled":false,"info":""},{"id":"e050cb8f.af4728","type":"tab","label":"YELLOW COUNT","disabled":false,"info":""},{"id":"2690e03.823922","type":"tab","label":"BLUE","disabled":false,"info":""},{"id":"1105ebe7.67b8f4","type":"tab","label":"BLUE COUNT","disabled":false,"info":""},{"id":"6b0b8af1.63c1b4","type":"tab","label":"ORANGE","disabled":false,"info":""},{"id":"53665653.7cae58","type":"tab","label":"ORANGE COUNT","disabled":false,"info":""},{"id":"667546bc.ca9728","type":"tab","label":"GREEN","disabled":false,"info":""},{"id":"8c4c3173.3229e","type":"tab","label":"GREEN COUNT","disabled":false,"info":""},{"id":"3e1505a9.19f9aa","type":"tab","label":"PURPLE","disabled":false,"info":""},{"id":"40f8f6d.a9b5908","type":"tab","label":"PURPLE COUNT","disabled":false,"info":""},{"id":"d929b1c6.8d226","type":"tab","label":"MULTIPACK","disabled":false,"info":""},{"id":"f19c6149.45ec9","type":"tab","label":"RECEIPT","disabled":false,"info":""},{"id":"c37a9a5d.cc60e8","type":"tab","label":"TIP (CHANGE THIS TO TIPJAR)","disabled":false,"info":""},{"id":"de1fb1fe.a612b","type":"tab","label":"GB Admin","disabled":false,"info":""},{"id":"c87c8b56.c2b2f8","type":"tab","label":"GBAdmin 2","disabled":false,"info":""},{"id":"57060e7a.25d5a","type":"tab","label":"RECEIPT MESSAGES","disabled":false,"info":""},{"id":"efb7ad8b.89c53","type":"tab","label":"MULTI RECYCLE SCAN","disabled":false,"info":""},{"id":"c0b30cd2.450c2","type":"tab","label":"Tip Jar","disabled":false,"info":""},{"id":"6b5aabaf.a98a14","type":"tab","label":"CURBSIDE","disabled":false,"info":""},{"id":"20a421a8.383e4e","type":"tab","label":"BARCODE SCAN","disabled":false,"info":""},{"id":"7e796147.3fe93","type":"dashDB","hostname":"db2w-ezqspsi.us-east.db2w.cloud.ibm.com","db":"BLUDB","port":"50001","name":"NEW"},{"id":"6ba3359a.7bca1c","type":"Db2","hostname":"db2w-ezqspsi.us-east.db2w.cloud.ibm.com","db":"BLUDB","port":"50001","name":"NEW"},{"id":"b82a355c.28aca8","type":"dashDB","hostname":"dashdb-txn-sbox-yp-dal09-04.services.dal.bluemix.net","db":"BLUDB","port":"50000","name":"LITE"},{"id":"eb90b870.4811f8","type":"websocket-listener","path":"/ws/inuse0","wholemsg":"false"},{"id":"2bd6baf1.ac65b6","type":"websocket-listener","path":"/ws/inuse1","wholemsg":"false"},{"id":"ac2b50d9.2e399","type":"websocket-listener","path":"/ws/inuse2","wholemsg":"false"},{"id":"e9b450dc.aa3df","type":"websocket-listener","path":"/ws/inuse3","wholemsg":"false"},{"id":"ae6edfd8.358b6","type":"websocket-listener","path":"/ws/inuse4","wholemsg":"false"},{"id":"684d805f.c60ba","type":"websocket-listener","path":"/ws/inuse5","wholemsg":"false"},{"id":"30033ded.0fff92","type":"websocket-listener","path":"/ws/inuse6","wholemsg":"false"},{"id":"b09b3dd1.fabd5","type":"websocket-listener","path":"/ws/inuse7","wholemsg":"false"},{"id":"5d859dba.de3624","type":"websocket-listener","path":"/ws/inuse8","wholemsg":"false"},{"id":"eb02280c.4efbc8","type":"websocket-listener","path":"/ws/inuse9","wholemsg":"false"},{"id":"3b517b1c.71da24","type":"Db2","hostname":"dashdb-txn-sbox-yp-dal09-04.services.dal.bluemix.net","db":"BLUDB","port":"50000","name":"LITE"},{"id":"77b8b350.5f583c","type":"websocket-listener","path":"/ws/virtual0","wholemsg":"false"},{"id":"1f0d6aa8.a9fbc5","type":"websocket-listener","path":"/ws/virtual1","wholemsg":"false"},{"id":"cfffa14e.c49a5","type":"websocket-listener","path":"/ws/virtual2","wholemsg":"false"},{"id":"5b1db718.830ba8","type":"websocket-listener","path":"/ws/virtual3","wholemsg":"false"},{"id":"97f7d3c.30c283","type":"websocket-listener","path":"/ws/virtual4","wholemsg":"false"},{"id":"2fa93efc.681282","type":"websocket-listener","path":"/ws/virtual5","wholemsg":"false"},{"id":"e4462385.3ca02","type":"websocket-listener","path":"/ws/virtual6","wholemsg":"false"},{"id":"c868fe07.46a46","type":"websocket-listener","path":"/ws/virtual7","wholemsg":"false"},{"id":"3cdb8822.adab78","type":"websocket-listener","path":"/ws/virtual8","wholemsg":"false"},{"id":"dcfaa450.b65598","type":"websocket-listener","path":"/ws/virtual9","wholemsg":"false"},{"id":"3ef802c5.56844e","type":"websocket-listener","path":"/ws/receiptsum","wholemsg":"false"},{"id":"1f4eab44.de3175","type":"websocket-listener","path":"/ws/receiptmessage","wholemsg":"false"},{"id":"5a5144f8.75aa0c","type":"websocket-listener","path":"/ws/receiptproduct","wholemsg":"false"},{"id":"5874c8d0.bcf0c8","type":"websocket-listener","path":"/ws/barcodescan1","wholemsg":"false"},{"id":"202ab0c9.82662","type":"websocket-listener","path":"/ws/barcodescan2","wholemsg":"false"},{"id":"cac82765.61fe88","type":"websocket-listener","path":"/ws/barcodescan3","wholemsg":"false"},{"id":"bbc5b6a2.92e2d8","type":"websocket-listener","path":"/ws/barcodescan4","wholemsg":"false"},{"id":"cf24337c.840ff","type":"websocket-listener","path":"/ws/barcodescan5","wholemsg":"false"},{"id":"34150f0.3e9d8f2","type":"websocket-listener","path":"/ws/red1","wholemsg":"false"},{"id":"8a93f28e.635a6","type":"websocket-listener","path":"/ws/red2","wholemsg":"false"},{"id":"f5b16af8.d16738","type":"websocket-listener","path":"/ws/red3","wholemsg":"false"},{"id":"a004c7be.acbbf8","type":"websocket-listener","path":"/ws/red4","wholemsg":"false"},{"id":"66211e67.c3128","type":"websocket-listener","path":"/ws/red5","wholemsg":"false"},{"id":"c889c4f2.1477a8","type":"websocket-listener","path":"/ws/red6","wholemsg":"false"},{"id":"73d7bc50.b17764","type":"websocket-listener","path":"/ws/red7","wholemsg":"false"},{"id":"221d3133.640b0e","type":"websocket-listener","path":"/ws/red8","wholemsg":"false"},{"id":"b2bf13c7.38ad8","type":"websocket-listener","path":"/ws/red9","wholemsg":"false"},{"id":"e24dc8e5.fcf708","type":"websocket-listener","path":"/ws/red0","wholemsg":"false"},{"id":"26c786ed.44238a","type":"websocket-listener","path":"/ws/yellow0","wholemsg":"false"},{"id":"dbc65a3e.bd2698","type":"websocket-listener","path":"/ws/yellow1","wholemsg":"false"},{"id":"c4a73e3.8b588c","type":"websocket-listener","path":"/ws/yellow2","wholemsg":"false"},{"id":"3c476dd8.5a1822","type":"websocket-listener","path":"/ws/yellow3","wholemsg":"false"},{"id":"452d1aea.fb0c84","type":"websocket-listener","path":"/ws/yellow4","wholemsg":"false"},{"id":"a0337db3.1238d","type":"websocket-listener","path":"/ws/yellow5","wholemsg":"false"},{"id":"41ad6f4a.2547f","type":"websocket-listener","path":"/ws/yellow6","wholemsg":"false"},{"id":"d8594a73.b5f758","type":"websocket-listener","path":"/ws/blue0","wholemsg":"false"},{"id":"6c212fec.3e6b","type":"websocket-listener","path":"/ws/blue1","wholemsg":"false"},{"id":"56021bc5.9e46d4","type":"websocket-listener","path":"/ws/blue2","wholemsg":"false"},{"id":"49c002e8.7c978c","type":"websocket-listener","path":"/ws/blue3","wholemsg":"false"},{"id":"8b11ed2a.1ce6","type":"websocket-listener","path":"/ws/blue4","wholemsg":"false"},{"id":"c498820c.cd809","type":"websocket-listener","path":"/ws/blue5","wholemsg":"false"},{"id":"a9605bce.28c5d8","type":"websocket-listener","path":"/ws/blue6","wholemsg":"false"},{"id":"7dacfe21.2a756","type":"websocket-listener","path":"/ws/orange0","wholemsg":"false"},{"id":"67723768.167fa8","type":"websocket-listener","path":"/ws/orange1","wholemsg":"false"},{"id":"bb122743.deb4b8","type":"websocket-listener","path":"/ws/orange2","wholemsg":"false"},{"id":"365eafd5.47452","type":"websocket-listener","path":"/ws/orange3","wholemsg":"false"},{"id":"a2d3265f.9cfd98","type":"websocket-listener","path":"/ws/orange4","wholemsg":"false"},{"id":"67b827e7.040fd8","type":"websocket-listener","path":"/ws/orange5","wholemsg":"false"},{"id":"a0d0aecb.d6cb","type":"websocket-listener","path":"/ws/orange6","wholemsg":"false"},{"id":"b6557ae2.c4cb28","type":"websocket-listener","path":"/ws/green0","wholemsg":"false"},{"id":"13fcbc0b.dec9d4","type":"websocket-listener","path":"/ws/green1","wholemsg":"false"},{"id":"e1133e89.94422","type":"websocket-listener","path":"/ws/green2","wholemsg":"false"},{"id":"851626f0.6ea418","type":"websocket-listener","path":"/ws/green3","wholemsg":"false"},{"id":"4b9bc85f.f22868","type":"websocket-listener","path":"/ws/green4","wholemsg":"false"},{"id":"b854f6ed.faa918","type":"websocket-listener","path":"/ws/green5","wholemsg":"false"},{"id":"ce255a7c.0614a8","type":"websocket-listener","path":"/ws/green6","wholemsg":"false"},{"id":"bf0cf993.3bcf18","type":"websocket-listener","path":"/ws/purple0","wholemsg":"false"},{"id":"8281a3e7.cdefc","type":"websocket-listener","path":"/ws/purple1","wholemsg":"false"},{"id":"626ac2c0.6ca18c","type":"websocket-listener","path":"/ws/purple2","wholemsg":"false"},{"id":"acf07a98.89e6d8","type":"websocket-listener","path":"/ws/purple3","wholemsg":"false"},{"id":"326e2dfa.b77742","type":"websocket-listener","path":"/ws/purple4","wholemsg":"false"},{"id":"93cdcc1b.13daa","type":"websocket-listener","path":"/ws/purple5","wholemsg":"false"},{"id":"67dbeb8d.88d944","type":"websocket-listener","path":"/ws/purple6","wholemsg":"false"},{"id":"4e474f75.53de9","type":"websocket-listener","path":"/ws/multiinuse1","wholemsg":"false"},{"id":"dbf72238.b6841","type":"Db2","hostname":"db2w-ezqspsi.us-east.db2w.cloud.ibm.com","db":"BLUDB","port":"50001","name":"NEW"},{"id":"c22d9c44.865b2","type":"dashDB","hostname":"dashdb-txn-sbox-yp-dal09-04.services.dal.bluemix.net","db":"BLUDB","port":"50000","name":"LITE"},{"id":"18d56746.fc9019","type":"websocket-listener","path":"/ws/virtualtip","wholemsg":"false"},{"id":"141ec8e1.afffd7","type":"websocket-listener","path":"/ws/barcodemessage","wholemsg":"false"},{"id":"31723faa.3a13e","type":"websocket-listener","path":"/ws/receipt0","wholemsg":"false"},{"id":"bb8af107.e3eb3","type":"websocket-listener","path":"/ws/receipt1","wholemsg":"false"},{"id":"18f62d1e.0d9583","type":"websocket-listener","path":"/ws/receipt2","wholemsg":"false"},{"id":"f87c0593.bd1f68","type":"websocket-listener","path":"/ws/receipt3","wholemsg":"false"},{"id":"d4344c82.d9c9","type":"websocket-listener","path":"/ws/receipt4","wholemsg":"false"},{"id":"d38cd4aa.64dc48","type":"websocket-listener","path":"/ws/receipt5","wholemsg":"false"},{"id":"a30502c5.1d4a","type":"websocket-listener","path":"/ws/receipt6","wholemsg":"false"},{"id":"30878d18.c99672","type":"websocket-listener","path":"/ws/receipt7","wholemsg":"false"},{"id":"77bc73fa.2488ec","type":"websocket-listener","path":"/ws/receipt8","wholemsg":"false"},{"id":"269314df.2cb66c","type":"websocket-listener","path":"/ws/receipt9","wholemsg":"false"},{"id":"8a6a99d6.61c748","type":"Db2","hostname":"db2w-ezqspsi.us-east.db2w.cloud.ibm.com","db":"BLUDB","port":"50001","name":"NEW"},{"id":"3ad79a95.48b546","type":"websocket-listener","path":"/ws/gbmultireceiptsum","wholemsg":"false"},{"id":"2784f517.c0eb3a","type":"websocket-listener","path":"/ws/gbmultireceiptproduct","wholemsg":"false"},{"id":"10a1cb32.a572b5","type":"websocket-listener","path":"/ws/mreceiptmessage1","wholemsg":"false"},{"id":"eb18cb15.7f95a8","type":"websocket-listener","path":"/ws/mreceiptsum1","wholemsg":"false"},{"id":"471a756a.0db4cc","type":"websocket-listener","path":"/ws/mmultiusecount","wholemsg":"false"},{"id":"2297f268.909e3e","type":"websocket-listener","path":"/ws/mreceiptproduct","wholemsg":"false"},{"id":"41ae6403.b64e4c","type":"websocket-listener","path":"/ws/mmultiproduct","wholemsg":"false"},{"id":"8104121d.8dd5e","type":"websocket-listener","path":"/ws/gbmultivirtual1","wholemsg":"false"},{"id":"4265ed74.047c74","type":"websocket-listener","path":"/ws/orangemsg","wholemsg":"false"},{"id":"f7e12f77.c1be","type":"websocket-listener","path":"/ws/orangestep1","wholemsg":"false"},{"id":"999ae24a.129c7","type":"websocket-listener","path":"/ws/orangestep2","wholemsg":"false"},{"id":"414f0345.96907c","type":"websocket-listener","path":"/ws/tipjar0","wholemsg":"false"},{"id":"b6092579.0a3768","type":"websocket-listener","path":"/ws/tipjar1","wholemsg":"false"},{"id":"3834b753.253178","type":"websocket-listener","path":"/ws/tipjar2","wholemsg":"false"},{"id":"94821d0a.3cc7d","type":"websocket-listener","path":"/ws/tipjar3","wholemsg":"false"},{"id":"afdbd605.a595b8","type":"websocket-listener","path":"/ws/tipjar4","wholemsg":"false"},{"id":"9a461264.d8df7","type":"websocket-listener","path":"/ws/tipjar5","wholemsg":"false"},{"id":"dcef072d.72d358","type":"websocket-listener","path":"/ws/tipjar6","wholemsg":"false"},{"id":"a2d6d5aa.7e5a88","type":"websocket-listener","path":"/ws/tipjar7","wholemsg":"false"},{"id":"2ca45b2a.c4bfb4","type":"websocket-listener","path":"/ws/tipjar8","wholemsg":"false"},{"id":"36ed3b80.1a1674","type":"websocket-listener","path":"/ws/tipjar9","wholemsg":"false"},{"id":"419c82f5.3e98ac","type":"websocket-listener","path":"/ws/redstep1","wholemsg":"false"},{"id":"acaf6d07.42554","type":"websocket-listener","path":"/ws/redstep2","wholemsg":"false"},{"id":"978dc49d.e4e7b8","type":"websocket-listener","path":"/ws/purplestep1","wholemsg":"false"},{"id":"c16ee2fa.81976","type":"websocket-listener","path":"/ws/purplestep2","wholemsg":"false"},{"id":"3a308002.ace93","type":"websocket-listener","path":"/ws/bluestep1","wholemsg":"false"},{"id":"6d4c4835.8f2de8","type":"websocket-listener","path":"/ws/bluestep2","wholemsg":"false"},{"id":"12bc5203.11583e","type":"websocket-listener","path":"/ws/yellowstep1","wholemsg":"false"},{"id":"4d26b4be.7cc3cc","type":"websocket-listener","path":"/ws/yellowstep2","wholemsg":"false"},{"id":"e1e87e67.d15cd","type":"websocket-listener","path":"/ws/greenstep1","wholemsg":"false"},{"id":"91db0d72.8fe33","type":"websocket-listener","path":"/ws/greenstep2","wholemsg":"false"},{"id":"497f0cf.a2bcef4","type":"websocket-listener","path":"/ws/multiinuse0","wholemsg":"false"},{"id":"32e74151.399d2e","type":"websocket-listener","path":"/ws/multiinuse2","wholemsg":"false"},{"id":"dada533c.cf9e","type":"websocket-listener","path":"/ws/multiinuse3","wholemsg":"false"},{"id":"167cf501.a7327b","type":"websocket-listener","path":"/ws/multiinuse4","wholemsg":"false"},{"id":"160b3ae8.a0d365","type":"websocket-listener","path":"/ws/multivirtual0","wholemsg":"false"},{"id":"4acf324f.83b72c","type":"websocket-listener","path":"/ws/multivirtual1","wholemsg":"false"},{"id":"5ce05014.fab43","type":"websocket-listener","path":"/ws/multivirtual2","wholemsg":"false"},{"id":"d321a63f.d40768","type":"websocket-listener","path":"/ws/multivirtual3","wholemsg":"false"},{"id":"80c78be.c115278","type":"websocket-listener","path":"/ws/multivirtual4","wholemsg":"false"},{"id":"bdfad05.570503","type":"websocket-listener","path":"/ws/inuse11","wholemsg":"false"},{"id":"bb43e519.6068b8","type":"websocket-listener","path":"/ws/inuse10","wholemsg":"false"},{"id":"cc3560c2.beca","type":"websocket-listener","path":"/ws/barcodeimage","wholemsg":"false"},{"id":"b1b11140.4e4ef","type":"inject","z":"69946986.be4818","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"Hello Node-RED!","payloadType":"string","x":141,"y":61,"wires":[["f2f2649a.0d0d98"]]},{"id":"f2f2649a.0d0d98","type":"debug","z":"69946986.be4818","name":"","active":true,"console":"false","complete":"false","x":401,"y":87,"wires":[]},{"id":"4a2d18c8.1924a8","type":"inject","z":"66a069b5.826898","name":"","repeat":"","crontab":"","once":false,"topic":"","payload":"Hello Node-RED!","payloadType":"string","x":141,"y":61,"wires":[["c759a986.a09e78"]]},{"id":"c759a986.a09e78","type":"debug","z":"66a069b5.826898","name":"","active":true,"console":"false","complete":"false","x":401,"y":87,"wires":[]},{"id":"dd1d64a0.f60968","type":"debug","z":"80f24fcb.041b1","name":"","active":true,"console":"false","complete":"false","x":510,"y":120,"wires":[]},{"id":"87cd4f3b.8b50c","type":"function","z":"54c70365.d5e51c","name":"","func":"\nvar output = msg.payload.split(\",\");\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":100,"y":580,"wires":[["cc94dcb1.d1b5f","235fb428.0a695c","b70407db.f0fe08","9f836678.2ccd68","bffab677.bae0a8"]]},{"id":"b70407db.f0fe08","type":"function","z":"54c70365.d5e51c","name":"ZERO","func":"msg.payload = msg.payload[0];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":300,"wires":[["1ab185dc.e2959a"]]},{"id":"235fb428.0a695c","type":"function","z":"54c70365.d5e51c","name":"ONE","func":"msg.payload = msg.payload[1];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":380,"wires":[["dfd8c276.84c7f"]]},{"id":"cc94dcb1.d1b5f","type":"function","z":"54c70365.d5e51c","name":"TWO","func":"msg.payload = msg.payload[2];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":440,"wires":[["c5cfc065.2bae8"]]},{"id":"749b5537.2bf98c","type":"function","z":"54c70365.d5e51c","name":"Build URL","func":"\nvar barcode = msg.payload;\nmsg.url = \"https://api.barcodelookup.com/v2/products?barcode=\" + barcode + \"&key=81pcft1bjx0jbnsth65ldpf310crrj\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":700,"wires":[["1480b75a.0a44c9"]]},{"id":"1480b75a.0a44c9","type":"http request","z":"54c70365.d5e51c","name":"","method":"GET","ret":"txt","paytoqs":"body","url":"","tls":"","persist":false,"proxy":"","authType":"","x":470,"y":760,"wires":[["91f2b5e4.40dc48"]]},{"id":"91f2b5e4.40dc48","type":"json","z":"54c70365.d5e51c","name":"","property":"payload","action":"","pretty":false,"x":630,"y":700,"wires":[["d59d75a3.474278","5e9d882d.583938"]]},{"id":"9ab55a3f.f37ed8","type":"function","z":"54c70365.d5e51c","name":"Build URL","func":"\nvar barcode = msg.payload;\nmsg.url = \"https://api.barcodelookup.com/v2/products?barcode=\" + barcode + \"&key=81pcft1bjx0jbnsth65ldpf310crrj\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":880,"wires":[["6af0eac4.031044"]]},{"id":"6af0eac4.031044","type":"http request","z":"54c70365.d5e51c","name":"","method":"GET","ret":"txt","paytoqs":"body","url":"","tls":"","persist":false,"proxy":"","authType":"","x":390,"y":940,"wires":[["e818be30.d2d52"]]},{"id":"e818be30.d2d52","type":"json","z":"54c70365.d5e51c","name":"","property":"payload","action":"","pretty":false,"x":610,"y":880,"wires":[["3590c3f6.43178c"]]},{"id":"33381b64.6ce594","type":"function","z":"54c70365.d5e51c","name":"Build URL","func":"\nvar barcode = msg.payload;\nmsg.url = \"https://api.barcodelookup.com/v2/products?barcode=\" + barcode + \"&key=81pcft1bjx0jbnsth65ldpf310crrj\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1140,"wires":[["e9edc065.b0239"]]},{"id":"e9edc065.b0239","type":"http request","z":"54c70365.d5e51c","name":"","method":"GET","ret":"txt","paytoqs":"body","url":"","tls":"","persist":false,"proxy":"","authType":"","x":430,"y":1180,"wires":[["1ea29d89.cfb512"]]},{"id":"1ea29d89.cfb512","type":"json","z":"54c70365.d5e51c","name":"","property":"payload","action":"","pretty":false,"x":530,"y":1140,"wires":[["a50b728a.685e3"]]},{"id":"1ab185dc.e2959a","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"RECEIPTID\": msg.payload,\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":300,"wires":[["2073ea54.a3bba6","c9276aef.bfa4a8","fb441a15.544f78","b21e2110.7e26a","bbe9fd18.7d8d9"]]},{"id":"d59d75a3.474278","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"BARCODE\": msg.payload.products[0].barcode_number,\n    \"NAME\": msg.payload.products[0].product_name,\n    \"IMAGE\": msg.payload.products[0].images[0]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":740,"wires":[["814d49c0.27aa28"]]},{"id":"3590c3f6.43178c","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"BARCODE\": msg.payload.products[0].barcode_number,\n    \"NAME\": msg.payload.products[0].product_name,\n    \"IMAGE\": msg.payload.products[0].images[0]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":1000,"wires":[["da8eb3b0.82d42","2605e898.795128"]]},{"id":"a50b728a.685e3","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"BARCODE\": msg.payload.products[0].barcode_number,\n    \"NAME\": msg.payload.products[0].product_name,\n    \"IMAGE\": msg.payload.products[0].images[0]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1200,"wires":[["6b950ddc.69b1b4"]]},{"id":"30013142.058f7e","type":"dashDB out","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","table":"GBINUSE","name":"","x":1520,"y":1060,"wires":[]},{"id":"210dc368.ee868c","type":"dashDB out","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","table":"GBINUSE","name":"","x":1500,"y":1220,"wires":[]},{"id":"acec297c.14bb88","type":"function","z":"e1413e6b.06f05","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1100,"y":340,"wires":[["57804892.d1c2d8"]]},{"id":"8b9ae5e8.bcc748","type":"http in","z":"e1413e6b.06f05","name":"","url":"/virtualbin","method":"post","upload":false,"swaggerDoc":"","x":80,"y":240,"wires":[["7dd9e783.8d97e8","496d8628.8ab8b8","cdecd18d.57903","196529eb.0b9cf6","8954135a.e2b66","266d337e.99a77c","cf4fc38a.66df1"]]},{"id":"cc85268e.6c8598","type":"function","z":"e1413e6b.06f05","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":800,"wires":[["9aca5046.bcce4"]]},{"id":"286fc6df.b7dc3a","type":"function","z":"54c70365.d5e51c","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":80,"y":340,"wires":[["87cd4f3b.8b50c"]]},{"id":"dfd8c276.84c7f","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"DATE\": msg.payload,\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":360,"wires":[["b21e2110.7e26a"]]},{"id":"c5cfc065.2bae8","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"LOCATION\": msg.payload,\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":440,"wires":[["b21e2110.7e26a"]]},{"id":"38b61246.0984be","type":"function","z":"54c70365.d5e51c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":800,"wires":[["bb59b42b.bb0c08"]]},{"id":"9209cceb.bf004","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload.GBTIP,\n    \"COLOR\": msg.payload.COLOR\n    \n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":800,"wires":[["814d49c0.27aa28"]]},{"id":"e16f7b59.020338","type":"dashDB out","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","table":"GBINUSE","name":"","x":1260,"y":800,"wires":[]},{"id":"e7f91329.57411","type":"inject","z":"80f24fcb.041b1","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":160,"y":100,"wires":[["f1f12dee.dc9ca"]]},{"id":"f1f12dee.dc9ca","type":"function","z":"80f24fcb.041b1","name":"","func":"let query = \"DELETE FROM BLUADMIN.TIPJAR;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":200,"wires":[["8b8ad5b8.eecfd8"]]},{"id":"3beb745c.8a97cc","type":"function","z":"54c70365.d5e51c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":1040,"wires":[["ad8578cf.910378"]]},{"id":"ad8578cf.910378","type":"dashDB in","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":440,"y":1080,"wires":[["27530f63.533ec","9ea2365a.a1e988"]]},{"id":"27530f63.533ec","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload.GBTIP,\n    \"COLOR\": msg.payload.COLOR\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":1060,"wires":[["2605e898.795128"]]},{"id":"4e5e1795.bf0fa8","type":"function","z":"54c70365.d5e51c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1220,"wires":[["e929e80a.0fa078"]]},{"id":"e929e80a.0fa078","type":"dashDB in","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":460,"y":1260,"wires":[["6f560590.d3fd0c"]]},{"id":"6f560590.d3fd0c","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    TIP: msg.payload.GBTIP,\n    COLOR: msg.payload.COLOR\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1240,"wires":[["6b950ddc.69b1b4"]]},{"id":"6b950ddc.69b1b4","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":1220,"wires":[["aa6fed5d.af5ee"]]},{"id":"aa6fed5d.af5ee","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":990,"y":1220,"wires":[["e5a90952.41d3c8","784fbdfd.938114"]]},{"id":"138e2da5.d5cdb2","type":"function","z":"e1413e6b.06f05","name":"","func":"var a = msg.payload;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":300,"wires":[["acec297c.14bb88"]]},{"id":"9aca5046.bcce4","type":"dashDB in","z":"e1413e6b.06f05","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":600,"y":820,"wires":[["f4175803.ada2e8","32966b3.fbfc594"]]},{"id":"230fcb55.74d494","type":"dashDB in","z":"e1413e6b.06f05","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":680,"y":360,"wires":[["496d8628.8ab8b8"]]},{"id":"d0543ed3.539e1","type":"Db2 out","z":"e1413e6b.06f05","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"PURPLE","name":"","x":1340,"y":700,"wires":[]},{"id":"511a8745.30fc28","type":"delay","z":"e1413e6b.06f05","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":860,"y":260,"wires":[["138e2da5.d5cdb2"]]},{"id":"f67783b9.6c78c","type":"link out","z":"e1413e6b.06f05","name":"VIRTUALBINBARCODE","links":["5fd5675f.496d28"],"x":1175,"y":180,"wires":[]},{"id":"cdecd18d.57903","type":"function","z":"e1413e6b.06f05","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":200,"y":800,"wires":[["cc85268e.6c8598","aa4d9044.fe59d","dede7e3a.95fe8"]]},{"id":"294f36ca.f21eca","type":"link in","z":"7e27ab14.c7aa04","name":"CountInUse","links":["4ebb133c.f7319c"],"x":175,"y":460,"wires":[["97159ab0.723e28","89d0026f.8c123","7fbde8c3.7140c8","303ed.dd21cc132","9e0a8ede.a9c53","260b3c82.735184","bcc76809.d04578","676ddc8b.d8e844","c332081f.b29b18","be6fcf2b.1f94c","e412c39e.c0e26","627391ac.8720e"]]},{"id":"97159ab0.723e28","type":"function","z":"7e27ab14.c7aa04","name":"Count0","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":60,"wires":[["c9419c26.0d493","cfce68c3.f53028","11a8a42f.3cfecc","5d47ad06.e4d604","91e355ba.871288","a88872c8.b14f9","24ba583c.7e0d48","e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"89d0026f.8c123","type":"function","z":"7e27ab14.c7aa04","name":"Count1","func":"if (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":100,"wires":[["cfce68c3.f53028","11a8a42f.3cfecc","5d47ad06.e4d604","91e355ba.871288","a88872c8.b14f9","24ba583c.7e0d48","e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"7fbde8c3.7140c8","type":"function","z":"7e27ab14.c7aa04","name":"Count2","func":"if (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":160,"wires":[["11a8a42f.3cfecc","5d47ad06.e4d604","91e355ba.871288","a88872c8.b14f9","24ba583c.7e0d48","e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"303ed.dd21cc132","type":"function","z":"7e27ab14.c7aa04","name":"Count3","func":"if (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":220,"wires":[["5d47ad06.e4d604","91e355ba.871288","a88872c8.b14f9","24ba583c.7e0d48","e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"260b3c82.735184","type":"function","z":"7e27ab14.c7aa04","name":"Count5","func":"if (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":340,"wires":[["a88872c8.b14f9","24ba583c.7e0d48","e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"9e0a8ede.a9c53","type":"function","z":"7e27ab14.c7aa04","name":"Count4","func":"if (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":280,"wires":[["91e355ba.871288","a88872c8.b14f9","24ba583c.7e0d48","e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"bcc76809.d04578","type":"function","z":"7e27ab14.c7aa04","name":"Count6","func":"if (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":400,"wires":[["24ba583c.7e0d48","e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"676ddc8b.d8e844","type":"function","z":"7e27ab14.c7aa04","name":"Count7","func":"if (msg.payload[\"1\"] == \"7\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":480,"wires":[["e832d0c8.19458","a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"c9419c26.0d493","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU0","links":["f4dd6853.e65f58"],"x":715,"y":40,"wires":[]},{"id":"cfce68c3.f53028","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU1","links":["585f145a.1494dc","467c1179.e6d4"],"x":675,"y":80,"wires":[]},{"id":"11a8a42f.3cfecc","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU2","links":["400a7e20.bd395","d3b1672e.7302d8"],"x":735,"y":140,"wires":[]},{"id":"5d47ad06.e4d604","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU3","links":["4877aea0.fd1a","295ba31d.83a88c"],"x":715,"y":220,"wires":[]},{"id":"91e355ba.871288","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU4","links":["7c0e6ee3.f4bb2"],"x":715,"y":280,"wires":[]},{"id":"a88872c8.b14f9","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU5","links":["446eebe.a088a14"],"x":715,"y":340,"wires":[]},{"id":"24ba583c.7e0d48","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU6","links":["46e78b9b.b917c4","1f99e0d2.07453f"],"x":715,"y":400,"wires":[]},{"id":"e832d0c8.19458","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU7","links":["c2a23049.1fd3e","c1372823.9bb128"],"x":715,"y":500,"wires":[]},{"id":"c332081f.b29b18","type":"function","z":"7e27ab14.c7aa04","name":"Count8","func":"if (msg.payload[\"1\"] == \"8\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":580,"wires":[["a3dcc9bd.5e8348","42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"be6fcf2b.1f94c","type":"function","z":"7e27ab14.c7aa04","name":"Count9","func":"if (msg.payload[\"1\"] == \"9\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":660,"wires":[["42bf3abe.d5a674","73ce8a11.f92844","477e2141.ce82e"]]},{"id":"a3dcc9bd.5e8348","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU8","links":["380f8b79.5cd5e4","d6776977.26c738"],"x":735,"y":580,"wires":[]},{"id":"42bf3abe.d5a674","type":"link out","z":"7e27ab14.c7aa04","name":"CountIU9","links":["b132a497.8d9348","6ee5d03.8a1ba3"],"x":755,"y":660,"wires":[]},{"id":"bd878eba.0a92a","type":"dashDB in","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":600,"y":140,"wires":[["9e90b9e7.a2abe8","f846d967.a8d3b8","941e9574.edc248","104f6704.f01fe9"]]},{"id":"b5c32896.420318","type":"function","z":"54c70365.d5e51c","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GBRECEIPTS WHERE RECEIPTID = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":160,"wires":[["bd878eba.0a92a"]]},{"id":"ee1be1cc.d06bf","type":"delay","z":"54c70365.d5e51c","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":360,"wires":[["b1161361.c2c18"]]},{"id":"2073ea54.a3bba6","type":"function","z":"54c70365.d5e51c","name":"","func":"var a = msg.payload.RECEIPTID;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":160,"wires":[["b5c32896.420318"]]},{"id":"9e90b9e7.a2abe8","type":"function","z":"54c70365.d5e51c","name":"","func":"if (msg.payload[\"1\"] == 0){\n    msg.payload = msg.payload[\"1\"];\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":400,"wires":[["56f6947.b31ee6c"]]},{"id":"c9276aef.bfa4a8","type":"function","z":"54c70365.d5e51c","name":"","func":"var a = msg.payload.RECEIPTID;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":300,"wires":[["ee1be1cc.d06bf","bb317872.ab8ae8"]]},{"id":"8b8ad5b8.eecfd8","type":"Db2 in","z":"80f24fcb.041b1","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":440,"y":240,"wires":[["dd1d64a0.f60968"]]},{"id":"d9370737.5bfb18","type":"link out","z":"54c70365.d5e51c","name":"RECEIPTPAYLOAD","links":["b2c56b4.182e498","3ef931c8.0f319e"],"x":1075,"y":520,"wires":[]},{"id":"fb441a15.544f78","type":"template","z":"54c70365.d5e51c","name":"","field":"payload.message","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"Receipt {{payload.RECEIPTID}} added to log!","output":"str","x":800,"y":100,"wires":[["6518cdb.c52b034"]]},{"id":"8f27ea6f.dc4fc8","type":"comment","z":"e1413e6b.06f05","name":"Interval","info":"","x":170,"y":940,"wires":[]},{"id":"bffab677.bae0a8","type":"link out","z":"54c70365.d5e51c","name":"REGISTRYCHECK","links":["d90105c2.6ea668"],"x":295,"y":600,"wires":[]},{"id":"9d560335.14e3e","type":"comment","z":"54c70365.d5e51c","name":"RECEIPT SUM(TIP) ","info":"","x":1050,"y":260,"wires":[]},{"id":"1f546476.d06aec","type":"comment","z":"54c70365.d5e51c","name":"RECEIPT COUNT PRODUCT","info":"","x":1020,"y":400,"wires":[]},{"id":"bb317872.ab8ae8","type":"delay","z":"54c70365.d5e51c","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1000,"y":480,"wires":[["2cf3d038.fcd3c"]]},{"id":"9f836678.2ccd68","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":540,"y":520,"wires":[]},{"id":"7a447996.c41c58","type":"function","z":"815c8219.f9012","name":"SEVEN","func":"var name = msg.payload[7].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[7].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[7].IMAGE,\n    \"COLOR\": msg.payload[7].COLOR,\n     \"RECEIPTID\": msg.payload[7].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1960,"wires":[["2cbd8d1e.1b9302"]]},{"id":"2cbd8d1e.1b9302","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":570,"y":1960,"wires":[["fe894950.e2a408"]]},{"id":"fe894950.e2a408","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":550,"y":2040,"wires":[["8b46e0b3.5954d"]]},{"id":"8b46e0b3.5954d","type":"websocket out","z":"815c8219.f9012","name":"","server":"b09b3dd1.fabd5","client":"","x":810,"y":2000,"wires":[]},{"id":"b5abdd81.12f16","type":"function","z":"815c8219.f9012","name":"EIGHT","func":"var name = msg.payload[8].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[8].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[8].IMAGE,\n    \"COLOR\": msg.payload[8].COLOR,\n     \"RECEIPTID\": msg.payload[8].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2100,"wires":[["5644c0d1.fd80b"]]},{"id":"5644c0d1.fd80b","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":570,"y":2100,"wires":[["cf0af459.fc26d8"]]},{"id":"cf0af459.fc26d8","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":550,"y":2180,"wires":[["77509bdc.c676e4"]]},{"id":"77509bdc.c676e4","type":"websocket out","z":"815c8219.f9012","name":"","server":"5d859dba.de3624","client":"","x":810,"y":2140,"wires":[]},{"id":"ed7376aa.6516b8","type":"function","z":"815c8219.f9012","name":"NINE","func":"var name = msg.payload[9].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[9].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[9].IMAGE,\n    \"COLOR\": msg.payload[9].COLOR,\n     \"RECEIPTID\": msg.payload[9].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":2300,"wires":[["2d19bf6f.4724a"]]},{"id":"2d19bf6f.4724a","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":570,"y":2300,"wires":[["ec41066d.229e18"]]},{"id":"ec41066d.229e18","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":550,"y":2380,"wires":[["6be79da1.dd4904"]]},{"id":"6be79da1.dd4904","type":"websocket out","z":"815c8219.f9012","name":"","server":"eb02280c.4efbc8","client":"","x":810,"y":2340,"wires":[]},{"id":"6ee5d03.8a1ba3","type":"link in","z":"815c8219.f9012","name":"","links":["42bf3abe.d5a674"],"x":775,"y":2260,"wires":[["6be79da1.dd4904"]]},{"id":"d6776977.26c738","type":"link in","z":"815c8219.f9012","name":"","links":["a3dcc9bd.5e8348"],"x":705,"y":2080,"wires":[["77509bdc.c676e4"]]},{"id":"c1372823.9bb128","type":"link in","z":"815c8219.f9012","name":"","links":["e832d0c8.19458"],"x":735,"y":1860,"wires":[["8b46e0b3.5954d"]]},{"id":"f18db5cd.aa7058","type":"function","z":"815c8219.f9012","name":"FOUR","func":"var name = msg.payload[4].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"COLOR\": msg.payload[4].COLOR,\n     \"RECEIPTID\": msg.payload[4].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":370,"y":1360,"wires":[["c46f1be9.e6cda8"]]},{"id":"c46f1be9.e6cda8","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":550,"y":1400,"wires":[["c061cfeb.46944"]]},{"id":"c061cfeb.46944","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":490,"y":1460,"wires":[["664b89f9.c3bca8"]]},{"id":"ef1887d6.3d8b38","type":"function","z":"815c8219.f9012","name":"FIVE","func":"var name = msg.payload[5].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[5].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[5].IMAGE,\n    \"COLOR\": msg.payload[5].COLOR,\n     \"RECEIPTID\": msg.payload[5].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1620,"wires":[["b10d8b3d.389b78"]]},{"id":"b10d8b3d.389b78","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":490,"y":1520,"wires":[["3b8da4cb.f5805c"]]},{"id":"3b8da4cb.f5805c","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":590,"y":1600,"wires":[["652558e1.6bd768"]]},{"id":"7ba023e2.c4f28c","type":"function","z":"815c8219.f9012","name":"SIX","func":"var name = msg.payload[6].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[6].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[6].IMAGE,\n    \"COLOR\": msg.payload[6].COLOR,\n     \"RECEIPTID\": msg.payload[6].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":290,"y":1720,"wires":[["e9d86554.01ac78"]]},{"id":"e9d86554.01ac78","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":510,"y":1720,"wires":[["7306a5c3.8a4e3c"]]},{"id":"7306a5c3.8a4e3c","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":520,"y":1840,"wires":[["122fec23.704934"]]},{"id":"664b89f9.c3bca8","type":"websocket out","z":"815c8219.f9012","name":"","server":"ae6edfd8.358b6","client":"","x":880,"y":1380,"wires":[]},{"id":"652558e1.6bd768","type":"websocket out","z":"815c8219.f9012","name":"","server":"684d805f.c60ba","client":"","x":840,"y":1520,"wires":[]},{"id":"122fec23.704934","type":"websocket out","z":"815c8219.f9012","name":"","server":"30033ded.0fff92","client":"","x":750,"y":1760,"wires":[]},{"id":"1f99e0d2.07453f","type":"link in","z":"815c8219.f9012","name":"","links":["24ba583c.7e0d48"],"x":665,"y":1700,"wires":[["122fec23.704934"]]},{"id":"7c0e6ee3.f4bb2","type":"link in","z":"815c8219.f9012","name":"","links":["91e355ba.871288"],"x":695,"y":1320,"wires":[["664b89f9.c3bca8"]]},{"id":"edc0c7.f4107f38","type":"function","z":"815c8219.f9012","name":"ONE","func":"var name = msg.payload[1].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"COLOR\": msg.payload[1].COLOR,\n     \"RECEIPTID\": msg.payload[1].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":740,"wires":[["227e26be.18efaa"]]},{"id":"227e26be.18efaa","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":690,"y":700,"wires":[["65fc348f.798b2c"]]},{"id":"65fc348f.798b2c","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":530,"y":840,"wires":[["8c173fea.ec4ea"]]},{"id":"245038c8.7fc218","type":"function","z":"815c8219.f9012","name":"TWO","func":"var name = msg.payload[2].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"COLOR\": msg.payload[2].COLOR,\n     \"RECEIPTID\": msg.payload[2].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":940,"wires":[["5f90489.a4572b8"]]},{"id":"5f90489.a4572b8","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":530,"y":1040,"wires":[["e1e30b80.b26b28"]]},{"id":"e1e30b80.b26b28","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":510,"y":1120,"wires":[["cac4cec9.bbf18"]]},{"id":"eff79c17.ebcab","type":"function","z":"815c8219.f9012","name":"THREE","func":"var name = msg.payload[3].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"COLOR\": msg.payload[3].COLOR,\n     \"RECEIPTID\": msg.payload[3].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":1240,"wires":[["5b3bccab.037c44"]]},{"id":"5b3bccab.037c44","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":550,"y":1220,"wires":[["2210fd2e.97dec2"]]},{"id":"2210fd2e.97dec2","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":540,"y":1300,"wires":[["6dc9bc56.c71294"]]},{"id":"8c173fea.ec4ea","type":"websocket out","z":"815c8219.f9012","name":"","server":"2bd6baf1.ac65b6","client":"","x":800,"y":800,"wires":[]},{"id":"cac4cec9.bbf18","type":"websocket out","z":"815c8219.f9012","name":"","server":"ac2b50d9.2e399","client":"","x":750,"y":1000,"wires":[]},{"id":"6dc9bc56.c71294","type":"websocket out","z":"815c8219.f9012","name":"","server":"e9b450dc.aa3df","client":"","x":750,"y":1260,"wires":[]},{"id":"295ba31d.83a88c","type":"link in","z":"815c8219.f9012","name":"","links":["5d47ad06.e4d604"],"x":645,"y":1140,"wires":[["6dc9bc56.c71294"]]},{"id":"d3b1672e.7302d8","type":"link in","z":"815c8219.f9012","name":"","links":["11a8a42f.3cfecc"],"x":605,"y":920,"wires":[["cac4cec9.bbf18"]]},{"id":"467c1179.e6d4","type":"link in","z":"815c8219.f9012","name":"","links":["cfce68c3.f53028"],"x":665,"y":780,"wires":[["8c173fea.ec4ea"]]},{"id":"c9cc24b8.386408","type":"inject","z":"815c8219.f9012","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":290,"y":160,"wires":[["36b2f497.83120c"]]},{"id":"b4220c77.70daa","type":"dashDB in","z":"815c8219.f9012","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":60,"y":2020,"wires":[["27af3b3c.6a8b74","edc0c7.f4107f38","245038c8.7fc218","eff79c17.ebcab","f18db5cd.aa7058","ef1887d6.3d8b38","7ba023e2.c4f28c","7a447996.c41c58","b5abdd81.12f16","ed7376aa.6516b8","29c08583.54abda","829098c0.70a258","1edb3419.b1121c"]]},{"id":"36b2f497.83120c","type":"function","z":"815c8219.f9012","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBINUSE ORDER BY DATE DESC, RECEIPTID, NAME;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":240,"y":440,"wires":[["b4220c77.70daa"]]},{"id":"fb89d2f2.374cd","type":"websocket out","z":"815c8219.f9012","name":"","server":"eb90b870.4811f8","client":"","x":1140,"y":560,"wires":[]},{"id":"923dc2be.7ac73","type":"function","z":"815c8219.f9012","name":"ZERO","func":"var name = msg.payload[0].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"COLOR\": msg.payload[0].COLOR,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":630,"y":600,"wires":[["d8971962.6de488"]]},{"id":"d8971962.6de488","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":910,"y":560,"wires":[["b5aacdfe.4abbb"]]},{"id":"b5aacdfe.4abbb","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":910,"y":620,"wires":[["fb89d2f2.374cd"]]},{"id":"167ebef7.703af1","type":"function","z":"815c8219.f9012","name":"ZERO","func":"var name = msg.payload.NAME;\nmsg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"COLOR\": msg.payload.COLOR,\n    \"RECEIPTID\": msg.payload.RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":480,"wires":[["d8971962.6de488"]]},{"id":"121d6364.80659d","type":"inject","z":"815c8219.f9012","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":290,"y":100,"wires":[["4312068f.a0a048"]]},{"id":"4312068f.a0a048","type":"function","z":"815c8219.f9012","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GBINUSE;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":440,"wires":[["938b8b85.760268"]]},{"id":"938b8b85.760268","type":"Db2 in","z":"815c8219.f9012","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":710,"y":440,"wires":[["4ebb133c.f7319c"]]},{"id":"4ebb133c.f7319c","type":"link out","z":"815c8219.f9012","name":"","links":["294f36ca.f21eca","bffd3516.69ce98","c4945736.e8d9b8","d388021f.9f3f5","47175732.aead48","d37d114.2468cf"],"x":925,"y":400,"wires":[]},{"id":"f4dd6853.e65f58","type":"link in","z":"815c8219.f9012","name":"","links":["c9419c26.0d493"],"x":1065,"y":520,"wires":[["fb89d2f2.374cd"]]},{"id":"27af3b3c.6a8b74","type":"switch","z":"815c8219.f9012","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":490,"y":500,"wires":[["167ebef7.703af1"]]},{"id":"86d568ab.c7cf78","type":"comment","z":"815c8219.f9012","name":"Interval","info":"","x":520,"y":60,"wires":[]},{"id":"3832b7e7.912b08","type":"link in","z":"54c70365.d5e51c","name":"","links":["4fd3ef69.8a153"],"x":105,"y":1140,"wires":[["33381b64.6ce594","4e5e1795.bf0fa8"]]},{"id":"566f4c22.d51e84","type":"link in","z":"54c70365.d5e51c","name":"","links":["c9458c4f.ca17a"],"x":95,"y":1320,"wires":[["27e57294.49975e","65619efe.d7a77"]]},{"id":"27e57294.49975e","type":"function","z":"54c70365.d5e51c","name":"Build URL","func":"\nvar barcode = msg.payload;\nmsg.url = \"https://api.barcodelookup.com/v2/products?barcode=\" + barcode + \"&key=81pcft1bjx0jbnsth65ldpf310crrj\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":1360,"wires":[["925e8fc8.16b4e"]]},{"id":"925e8fc8.16b4e","type":"http request","z":"54c70365.d5e51c","name":"","method":"GET","ret":"txt","paytoqs":"body","url":"","tls":"","persist":false,"proxy":"","authType":"","x":410,"y":1400,"wires":[["c7ffaae4.c01ae8"]]},{"id":"c7ffaae4.c01ae8","type":"json","z":"54c70365.d5e51c","name":"","property":"payload","action":"","pretty":false,"x":510,"y":1360,"wires":[["286b8efc.6c96e2"]]},{"id":"286b8efc.6c96e2","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n   \n    BARCODE: msg.payload.products[0].barcode_number,\n    NAME: msg.payload.products[0].product_name,\n    IMAGE: msg.payload.products[0].images[0]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":1420,"wires":[["f502a334.7037"]]},{"id":"321499bb.cf8026","type":"dashDB out","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","table":"GBINUSE","name":"","x":1640,"y":1440,"wires":[]},{"id":"65619efe.d7a77","type":"function","z":"54c70365.d5e51c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":1440,"wires":[["6179a86c.b78f68"]]},{"id":"6179a86c.b78f68","type":"dashDB in","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":440,"y":1480,"wires":[["e49a015.94df8"]]},{"id":"e49a015.94df8","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    TIP: msg.payload.GBTIP,\n    COLOR: msg.payload.COLOR\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":1460,"wires":[["f502a334.7037"]]},{"id":"f502a334.7037","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":1440,"wires":[["b1e58c95.abfec"]]},{"id":"b1e58c95.abfec","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":1440,"wires":[["321499bb.cf8026"]]},{"id":"d7222d27.b31f8","type":"http in","z":"54c70365.d5e51c","name":"","url":"/test","method":"post","upload":false,"swaggerDoc":"","x":120,"y":240,"wires":[["286fc6df.b7dc3a","6aa163e6.9f19dc"]]},{"id":"96b863d8.feea2","type":"link in","z":"54c70365.d5e51c","name":"","links":["aab09c58.a2c76"],"x":115,"y":1560,"wires":[["1e4264e2.5b8f9b","3036a953.6766b6"]]},{"id":"1e4264e2.5b8f9b","type":"function","z":"54c70365.d5e51c","name":"Build URL","func":"\nvar barcode = msg.payload;\nmsg.url = \"https://api.barcodelookup.com/v2/products?barcode=\" + barcode + \"&key=4eoewe63dsk23wcl2y4j27f9nijlu4\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1600,"wires":[["2f92274f.a135e8"]]},{"id":"2f92274f.a135e8","type":"http request","z":"54c70365.d5e51c","name":"","method":"GET","ret":"txt","paytoqs":"body","url":"","tls":"","persist":false,"proxy":"","authType":"","x":430,"y":1640,"wires":[["eb9fc1b4.b3963"]]},{"id":"eb9fc1b4.b3963","type":"json","z":"54c70365.d5e51c","name":"","property":"payload","action":"","pretty":false,"x":530,"y":1600,"wires":[["b85f3a0.0568bc8"]]},{"id":"b85f3a0.0568bc8","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n   \n    BARCODE: msg.payload.products[0].barcode_number,\n    NAME: msg.payload.products[0].product_name,\n    IMAGE: msg.payload.products[0].images[0]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1660,"wires":[["d8191863.9b3e08"]]},{"id":"92f8d8e6.323ca8","type":"dashDB out","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","table":"GBINUSE","name":"","x":1160,"y":1680,"wires":[]},{"id":"3036a953.6766b6","type":"function","z":"54c70365.d5e51c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1680,"wires":[["e9cfd696.1a1cb8"]]},{"id":"e9cfd696.1a1cb8","type":"dashDB in","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":460,"y":1720,"wires":[["6f11b4.2b964e4c"]]},{"id":"6f11b4.2b964e4c","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    TIP: msg.payload.GBTIP,\n    COLOR: msg.payload.COLOR\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1700,"wires":[["d8191863.9b3e08"]]},{"id":"d8191863.9b3e08","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":1680,"wires":[["8e2598ad.19d548"]]},{"id":"8e2598ad.19d548","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":970,"y":1680,"wires":[["92f8d8e6.323ca8"]]},{"id":"171df283.2b94ed","type":"link in","z":"54c70365.d5e51c","name":"","links":["f432d12f.9baf"],"x":115,"y":1800,"wires":[["c6a112b.98051f","cff8d1.eb3fe73"]]},{"id":"c6a112b.98051f","type":"function","z":"54c70365.d5e51c","name":"Build URL","func":"\nvar barcode = msg.payload;\nmsg.url = \"https://api.barcodelookup.com/v2/products?barcode=\" + barcode + \"&key=4eoewe63dsk23wcl2y4j27f9nijlu4\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1840,"wires":[["765dc6da.ddf3c8"]]},{"id":"765dc6da.ddf3c8","type":"http request","z":"54c70365.d5e51c","name":"","method":"GET","ret":"txt","paytoqs":"body","url":"","tls":"","persist":false,"proxy":"","authType":"","x":430,"y":1880,"wires":[["157830df.8a3c1f"]]},{"id":"157830df.8a3c1f","type":"json","z":"54c70365.d5e51c","name":"","property":"payload","action":"","pretty":false,"x":530,"y":1840,"wires":[["b89a57b7.c685e8"]]},{"id":"b89a57b7.c685e8","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n   \n    BARCODE: msg.payload.products[0].barcode_number,\n    NAME: msg.payload.products[0].product_name,\n    IMAGE: msg.payload.products[0].images[0]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1900,"wires":[["edf556.58150aa8"]]},{"id":"d0239cfb.b336f","type":"dashDB out","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","table":"GBINUSE","name":"","x":1160,"y":1920,"wires":[]},{"id":"cff8d1.eb3fe73","type":"function","z":"54c70365.d5e51c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1920,"wires":[["84c24ea8.d7c39"]]},{"id":"84c24ea8.d7c39","type":"dashDB in","z":"54c70365.d5e51c","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":460,"y":1960,"wires":[["2e836f55.eeb2a"]]},{"id":"2e836f55.eeb2a","type":"function","z":"54c70365.d5e51c","name":"","func":"\nmsg.payload = {\n    TIP: msg.payload.GBTIP,\n    COLOR: msg.payload.COLOR\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1940,"wires":[["edf556.58150aa8"]]},{"id":"edf556.58150aa8","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":1920,"wires":[["432f24db.4024ac"]]},{"id":"432f24db.4024ac","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":970,"y":1920,"wires":[["d0239cfb.b336f"]]},{"id":"aa4d9044.fe59d","type":"function","z":"e1413e6b.06f05","name":"","func":"let query = \"SELECT COUNT(BARCODE) FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":680,"wires":[["629b30d3.f12e1"]]},{"id":"a17f4180.67054","type":"function","z":"e1413e6b.06f05","name":"","func":"if (msg.payload[\"1\"] == 0) {\n    return null;\n}\nelse {\n    msg.payload = msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":640,"wires":[["f2cc0cb9.acc8d"]]},{"id":"629b30d3.f12e1","type":"dashDB in","z":"e1413e6b.06f05","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":560,"y":660,"wires":[["a17f4180.67054"]]},{"id":"dede7e3a.95fe8","type":"function","z":"e1413e6b.06f05","name":"","func":"let query = \"SELECT BARCODE FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":740,"wires":[["b0532a18.7c2298"]]},{"id":"b0532a18.7c2298","type":"dashDB in","z":"e1413e6b.06f05","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":620,"y":720,"wires":[["5b867ead.a8a55"]]},{"id":"47134053.f532f","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = new Date().toLocaleDateString();\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":900,"wires":[["ae418146.1da"]]},{"id":"ab649eb8.9db9e","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = {\n     \"NAME\": msg.payload[0].NAME,\n     \"IMAGE\": msg.payload[0].IMAGE,\n     \"TIP\": msg.payload[0].TIP,\n     \"RECEIPTID\": msg.payload[0].RECEIPTID,\n      \"COLOR\": msg.payload[0].COLOR\n     \n     \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":800,"wires":[["b7e9100c.1a13a","2aef70a8.56f9"]]},{"id":"196529eb.0b9cf6","type":"trigger","z":"e1413e6b.06f05","name":"","op1":"","op2":"","op1type":"nul","op2type":"date","duration":"5","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":230,"y":860,"wires":[["47134053.f532f"]]},{"id":"b7e9100c.1a13a","type":"join","z":"e1413e6b.06f05","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"8","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1050,"y":900,"wires":[["2d0da0c.770e76","cf977ed1.ef812","2019c593.f6348a","4b15f53f.d9b7cc","6d9149a4.c82da8","d6ef4fe1.00d0f","c0a5bef7.f724b","dcc5f1c0.d7fcf"]]},{"id":"bb5114b.674a6e8","type":"function","z":"e1413e6b.06f05","name":"","func":"let query = \"SELECT COUNT(BARCODE) FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":380,"wires":[["230fcb55.74d494"]]},{"id":"7dd9e783.8d97e8","type":"function","z":"e1413e6b.06f05","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":440,"wires":[["bb5114b.674a6e8","e2994762.7f3f28","b0e0cefa.de8a6"]]},{"id":"6458ce25.03aeb","type":"function","z":"e1413e6b.06f05","name":"","func":"\nif (msg.payload.count == 1){\n    msg.payload = msg.payload.barcode;\n}\n\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":180,"wires":[["d7ed82a.f27bc8","511a8745.30fc28","f67783b9.6c78c"]]},{"id":"d7ed82a.f27bc8","type":"debug","z":"e1413e6b.06f05","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1190,"y":240,"wires":[]},{"id":"57f9607e.668c6","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = {\n    \"count\": msg.payload[\"1\"],\n    \"barcode\": msg.payload.data,\n    \"array\": msg.payload.array\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":180,"wires":[["6458ce25.03aeb","f1fcedab.f16f4","9973abee.9da238","3431b2ba.494f7e","9b8c47dc.760138","b6a5610d.b11af","6f310043.26e6e"]]},{"id":"496d8628.8ab8b8","type":"join","z":"e1413e6b.06f05","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":410,"y":100,"wires":[["57f9607e.668c6","d6c0ad5c.71141"]]},{"id":"57804892.d1c2d8","type":"dashDB in","z":"e1413e6b.06f05","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":1300,"y":320,"wires":[["d7ed82a.f27bc8"]]},{"id":"f9e4cfce.18376","type":"link in","z":"11f2b679.72250a","name":"RECYCLECOUNT0","links":["f1fcedab.f16f4"],"x":235,"y":240,"wires":[["b1080bfa.518038"]]},{"id":"bb99b22c.3f2b4","type":"link in","z":"11f2b679.72250a","name":"RECYCLECOUNT2","links":["9973abee.9da238"],"x":215,"y":660,"wires":[["59d4494d.c95b88"]]},{"id":"9f94fbbc.33b998","type":"link in","z":"11f2b679.72250a","name":"RECYCLECOUNT3","links":["3431b2ba.494f7e"],"x":195,"y":920,"wires":[["c0ef14ef.39e818"]]},{"id":"f1fcedab.f16f4","type":"link out","z":"e1413e6b.06f05","name":"","links":["f9e4cfce.18376"],"x":655,"y":260,"wires":[]},{"id":"9973abee.9da238","type":"link out","z":"e1413e6b.06f05","name":"","links":["bb99b22c.3f2b4","d8508c28.a80d"],"x":715,"y":300,"wires":[]},{"id":"3431b2ba.494f7e","type":"link out","z":"e1413e6b.06f05","name":"","links":["9f94fbbc.33b998","c3c299fb.3cd948"],"x":715,"y":200,"wires":[]},{"id":"22d7cd20.082df2","type":"comment","z":"11f2b679.72250a","name":"COUNT 0 RECYCLE SCAN MESSAGE - No Product in Use match found!","info":"","x":460,"y":200,"wires":[]},{"id":"2e587872.4dc0d8","type":"comment","z":"11f2b679.72250a","name":"COUNT 2","info":"","x":200,"y":600,"wires":[]},{"id":"7df1fae3.7ea184","type":"comment","z":"11f2b679.72250a","name":"COUNT 3","info":"","x":180,"y":840,"wires":[]},{"id":"e2994762.7f3f28","type":"function","z":"e1413e6b.06f05","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"' ORDER BY DATE;\";\n\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":230,"y":520,"wires":[["9a7a3c0a.8b21c"]]},{"id":"9a7a3c0a.8b21c","type":"dashDB in","z":"e1413e6b.06f05","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":240,"y":560,"wires":[["69a2f6c.454d608"]]},{"id":"d6c0ad5c.71141","type":"debug","z":"e1413e6b.06f05","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":430,"y":280,"wires":[]},{"id":"e5a90952.41d3c8","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1080,"y":900,"wires":[]},{"id":"1aeca853.ef3ef8","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1050,"y":640,"wires":[]},{"id":"59d4494d.c95b88","type":"function","z":"11f2b679.72250a","name":"","func":"\nif (msg.payload.count == \"2\"){\n    msg.payload = {\n        \"barcode\": msg.payload.array[0].BARCODE,\n        \"receiptid\": msg.payload.array[0].RECEIPTID\n        \n    }\n}\n\nelse {\n    msg.payload = \"Hello\";\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":680,"wires":[["4eb6e483.07db8c","211c951c.d0b3ca","46ebfc08.6aabf4"]]},{"id":"63d6e8b.051ec18","type":"function","z":"11f2b679.72250a","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload.barcode;\nquery += \"' AND RECEIPTID = '\";\nquery += msg.payload.receiptid;\nquery += \"' LIMIT 1;\";\n\n\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":660,"wires":[["f9acc39a.f942"]]},{"id":"1108909e.b228bf","type":"function","z":"20500362.dcae9c","name":"THREE","func":"var a = msg.payload[3];\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":160,"y":200,"wires":[["8dc45a8b.399f08","3c661e78.192ea2","ef6d944b.7da038"]]},{"id":"acabb377.8fe24","type":"function","z":"20500362.dcae9c","name":"FOUR","func":"var a = msg.payload[4];\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":230,"y":780,"wires":[["158f49d4.9f13c6","d9189958.314348"]]},{"id":"27485136.af0fee","type":"function","z":"20500362.dcae9c","name":"EIGHT","func":"msg.payload = msg.payload[8];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":170,"y":2920,"wires":[["8c259e1a.6ce49","2ab0db8c.5639e4"]]},{"id":"755029fd.f1cc58","type":"function","z":"20500362.dcae9c","name":"FIVE","func":"var a = msg.payload[5];\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":1240,"wires":[["58aae194.e085e","1f6d08e6.5bc057"]]},{"id":"298440f8.0e9e1","type":"function","z":"20500362.dcae9c","name":"SIX","func":"msg.payload = msg.payload[6];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":210,"y":1900,"wires":[["716622d.14b5adc","946f90c4.c1cac"]]},{"id":"11a68a9b.d3f555","type":"function","z":"20500362.dcae9c","name":"SEVEN","func":"msg.payload = msg.payload[7];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":200,"y":2420,"wires":[["266f227e.9f123e","98ca8b01.808f18"]]},{"id":"d90105c2.6ea668","type":"link in","z":"20500362.dcae9c","name":"","links":["bffab677.bae0a8"],"x":155,"y":1260,"wires":[["1108909e.b228bf","acabb377.8fe24","755029fd.f1cc58","298440f8.0e9e1","11a68a9b.d3f555","27485136.af0fee"]]},{"id":"8dc45a8b.399f08","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":100,"wires":[["4175f640.adb268"]]},{"id":"57025e08.3753b","type":"link out","z":"20500362.dcae9c","name":"BARCODEREADER1","links":["6baa6664.8b3d38","b41e622b.14a3e","91be6dc3.96a35","e53de44.0ead018"],"x":895,"y":80,"wires":[]},{"id":"3f97ff83.3dd11","type":"function","z":"20500362.dcae9c","name":"","func":"var a = msg.payload.BARCODE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":100,"wires":[["57025e08.3753b"]]},{"id":"158f49d4.9f13c6","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":760,"wires":[["192a0f59.c1bbe1"]]},{"id":"8739795a.bc7a88","type":"function","z":"20500362.dcae9c","name":"","func":"var a = msg.payload.BARCODE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":760,"wires":[["a15fbaef.93c708"]]},{"id":"58aae194.e085e","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":1340,"wires":[["bf8161cf.fde7a"]]},{"id":"49b16d2c.fb8304","type":"function","z":"20500362.dcae9c","name":"","func":"var a = msg.payload.BARCODE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":1340,"wires":[["4fd3ef69.8a153"]]},{"id":"716622d.14b5adc","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":1900,"wires":[["d2c0ace9.04615"]]},{"id":"1f9b8ca3.59ae53","type":"function","z":"20500362.dcae9c","name":"","func":"var a = msg.payload.BARCODE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":1900,"wires":[["c9458c4f.ca17a"]]},{"id":"266f227e.9f123e","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":2420,"wires":[["dcdb2763.58de78"]]},{"id":"a6b6793e.dedfa8","type":"function","z":"20500362.dcae9c","name":"","func":"var a = msg.payload.BARCODE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2420,"wires":[["aab09c58.a2c76"]]},{"id":"8c259e1a.6ce49","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":2920,"wires":[["e80e89cc.41fc68"]]},{"id":"5ae0dce1.8b7c74","type":"function","z":"20500362.dcae9c","name":"","func":"var a = msg.payload.BARCODE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":2920,"wires":[["f432d12f.9baf"]]},{"id":"a15fbaef.93c708","type":"link out","z":"20500362.dcae9c","name":"BARCODEREADER2","links":["aad4852c.8b0bf8","7f481e9b.86d28","c09c8e9c.21453"],"x":935,"y":760,"wires":[]},{"id":"4fd3ef69.8a153","type":"link out","z":"20500362.dcae9c","name":"BARCODEREADER3","links":["3832b7e7.912b08"],"x":855,"y":1340,"wires":[]},{"id":"c9458c4f.ca17a","type":"link out","z":"20500362.dcae9c","name":"BARCODEREADER4","links":["abfbec71.d3ad3","e24534bd.600f28","a8ec9bce.51a958","d46df65e.d16218","2d82a436.7ab0ac","1e6636c0.ad4219","566f4c22.d51e84"],"x":775,"y":1900,"wires":[]},{"id":"aab09c58.a2c76","type":"link out","z":"20500362.dcae9c","name":"BARCODEREADER5","links":["96b863d8.feea2"],"x":955,"y":2440,"wires":[]},{"id":"f432d12f.9baf","type":"link out","z":"20500362.dcae9c","name":"BARCODEREADER6","links":["171df283.2b94ed"],"x":955,"y":2960,"wires":[]},{"id":"4175f640.adb268","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":600,"y":120,"wires":[["3f97ff83.3dd11"]]},{"id":"192a0f59.c1bbe1","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":580,"y":780,"wires":[["8739795a.bc7a88"]]},{"id":"bf8161cf.fde7a","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":580,"y":1360,"wires":[["49b16d2c.fb8304"]]},{"id":"d2c0ace9.04615","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":540,"y":1920,"wires":[["1f9b8ca3.59ae53"]]},{"id":"dcdb2763.58de78","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":500,"y":2440,"wires":[["a6b6793e.dedfa8"]]},{"id":"e80e89cc.41fc68","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":480,"y":2940,"wires":[["5ae0dce1.8b7c74"]]},{"id":"f9acc39a.f942","type":"dashDB in","z":"11f2b679.72250a","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":940,"y":720,"wires":[["4a9346b7.1774c8"]]},{"id":"4a9346b7.1774c8","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1030,"y":640,"wires":[]},{"id":"69a2f6c.454d608","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = {\n    \"array\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":620,"wires":[["496d8628.8ab8b8"]]},{"id":"b1080bfa.518038","type":"function","z":"11f2b679.72250a","name":"","func":"if (msg.payload.count == 0){\n    msg.payload = \"Match not found. Please refer to label on product.\"\n}\n\nelse {\n    msg.payload = \"GOLDEN BIN\";\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":260,"wires":[["57220969.867368","6e834b6c.c1bb94","23afed2f.96dd02"]]},{"id":"c0ef14ef.39e818","type":"function","z":"11f2b679.72250a","name":"","func":"\nif (msg.payload.count == \"3\"){\n    msg.payload = {\n        \"barcode\": msg.payload.array[0].BARCODE,\n        \"receiptid\": msg.payload.array[0].RECEIPTID\n        \n    }\n}\n\nelse {\n    msg.payload = \"Hello\";\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":900,"wires":[["be5efee8.ad339","2e813f67.3ed07","7410fb9b.d78774"]]},{"id":"e2dc9f26.94954","type":"function","z":"11f2b679.72250a","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload.barcode;\nquery += \"' AND RECEIPTID = '\";\nquery += msg.payload.receiptid;\nquery += \"' LIMIT 1;\";\n\n\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":820,"wires":[["2fa5201b.fdd0c"]]},{"id":"2fa5201b.fdd0c","type":"dashDB in","z":"11f2b679.72250a","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":800,"y":880,"wires":[["43eb1d1d.e19e04"]]},{"id":"43eb1d1d.e19e04","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1000,"y":920,"wires":[]},{"id":"8954135a.e2b66","type":"delay","z":"e1413e6b.06f05","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":280,"y":20,"wires":[["c5e7df0c.5d996"]]},{"id":"c5e7df0c.5d996","type":"link out","z":"e1413e6b.06f05","name":"UPDATERECEIPTINUSE","links":["b8bb26c7.0dc358"],"x":765,"y":140,"wires":[]},{"id":"9b8c47dc.760138","type":"link out","z":"e1413e6b.06f05","name":"","links":["33e78842.b38758"],"x":595,"y":240,"wires":[]},{"id":"f846d967.a8d3b8","type":"link out","z":"54c70365.d5e51c","name":"RECEIPTIDCOUNT","links":["2c9a78.41ecb588"],"x":485,"y":80,"wires":[]},{"id":"10e051ab.8984ee","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1130,"y":120,"wires":[["280ffef8.80eea2"]]},{"id":"433bf9f5.cff8d8","type":"function","z":"54c70365.d5e51c","name":"","func":"msg.payload = {\n    \"count\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":180,"wires":[["10e051ab.8984ee"]]},{"id":"280ffef8.80eea2","type":"function","z":"54c70365.d5e51c","name":"","func":"msg.payload = msg.payload.message;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":100,"wires":[["bcab4c72.394d","574208d0.c211b8","4556850e.66803c"]]},{"id":"6518cdb.c52b034","type":"function","z":"54c70365.d5e51c","name":"","func":"msg.payload = {\n    \"message\": msg.payload.message\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":60,"wires":[["10e051ab.8984ee"]]},{"id":"941e9574.edc248","type":"function","z":"54c70365.d5e51c","name":"","func":"if (msg.payload[\"1\"] == 0) {\n    return msg\n}\n\nelse {\n    return null\n}\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":180,"wires":[["433bf9f5.cff8d8","6afe77ec.7e7958"]]},{"id":"104f6704.f01fe9","type":"function","z":"54c70365.d5e51c","name":"","func":"if (msg.payload[\"1\"] == 0) {\n    return msg;\n}\n\nelse {\n   msg.payload = \"Receipt already scanned!\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":260,"wires":[["d61e1611.3464a8"]]},{"id":"bcab4c72.394d","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1460,"y":60,"wires":[]},{"id":"211c951c.d0b3ca","type":"delay","z":"11f2b679.72250a","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":720,"y":720,"wires":[["63d6e8b.051ec18"]]},{"id":"2e813f67.3ed07","type":"delay","z":"11f2b679.72250a","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":880,"wires":[["e2dc9f26.94954"]]},{"id":"4eb6e483.07db8c","type":"function","z":"11f2b679.72250a","name":"","func":"if (msg.payload == \"Hello\"){\n    msg.payload = \"...\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":640,"wires":[["a0fe6d81.f20e6"]]},{"id":"a0fe6d81.f20e6","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":790,"y":620,"wires":[]},{"id":"6a953f0a.50ecc","type":"Db2 in","z":"11f2b679.72250a","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":630,"y":1340,"wires":[["1534617b.916d4f","a7f6ba76.2d1a38"]]},{"id":"be5efee8.ad339","type":"function","z":"11f2b679.72250a","name":"","func":"if (msg.payload == \"Hello\"){\n    msg.payload = \"...\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":800,"wires":[["b96ad6db.899008"]]},{"id":"b96ad6db.899008","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":470,"y":840,"wires":[]},{"id":"5a2664ba.ca780c","type":"function","z":"11f2b679.72250a","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload.barcode;\nquery += \"';\";\n\n\n\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":1000,"wires":[["6a953f0a.50ecc","3cdeef05.e6d0e"]]},{"id":"57220969.867368","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":700,"y":240,"wires":[]},{"id":"5b867ead.a8a55","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = {\n     \"BARCODE\": msg.payload.BARCODE\n\n     \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":720,"wires":[["b7e9100c.1a13a"]]},{"id":"ae418146.1da","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = {\n     \"DATE\": msg.payload\n     \n     \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":900,"wires":[["b7e9100c.1a13a"]]},{"id":"f4175803.ada2e8","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":720,"y":800,"wires":[["ab649eb8.9db9e"]]},{"id":"32966b3.fbfc594","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":720,"y":860,"wires":[["3d6bad95.6e65c2"]]},{"id":"3d6bad95.6e65c2","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = {\n     \"NAME\": msg.payload.NAME,\n     \"IMAGE\": msg.payload.IMAGE,\n     \"TIP\": msg.payload.TIP,\n     \"RECEIPTID\": msg.payload.RECEIPTID,\n     \"COLOR\": msg.payload.COLOR\n     \n     \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":860,"wires":[["b7e9100c.1a13a","2aef70a8.56f9"]]},{"id":"c3c299fb.3cd948","type":"link in","z":"11f2b679.72250a","name":"RECYCLECOUNT3","links":["3431b2ba.494f7e"],"x":95,"y":1200,"wires":[["ca66d2bd.ab10f"]]},{"id":"fda47174.066a4","type":"comment","z":"11f2b679.72250a","name":"COUNT 4","info":"","x":160,"y":1060,"wires":[]},{"id":"ca66d2bd.ab10f","type":"function","z":"11f2b679.72250a","name":"","func":"\nif (msg.payload.count == \"4\"){\n    msg.payload = {\n        \"barcode\": msg.payload.array[0].BARCODE,\n        \"receiptid\": msg.payload.array[0].RECEIPTID\n        \n    }\n}\n\nelse {\n    msg.payload = \"Hello\";\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":1180,"wires":[["4fb1cc4e.ac4024","102e3bc7.3db434","2badced.37f0332"]]},{"id":"1a30185c.cb1068","type":"function","z":"11f2b679.72250a","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload.barcode;\nquery += \"' AND RECEIPTID = '\";\nquery += msg.payload.receiptid;\nquery += \"' LIMIT 1;\";\n\n\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1100,"wires":[["8a6a88b4.edea68"]]},{"id":"8a6a88b4.edea68","type":"dashDB in","z":"11f2b679.72250a","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":700,"y":1160,"wires":[["79623bd2.f86424"]]},{"id":"79623bd2.f86424","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":900,"y":1200,"wires":[]},{"id":"102e3bc7.3db434","type":"delay","z":"11f2b679.72250a","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":500,"y":1160,"wires":[["1a30185c.cb1068"]]},{"id":"4fb1cc4e.ac4024","type":"function","z":"11f2b679.72250a","name":"","func":"if (msg.payload == \"Hello\"){\n    msg.payload = \"...\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":1040,"wires":[["a685fdf2.8dc54"]]},{"id":"a685fdf2.8dc54","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":370,"y":1120,"wires":[]},{"id":"b6a5610d.b11af","type":"function","z":"e1413e6b.06f05","name":"","func":"\nif (msg.payload.count == \"1\"){\n   return msg;\n}\n\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":80,"wires":[[]]},{"id":"ad1f891a.a61a28","type":"comment","z":"11f2b679.72250a","name":"COUNT 1","info":"","x":180,"y":380,"wires":[]},{"id":"22b21072.ef391","type":"link in","z":"11f2b679.72250a","name":"","links":["6f310043.26e6e"],"x":235,"y":460,"wires":[["495952bd.78c0ec"]]},{"id":"2d0da0c.770e76","type":"link out","z":"e1413e6b.06f05","name":"BARCODENAMEIMAGE","links":["44703be9.c73f64"],"x":1295,"y":900,"wires":[]},{"id":"44703be9.c73f64","type":"link in","z":"11f2b679.72250a","name":"","links":["2d0da0c.770e76"],"x":635,"y":1420,"wires":[["4a0d383d.82e518"]]},{"id":"6e834b6c.c1bb94","type":"link out","z":"11f2b679.72250a","name":"MESSAGE","links":["c059f100.7414e"],"x":665,"y":420,"wires":[]},{"id":"c059f100.7414e","type":"link in","z":"11f2b679.72250a","name":"","links":["6e834b6c.c1bb94"],"x":715,"y":1600,"wires":[["430f756.d003c8c"]]},{"id":"430f756.d003c8c","type":"function","z":"11f2b679.72250a","name":"MESSAGE","func":"msg.payload = {\n    \"MESSAGENORM\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":1620,"wires":[["773c2460.bee7bc"]]},{"id":"a7f6ba76.2d1a38","type":"function","z":"11f2b679.72250a","name":"","func":"\nmsg.payload = {\n    \"GBTIP\": msg.payload.GBTIP,\n    \"COLOR\": msg.payload.COLOR,\n    \"LABEL\": msg.payload.LABEL\n    \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":1380,"wires":[["3519ddbc.b5c3f2"]]},{"id":"24e5ac23.781984","type":"split","z":"11f2b679.72250a","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1310,"y":1520,"wires":[["a091e047.64dd4"]]},{"id":"a091e047.64dd4","type":"join","z":"11f2b679.72250a","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1430,"y":1680,"wires":[["486e2798.ebe5a8","d3969995.e7e968"]]},{"id":"486e2798.ebe5a8","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1160,"y":1820,"wires":[]},{"id":"29c08583.54abda","type":"switch","z":"815c8219.f9012","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":600,"wires":[["923dc2be.7ac73"]]},{"id":"5bdeac75.849eb4","type":"debug","z":"815c8219.f9012","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":660,"y":180,"wires":[]},{"id":"b21e2110.7e26a","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":770,"y":600,"wires":[["d9370737.5bfb18","814d49c0.27aa28","2605e898.795128","aa6fed5d.af5ee","b1e58c95.abfec","8e2598ad.19d548","432f24db.4024ac","12f92734.a2a2f9","1aeca853.ef3ef8"]]},{"id":"ec873c61.a6f86","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1270,"y":700,"wires":[]},{"id":"814d49c0.27aa28","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1010,"y":800,"wires":[["a170efba.889f7","e16f7b59.020338"]]},{"id":"2605e898.795128","type":"join","z":"54c70365.d5e51c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1010,"y":1040,"wires":[["e5a90952.41d3c8","30013142.058f7e"]]},{"id":"cf977ed1.ef812","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload.COLOR","propertyType":"msg","rules":[{"t":"eq","v":"https://www.iconsdb.com/icons/preview/purple/circle-xxl.png","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1180,"y":700,"wires":[["d0543ed3.539e1"]]},{"id":"2019c593.f6348a","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload.COLOR","propertyType":"msg","rules":[{"t":"eq","v":"https://www.iconsdb.com/icons/preview/green/triangle-xxl.png","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1190,"y":780,"wires":[["f49e3c36.2d433"]]},{"id":"f49e3c36.2d433","type":"Db2 out","z":"e1413e6b.06f05","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"GREEN","name":"","x":1320,"y":780,"wires":[]},{"id":"4b15f53f.d9b7cc","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload.COLOR","propertyType":"msg","rules":[{"t":"eq","v":"https://www.iconsdb.com/icons/preview/orange/octagon-xxl.png","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1190,"y":840,"wires":[["333c484b.ba2848"]]},{"id":"6d9149a4.c82da8","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload.COLOR","propertyType":"msg","rules":[{"t":"eq","v":"https://www.iconsdb.com/icons/preview/yellow/arrow-xxl.png","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1190,"y":620,"wires":[["db534e51.ba2f"]]},{"id":"d6ef4fe1.00d0f","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload.COLOR","propertyType":"msg","rules":[{"t":"eq","v":"https://www.iconsdb.com/icons/preview/royal-blue/square-outline-xxl.png","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1170,"y":560,"wires":[["f0d4ee31.86636"]]},{"id":"c0a5bef7.f724b","type":"switch","z":"e1413e6b.06f05","name":"","property":"payload.COLOR","propertyType":"msg","rules":[{"t":"eq","v":"https://www.iconsdb.com/icons/preview/soylent-red/circle-outline-xxl.png","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1170,"y":500,"wires":[["656d529e.7060ac"]]},{"id":"333c484b.ba2848","type":"Db2 out","z":"e1413e6b.06f05","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"ORANGE","name":"","x":1460,"y":840,"wires":[]},{"id":"db534e51.ba2f","type":"Db2 out","z":"e1413e6b.06f05","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"YELLOW","name":"","x":1330,"y":620,"wires":[]},{"id":"f0d4ee31.86636","type":"Db2 out","z":"e1413e6b.06f05","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"BLUE","name":"","x":1320,"y":560,"wires":[]},{"id":"656d529e.7060ac","type":"dashDB out","z":"e1413e6b.06f05","dashDB":"7e796147.3fe93","service":"_ext_","table":"RED","name":"","x":1340,"y":500,"wires":[]},{"id":"3c6a7d54.6aabf2","type":"inject","z":"b85a6914.392f38","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":180,"y":220,"wires":[["994f2f93.43c61","b710c443.e51568"]]},{"id":"6c4bf06b.2d9a6","type":"Db2 in","z":"b85a6914.392f38","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":270,"y":1060,"wires":[["1823a5af.e2453a","bcbae6a.d20ee18","ba84e562.d1c2c8","300e3e4c.3cf2b2","96cc7350.d9178","356f3201.ee36ee","f0e31190.861d5","4a040909.8569d8"]]},{"id":"994f2f93.43c61","type":"function","z":"b85a6914.392f38","name":"","func":"let query = \"SELECT COUNT(DATE) FROM RED;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":140,"wires":[["784e321f.aac29c"]]},{"id":"ee90ae37.39862","type":"link out","z":"b85a6914.392f38","name":"Count","links":["71183fde.b1be7"],"x":725,"y":140,"wires":[]},{"id":"784e321f.aac29c","type":"Db2 in","z":"b85a6914.392f38","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":470,"y":160,"wires":[["ee90ae37.39862"]]},{"id":"b710c443.e51568","type":"function","z":"b85a6914.392f38","name":"","func":"let query = \"SELECT * FROM BLUADMIN.RED ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":240,"wires":[["6c4bf06b.2d9a6"]]},{"id":"1823a5af.e2453a","type":"switch","z":"b85a6914.392f38","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":510,"y":280,"wires":[["2706f911.4497c6"]]},{"id":"2706f911.4497c6","type":"function","z":"b85a6914.392f38","name":"ZERO","func":"var a = msg.payload.TIP;\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":280,"wires":[["381f61ba.1e38fe"]]},{"id":"bcbae6a.d20ee18","type":"switch","z":"b85a6914.392f38","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":530,"y":340,"wires":[["ef7f9187.7621a"]]},{"id":"ef7f9187.7621a","type":"function","z":"b85a6914.392f38","name":"ZERO","func":"var a = msg.payload[0].TIP;\nvar name = msg.payload[0].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":690,"y":340,"wires":[["381f61ba.1e38fe"]]},{"id":"381f61ba.1e38fe","type":"split","z":"b85a6914.392f38","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":930,"y":340,"wires":[["55be6b06.682294"]]},{"id":"55be6b06.682294","type":"join","z":"b85a6914.392f38","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":400,"wires":[["cb833d36.2736b"]]},{"id":"4a040909.8569d8","type":"function","z":"b85a6914.392f38","name":"ONE","func":"var a = msg.payload[1].TIP;\nvar name = msg.payload[1].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":460,"wires":[["b615accf.e2e7f"]]},{"id":"b615accf.e2e7f","type":"split","z":"b85a6914.392f38","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":950,"y":460,"wires":[["97a45ed7.d366"]]},{"id":"97a45ed7.d366","type":"join","z":"b85a6914.392f38","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":520,"wires":[["8497169.2a970e8"]]},{"id":"f0e31190.861d5","type":"function","z":"b85a6914.392f38","name":"TWO","func":"var a = msg.payload[2].TIP;\nvar name = msg.payload[2].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":690,"y":580,"wires":[["3923c5bc.6a238a"]]},{"id":"3923c5bc.6a238a","type":"split","z":"b85a6914.392f38","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":930,"y":580,"wires":[["85739a99.e0e118"]]},{"id":"85739a99.e0e118","type":"join","z":"b85a6914.392f38","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":640,"wires":[["e13ec2d8.27a0a"]]},{"id":"8497169.2a970e8","type":"websocket out","z":"b85a6914.392f38","name":"","server":"34150f0.3e9d8f2","client":"","x":1160,"y":520,"wires":[]},{"id":"e13ec2d8.27a0a","type":"websocket out","z":"b85a6914.392f38","name":"","server":"8a93f28e.635a6","client":"","x":1160,"y":660,"wires":[]},{"id":"d5270c78.cc6f8","type":"websocket out","z":"b85a6914.392f38","name":"","server":"f5b16af8.d16738","client":"","x":1200,"y":780,"wires":[]},{"id":"356f3201.ee36ee","type":"function","z":"b85a6914.392f38","name":"THREE","func":"var a = msg.payload[3].TIP;\nvar name = msg.payload[3].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":720,"wires":[["8ce626b3.142d68"]]},{"id":"8ce626b3.142d68","type":"split","z":"b85a6914.392f38","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":950,"y":720,"wires":[["16eb035f.adab0d"]]},{"id":"16eb035f.adab0d","type":"join","z":"b85a6914.392f38","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":780,"wires":[["d5270c78.cc6f8"]]},{"id":"56587199.53da7","type":"websocket out","z":"b85a6914.392f38","name":"","server":"a004c7be.acbbf8","client":"","x":1180,"y":940,"wires":[]},{"id":"96cc7350.d9178","type":"function","z":"b85a6914.392f38","name":"FOUR","func":"var a = msg.payload[4].TIP;\nvar name = msg.payload[4].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":880,"wires":[["116065df.0dab2a"]]},{"id":"116065df.0dab2a","type":"split","z":"b85a6914.392f38","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":950,"y":880,"wires":[["ed88bad4.5c5658"]]},{"id":"ed88bad4.5c5658","type":"join","z":"b85a6914.392f38","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":950,"y":940,"wires":[["56587199.53da7"]]},{"id":"7db98d03.249ef4","type":"websocket out","z":"b85a6914.392f38","name":"","server":"66211e67.c3128","client":"","x":1140,"y":1080,"wires":[]},{"id":"300e3e4c.3cf2b2","type":"function","z":"b85a6914.392f38","name":"FIVE","func":"var a = msg.payload[5].TIP;\nvar name = msg.payload[5].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[5].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[5].IMAGE,\n    \"RECEIPTID\": msg.payload[5].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1020,"wires":[["58da4602.520118"]]},{"id":"58da4602.520118","type":"split","z":"b85a6914.392f38","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":910,"y":1020,"wires":[["2e2fa48e.c9a1cc"]]},{"id":"2e2fa48e.c9a1cc","type":"join","z":"b85a6914.392f38","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":910,"y":1080,"wires":[["7db98d03.249ef4"]]},{"id":"e2fcd728.2f20c8","type":"websocket out","z":"b85a6914.392f38","name":"","server":"c889c4f2.1477a8","client":"","x":1140,"y":1240,"wires":[]},{"id":"ba84e562.d1c2c8","type":"function","z":"b85a6914.392f38","name":"SIX","func":"var a = msg.payload[6].TIP;\nvar name = msg.payload[6].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[6].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[6].IMAGE,\n    \"RECEIPTID\": msg.payload[6].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":690,"y":1180,"wires":[["90cd0b6.6303ff8"]]},{"id":"90cd0b6.6303ff8","type":"split","z":"b85a6914.392f38","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":930,"y":1180,"wires":[["587699d8.a574e8"]]},{"id":"587699d8.a574e8","type":"join","z":"b85a6914.392f38","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1240,"wires":[["e2fcd728.2f20c8"]]},{"id":"cb833d36.2736b","type":"websocket out","z":"b85a6914.392f38","name":"","server":"e24dc8e5.fcf708","client":"","x":1200,"y":340,"wires":[]},{"id":"b942931.b7f407","type":"inject","z":"e37b953f.b70e58","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":210,"y":120,"wires":[["738ec9a8.02a618","2eba516a.58bcfe"]]},{"id":"aba1aad7.c21c08","type":"Db2 in","z":"e37b953f.b70e58","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":380,"y":980,"wires":[["a68bcdaf.be133","5a3f8269.4c60fc","1f34b1b8.85780e","6c7c4cf6.087274","1cba8683.989369","62fdd55.e75782c","abb1c3d1.61c25","c0402b78.c526e8"]]},{"id":"738ec9a8.02a618","type":"function","z":"e37b953f.b70e58","name":"","func":"let query = \"SELECT COUNT(DATE) FROM YELLOw;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":60,"wires":[["5f83ebd4.8ee694"]]},{"id":"c5fa4c3b.e48c3","type":"link out","z":"e37b953f.b70e58","name":"Count","links":["71183fde.b1be7"],"x":835,"y":60,"wires":[]},{"id":"5f83ebd4.8ee694","type":"Db2 in","z":"e37b953f.b70e58","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":580,"y":80,"wires":[["c5fa4c3b.e48c3"]]},{"id":"2eba516a.58bcfe","type":"function","z":"e37b953f.b70e58","name":"","func":"let query = \"SELECT * FROM BLUADMIN.YELLOW ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":160,"wires":[["aba1aad7.c21c08"]]},{"id":"a68bcdaf.be133","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":620,"y":200,"wires":[["c8e72881.e4f9b8"]]},{"id":"c8e72881.e4f9b8","type":"function","z":"e37b953f.b70e58","name":"ZERO","func":"\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"TIP\": msg.payload.TIP\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":200,"wires":[["5f543039.83357"]]},{"id":"5a3f8269.4c60fc","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":640,"y":260,"wires":[["191ad718.6b4e29"]]},{"id":"191ad718.6b4e29","type":"function","z":"e37b953f.b70e58","name":"ZERO","func":"\nmsg.payload = {\n    \n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"TIP\": msg.payload[0].TIP\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":260,"wires":[["5f543039.83357"]]},{"id":"5f543039.83357","type":"split","z":"e37b953f.b70e58","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1040,"y":260,"wires":[["9bb2b5bc.5d3088"]]},{"id":"9bb2b5bc.5d3088","type":"join","z":"e37b953f.b70e58","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1040,"y":320,"wires":[["2884567e.25177a"]]},{"id":"1f34b1b8.85780e","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":380,"wires":[["4f69a598.905e0c"]]},{"id":"4f69a598.905e0c","type":"function","z":"e37b953f.b70e58","name":"ONE","func":"var a = msg.payload[1].TIP;\nvar name = msg.payload[1].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":380,"wires":[["7f78fa5e.cc1384"]]},{"id":"7f78fa5e.cc1384","type":"split","z":"e37b953f.b70e58","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":380,"wires":[["69becab3.f55c04"]]},{"id":"69becab3.f55c04","type":"join","z":"e37b953f.b70e58","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":440,"wires":[["3f339880.46fd28"]]},{"id":"6c7c4cf6.087274","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":640,"y":500,"wires":[["1c2bd834.b68d38"]]},{"id":"1c2bd834.b68d38","type":"function","z":"e37b953f.b70e58","name":"TWO","func":"var a = msg.payload[2].TIP;\nvar name = msg.payload[2].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":500,"wires":[["3e56469c.c57e9a"]]},{"id":"3e56469c.c57e9a","type":"split","z":"e37b953f.b70e58","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1040,"y":500,"wires":[["2874d614.ea3e3a"]]},{"id":"2874d614.ea3e3a","type":"join","z":"e37b953f.b70e58","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1040,"y":560,"wires":[["62d396eb.65d2d8"]]},{"id":"2884567e.25177a","type":"websocket out","z":"e37b953f.b70e58","name":"","server":"26c786ed.44238a","client":"","x":1240,"y":320,"wires":[]},{"id":"3f339880.46fd28","type":"websocket out","z":"e37b953f.b70e58","name":"","server":"dbc65a3e.bd2698","client":"","x":1240,"y":420,"wires":[]},{"id":"62d396eb.65d2d8","type":"websocket out","z":"e37b953f.b70e58","name":"","server":"c4a73e3.8b588c","client":"","x":1240,"y":540,"wires":[]},{"id":"1cba8683.989369","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":640,"wires":[["2285dcba.b761e4"]]},{"id":"2285dcba.b761e4","type":"function","z":"e37b953f.b70e58","name":"THREE","func":"var a = msg.payload[3].TIP;\nvar name = msg.payload[3].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":640,"wires":[["60dd20be.63ee"]]},{"id":"60dd20be.63ee","type":"split","z":"e37b953f.b70e58","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":640,"wires":[["e0e22345.951ac"]]},{"id":"e0e22345.951ac","type":"join","z":"e37b953f.b70e58","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":700,"wires":[["4cbb6b99.bb9514"]]},{"id":"4cbb6b99.bb9514","type":"websocket out","z":"e37b953f.b70e58","name":"","server":"3c476dd8.5a1822","client":"","x":1320,"y":700,"wires":[]},{"id":"62fdd55.e75782c","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":800,"wires":[["60bd2254.f2a67c"]]},{"id":"60bd2254.f2a67c","type":"function","z":"e37b953f.b70e58","name":"FOUR","func":"var a = msg.payload[4].TIP;\nvar name = msg.payload[4].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":800,"wires":[["677e0e04.72069"]]},{"id":"677e0e04.72069","type":"split","z":"e37b953f.b70e58","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":800,"wires":[["864f620.474e6a"]]},{"id":"864f620.474e6a","type":"join","z":"e37b953f.b70e58","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":860,"wires":[["4b53ae49.477"]]},{"id":"4b53ae49.477","type":"websocket out","z":"e37b953f.b70e58","name":"","server":"452d1aea.fb0c84","client":"","x":1320,"y":860,"wires":[]},{"id":"abb1c3d1.61c25","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":620,"y":940,"wires":[["99098ef4.3e1cd"]]},{"id":"99098ef4.3e1cd","type":"function","z":"e37b953f.b70e58","name":"FIVE","func":"var a = msg.payload[5].TIP;\nvar name = msg.payload[5].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[5].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[5].IMAGE,\n    \"RECEIPTID\": msg.payload[5].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":940,"wires":[["78969a94.e506f4"]]},{"id":"78969a94.e506f4","type":"split","z":"e37b953f.b70e58","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1020,"y":940,"wires":[["2ede079f.53e848"]]},{"id":"2ede079f.53e848","type":"join","z":"e37b953f.b70e58","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1020,"y":1000,"wires":[["6978527e.f8505c"]]},{"id":"6978527e.f8505c","type":"websocket out","z":"e37b953f.b70e58","name":"","server":"a0337db3.1238d","client":"","x":1280,"y":1000,"wires":[]},{"id":"c0402b78.c526e8","type":"switch","z":"e37b953f.b70e58","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":640,"y":1100,"wires":[["fe7ade14.d8e5d"]]},{"id":"fe7ade14.d8e5d","type":"function","z":"e37b953f.b70e58","name":"SIX","func":"var a = msg.payload[6].TIP;\nvar name = msg.payload[6].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[6].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[6].IMAGE,\n    \"RECEIPTID\": msg.payload[6].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":1100,"wires":[["c66061f0.eeb71"]]},{"id":"c66061f0.eeb71","type":"split","z":"e37b953f.b70e58","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1040,"y":1100,"wires":[["2e61e22d.c821fe"]]},{"id":"2e61e22d.c821fe","type":"join","z":"e37b953f.b70e58","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1040,"y":1160,"wires":[["e076b411.0e10c8"]]},{"id":"e076b411.0e10c8","type":"websocket out","z":"e37b953f.b70e58","name":"","server":"41ad6f4a.2547f","client":"","x":1300,"y":1160,"wires":[]},{"id":"e2bb6659.75f338","type":"inject","z":"2690e03.823922","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":430,"y":220,"wires":[["a36a1238.12a31","c6cf1a9a.bd9c88"]]},{"id":"5a0a2eb2.35f11","type":"Db2 in","z":"2690e03.823922","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":440,"y":1020,"wires":[["b4b212df.28b18","65a015af.4ad9ac","dcbc2ae2.bfce38","26a8702a.b4e3","53e4bf7c.26e54","4da93deb.51ced4","ec161464.e0aa38","15332305.dd371d"]]},{"id":"a36a1238.12a31","type":"function","z":"2690e03.823922","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUE;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":100,"wires":[["1d13d452.b1b0ec"]]},{"id":"969ebee0.675ec","type":"link out","z":"2690e03.823922","name":"Count","links":["71183fde.b1be7"],"x":895,"y":100,"wires":[]},{"id":"1d13d452.b1b0ec","type":"Db2 in","z":"2690e03.823922","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":640,"y":120,"wires":[["969ebee0.675ec"]]},{"id":"c6cf1a9a.bd9c88","type":"function","z":"2690e03.823922","name":"","func":"let query = \"SELECT * FROM BLUE ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":180,"wires":[["5a0a2eb2.35f11"]]},{"id":"b4b212df.28b18","type":"switch","z":"2690e03.823922","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":240,"wires":[["64a62e9.685d0d"]]},{"id":"64a62e9.685d0d","type":"function","z":"2690e03.823922","name":"ZERO","func":"var a = msg.payload.TIP;\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":220,"wires":[["434f2d6a.e8b524"]]},{"id":"65a015af.4ad9ac","type":"switch","z":"2690e03.823922","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":300,"wires":[["93f941e0.92155"]]},{"id":"93f941e0.92155","type":"function","z":"2690e03.823922","name":"ZERO","func":"var a = msg.payload[0].TIP;\nvar name = msg.payload[0].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":300,"wires":[["434f2d6a.e8b524"]]},{"id":"434f2d6a.e8b524","type":"split","z":"2690e03.823922","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1100,"y":300,"wires":[["eebd147c.276458"]]},{"id":"eebd147c.276458","type":"join","z":"2690e03.823922","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1100,"y":360,"wires":[["4618c1f6.dc3c5"]]},{"id":"dcbc2ae2.bfce38","type":"switch","z":"2690e03.823922","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":720,"y":420,"wires":[["ab849d33.5ff09"]]},{"id":"ab849d33.5ff09","type":"function","z":"2690e03.823922","name":"ONE","func":"var a = msg.payload[1].TIP;\nvar name = msg.payload[1].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":420,"wires":[["a78cb9a1.c0dec8"]]},{"id":"a78cb9a1.c0dec8","type":"split","z":"2690e03.823922","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1120,"y":420,"wires":[["95c91533.eca5f8"]]},{"id":"95c91533.eca5f8","type":"join","z":"2690e03.823922","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1120,"y":480,"wires":[["8aaa1e1e.c764b"]]},{"id":"26a8702a.b4e3","type":"switch","z":"2690e03.823922","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":540,"wires":[["95ba684e.20ef68"]]},{"id":"95ba684e.20ef68","type":"function","z":"2690e03.823922","name":"TWO","func":"var a = msg.payload[2].TIP;\nvar name = msg.payload[2].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":540,"wires":[["7e922f9b.824a7"]]},{"id":"7e922f9b.824a7","type":"split","z":"2690e03.823922","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1100,"y":540,"wires":[["c39b9a51.a3b478"]]},{"id":"c39b9a51.a3b478","type":"join","z":"2690e03.823922","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1100,"y":600,"wires":[["64f3b351.1d21cc"]]},{"id":"4618c1f6.dc3c5","type":"websocket out","z":"2690e03.823922","name":"","server":"d8594a73.b5f758","client":"","x":1300,"y":360,"wires":[]},{"id":"8aaa1e1e.c764b","type":"websocket out","z":"2690e03.823922","name":"","server":"6c212fec.3e6b","client":"","x":1300,"y":460,"wires":[]},{"id":"64f3b351.1d21cc","type":"websocket out","z":"2690e03.823922","name":"","server":"56021bc5.9e46d4","client":"","x":1300,"y":580,"wires":[]},{"id":"53e4bf7c.26e54","type":"switch","z":"2690e03.823922","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":720,"y":680,"wires":[["6a1f42ba.a68acc"]]},{"id":"6a1f42ba.a68acc","type":"function","z":"2690e03.823922","name":"THREE","func":"var a = msg.payload[3].TIP;\nvar name = msg.payload[3].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":680,"wires":[["4580f0f9.b0a2c"]]},{"id":"4580f0f9.b0a2c","type":"split","z":"2690e03.823922","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1120,"y":680,"wires":[["c8d5847.196e578"]]},{"id":"c8d5847.196e578","type":"join","z":"2690e03.823922","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1120,"y":740,"wires":[["b46b85fb.17a7f8"]]},{"id":"b46b85fb.17a7f8","type":"websocket out","z":"2690e03.823922","name":"","server":"49c002e8.7c978c","client":"","x":1380,"y":740,"wires":[]},{"id":"4da93deb.51ced4","type":"switch","z":"2690e03.823922","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":720,"y":840,"wires":[["f9c72e00.120e9"]]},{"id":"f9c72e00.120e9","type":"function","z":"2690e03.823922","name":"FOUR","func":"var a = msg.payload[4].TIP;\nvar name = msg.payload[4].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":840,"wires":[["a882c23a.3094f"]]},{"id":"a882c23a.3094f","type":"split","z":"2690e03.823922","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1120,"y":840,"wires":[["9471118a.d5396"]]},{"id":"9471118a.d5396","type":"join","z":"2690e03.823922","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1120,"y":900,"wires":[["4a010aee.9b8cf4"]]},{"id":"4a010aee.9b8cf4","type":"websocket out","z":"2690e03.823922","name":"","server":"8b11ed2a.1ce6","client":"","x":1380,"y":900,"wires":[]},{"id":"ec161464.e0aa38","type":"switch","z":"2690e03.823922","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":980,"wires":[["9876c67d.2aa0b8"]]},{"id":"9876c67d.2aa0b8","type":"function","z":"2690e03.823922","name":"FIVE","func":"var a = msg.payload[5].TIP;\nvar name = msg.payload[5].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[5].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[5].IMAGE,\n    \"RECEIPTID\": msg.payload[5].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":980,"wires":[["2e0a18b5.a7d758"]]},{"id":"2e0a18b5.a7d758","type":"split","z":"2690e03.823922","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1080,"y":980,"wires":[["c6f602e1.4e183"]]},{"id":"c6f602e1.4e183","type":"join","z":"2690e03.823922","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":1040,"wires":[["51bc5f73.2ea67"]]},{"id":"51bc5f73.2ea67","type":"websocket out","z":"2690e03.823922","name":"","server":"c498820c.cd809","client":"","x":1340,"y":1040,"wires":[]},{"id":"15332305.dd371d","type":"switch","z":"2690e03.823922","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1140,"wires":[["dbd7733e.d482a"]]},{"id":"dbd7733e.d482a","type":"function","z":"2690e03.823922","name":"SIX","func":"var a = msg.payload[6].TIP;\nvar name = msg.payload[6].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[6].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[6].IMAGE,\n    \"RECEIPTID\": msg.payload[6].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":1140,"wires":[["81c21e9e.ca91a"]]},{"id":"81c21e9e.ca91a","type":"split","z":"2690e03.823922","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1100,"y":1140,"wires":[["c61e6538.502cf8"]]},{"id":"c61e6538.502cf8","type":"join","z":"2690e03.823922","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1100,"y":1200,"wires":[["3fff06f1.06be0a"]]},{"id":"3fff06f1.06be0a","type":"websocket out","z":"2690e03.823922","name":"","server":"a9605bce.28c5d8","client":"","x":1360,"y":1200,"wires":[]},{"id":"74a6491b.1a0608","type":"inject","z":"6b0b8af1.63c1b4","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":250,"y":220,"wires":[["5eb35bcc.513154","61b8194f.2cb098"]]},{"id":"cfc2bd09.67ebe","type":"Db2 in","z":"6b0b8af1.63c1b4","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":400,"y":1060,"wires":[["7742d7e5.ceb008","dffa3db9.569c2","f0c3a34e.69e4e","63806b17.7fbfe4","1bd51056.95c56","15e1f718.ea6439","b7b49206.a1fde","cd598c3b.abc23"]]},{"id":"5eb35bcc.513154","type":"function","z":"6b0b8af1.63c1b4","name":"","func":"let query = \"SELECT COUNT(DATE) FROM ORANGE;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":410,"y":140,"wires":[["e4587530.b3feb8"]]},{"id":"22a73b68.8a82d4","type":"link out","z":"6b0b8af1.63c1b4","name":"Count","links":["71183fde.b1be7"],"x":855,"y":140,"wires":[]},{"id":"e4587530.b3feb8","type":"Db2 in","z":"6b0b8af1.63c1b4","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":600,"y":160,"wires":[["22a73b68.8a82d4"]]},{"id":"61b8194f.2cb098","type":"function","z":"6b0b8af1.63c1b4","name":"","func":"let query = \"SELECT * FROM ORANGE ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":220,"wires":[["cfc2bd09.67ebe"]]},{"id":"7742d7e5.ceb008","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":640,"y":280,"wires":[["7423a0c6.3ea67"]]},{"id":"7423a0c6.3ea67","type":"function","z":"6b0b8af1.63c1b4","name":"ZERO","func":"var a = msg.payload.TIP;\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":280,"wires":[["e34111e3.819aa"]]},{"id":"dffa3db9.569c2","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":340,"wires":[["cd0948cd.d3f788"]]},{"id":"cd0948cd.d3f788","type":"function","z":"6b0b8af1.63c1b4","name":"ZERO","func":"var a = msg.payload[0].TIP;\nvar name = msg.payload[0].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":340,"wires":[["e34111e3.819aa"]]},{"id":"e34111e3.819aa","type":"split","z":"6b0b8af1.63c1b4","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":340,"wires":[["b4afcd36.1a563"]]},{"id":"b4afcd36.1a563","type":"join","z":"6b0b8af1.63c1b4","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":400,"wires":[["1268d3fc.12fb5c"]]},{"id":"f0c3a34e.69e4e","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":460,"wires":[["da89f33d.f0f4a"]]},{"id":"da89f33d.f0f4a","type":"function","z":"6b0b8af1.63c1b4","name":"ONE","func":"var a = msg.payload[1].TIP;\nvar name = msg.payload[1].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":460,"wires":[["2cc9880d.dad148"]]},{"id":"2cc9880d.dad148","type":"split","z":"6b0b8af1.63c1b4","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1080,"y":460,"wires":[["141105c5.8dfaaa"]]},{"id":"141105c5.8dfaaa","type":"join","z":"6b0b8af1.63c1b4","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":520,"wires":[["b43ac58e.90acc8"]]},{"id":"63806b17.7fbfe4","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":580,"wires":[["f66861cd.435cf"]]},{"id":"f66861cd.435cf","type":"function","z":"6b0b8af1.63c1b4","name":"TWO","func":"var a = msg.payload[2].TIP;\nvar name = msg.payload[2].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":580,"wires":[["8e8a4a37.3589f8"]]},{"id":"8e8a4a37.3589f8","type":"split","z":"6b0b8af1.63c1b4","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":580,"wires":[["61705c33.c326d4"]]},{"id":"61705c33.c326d4","type":"join","z":"6b0b8af1.63c1b4","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":640,"wires":[["85370047.45536"]]},{"id":"1268d3fc.12fb5c","type":"websocket out","z":"6b0b8af1.63c1b4","name":"","server":"7dacfe21.2a756","client":"","x":1270,"y":400,"wires":[]},{"id":"b43ac58e.90acc8","type":"websocket out","z":"6b0b8af1.63c1b4","name":"","server":"67723768.167fa8","client":"","x":1270,"y":500,"wires":[]},{"id":"85370047.45536","type":"websocket out","z":"6b0b8af1.63c1b4","name":"","server":"bb122743.deb4b8","client":"","x":1270,"y":620,"wires":[]},{"id":"1bd51056.95c56","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":720,"wires":[["bb58ac4b.ba8da"]]},{"id":"bb58ac4b.ba8da","type":"function","z":"6b0b8af1.63c1b4","name":"THREE","func":"var a = msg.payload[3].TIP;\nvar name = msg.payload[3].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":720,"wires":[["89615a54.500ae8"]]},{"id":"89615a54.500ae8","type":"split","z":"6b0b8af1.63c1b4","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1080,"y":720,"wires":[["411888e7.01b6f8"]]},{"id":"411888e7.01b6f8","type":"join","z":"6b0b8af1.63c1b4","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":780,"wires":[["d8f91021.28546"]]},{"id":"d8f91021.28546","type":"websocket out","z":"6b0b8af1.63c1b4","name":"","server":"365eafd5.47452","client":"","x":1350,"y":780,"wires":[]},{"id":"15e1f718.ea6439","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":880,"wires":[["b37996fd.0eb4f8"]]},{"id":"b37996fd.0eb4f8","type":"function","z":"6b0b8af1.63c1b4","name":"FOUR","func":"var a = msg.payload[4].TIP;\nvar name = msg.payload[4].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":880,"wires":[["21495510.8185ba"]]},{"id":"21495510.8185ba","type":"split","z":"6b0b8af1.63c1b4","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1080,"y":880,"wires":[["be27e858.709d88"]]},{"id":"be27e858.709d88","type":"join","z":"6b0b8af1.63c1b4","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":940,"wires":[["abff92c.9757c7"]]},{"id":"abff92c.9757c7","type":"websocket out","z":"6b0b8af1.63c1b4","name":"","server":"a2d3265f.9cfd98","client":"","x":1350,"y":940,"wires":[]},{"id":"b7b49206.a1fde","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":640,"y":1020,"wires":[["81e0147a.5463d8"]]},{"id":"81e0147a.5463d8","type":"function","z":"6b0b8af1.63c1b4","name":"FIVE","func":"var a = msg.payload[5].TIP;\nvar name = msg.payload[5].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[5].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[5].IMAGE,\n    \"RECEIPTID\": msg.payload[5].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":1020,"wires":[["1fbe3a54.b59006"]]},{"id":"1fbe3a54.b59006","type":"split","z":"6b0b8af1.63c1b4","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1040,"y":1020,"wires":[["8c966026.036be"]]},{"id":"8c966026.036be","type":"join","z":"6b0b8af1.63c1b4","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1040,"y":1080,"wires":[["5c73099f.59c1a8"]]},{"id":"5c73099f.59c1a8","type":"websocket out","z":"6b0b8af1.63c1b4","name":"","server":"67b827e7.040fd8","client":"","x":1310,"y":1080,"wires":[]},{"id":"cd598c3b.abc23","type":"switch","z":"6b0b8af1.63c1b4","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":1180,"wires":[["71952bc2.0e3854"]]},{"id":"71952bc2.0e3854","type":"function","z":"6b0b8af1.63c1b4","name":"SIX","func":"var a = msg.payload[6].TIP;\nvar name = msg.payload[6].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[6].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[6].IMAGE,\n    \"RECEIPTID\": msg.payload[6].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":1180,"wires":[["509e97d9.543e18"]]},{"id":"509e97d9.543e18","type":"split","z":"6b0b8af1.63c1b4","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":1180,"wires":[["50d754e4.69197c"]]},{"id":"50d754e4.69197c","type":"join","z":"6b0b8af1.63c1b4","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":1240,"wires":[["ab2d3d57.1ecf7"]]},{"id":"ab2d3d57.1ecf7","type":"websocket out","z":"6b0b8af1.63c1b4","name":"","server":"a0d0aecb.d6cb","client":"","x":1330,"y":1240,"wires":[]},{"id":"52a9ad53.54c8b4","type":"inject","z":"667546bc.ca9728","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":410,"y":300,"wires":[["e9bc263c.87f848","bb9c4cb1.1f5d5"]]},{"id":"a52d2ab9.ae5fa8","type":"Db2 in","z":"667546bc.ca9728","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":500,"y":1140,"wires":[["be31e4c4.d05ef8","136686a7.60a079","47a764dd.d01bfc","b704f5c6.08e468","3d5cd4f.a5b952c","76f6c717.c3c308","4815965d.04dea8","1ccfd3df.a6e64c"]]},{"id":"e9bc263c.87f848","type":"function","z":"667546bc.ca9728","name":"","func":"let query = \"SELECT COUNT(DATE) FROM GREEN;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":220,"wires":[["67ea8e15.32b8"]]},{"id":"841bcf91.91aef","type":"link out","z":"667546bc.ca9728","name":"Count","links":["71183fde.b1be7"],"x":955,"y":220,"wires":[]},{"id":"67ea8e15.32b8","type":"Db2 in","z":"667546bc.ca9728","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":700,"y":240,"wires":[["841bcf91.91aef"]]},{"id":"bb9c4cb1.1f5d5","type":"function","z":"667546bc.ca9728","name":"","func":"let query = \"SELECT * FROM GREEN ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":300,"wires":[["a52d2ab9.ae5fa8"]]},{"id":"be31e4c4.d05ef8","type":"switch","z":"667546bc.ca9728","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":740,"y":360,"wires":[["fe6d41f7.8369b"]]},{"id":"fe6d41f7.8369b","type":"function","z":"667546bc.ca9728","name":"ZERO","func":"var a = msg.payload.TIP;\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":900,"y":360,"wires":[["db468b8d.8a3598"]]},{"id":"136686a7.60a079","type":"switch","z":"667546bc.ca9728","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":760,"y":420,"wires":[["e92bdc8.238562"]]},{"id":"e92bdc8.238562","type":"function","z":"667546bc.ca9728","name":"ZERO","func":"var a = msg.payload[0].TIP;\nvar name = msg.payload[0].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":420,"wires":[["db468b8d.8a3598"]]},{"id":"db468b8d.8a3598","type":"split","z":"667546bc.ca9728","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1160,"y":420,"wires":[["f26a1a4f.8a2398"]]},{"id":"f26a1a4f.8a2398","type":"join","z":"667546bc.ca9728","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1160,"y":480,"wires":[["fc65d5bc.1aabe8"]]},{"id":"47a764dd.d01bfc","type":"switch","z":"667546bc.ca9728","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":780,"y":540,"wires":[["de81b6d6.baa3a8"]]},{"id":"de81b6d6.baa3a8","type":"function","z":"667546bc.ca9728","name":"ONE","func":"var a = msg.payload[1].TIP;\nvar name = msg.payload[1].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":540,"wires":[["ccebb0ab.cd705"]]},{"id":"ccebb0ab.cd705","type":"split","z":"667546bc.ca9728","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1180,"y":540,"wires":[["99309b17.1bf838"]]},{"id":"99309b17.1bf838","type":"join","z":"667546bc.ca9728","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1180,"y":600,"wires":[["618e6419.671d2c"]]},{"id":"b704f5c6.08e468","type":"switch","z":"667546bc.ca9728","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":760,"y":660,"wires":[["719e7ebf.e2703"]]},{"id":"719e7ebf.e2703","type":"function","z":"667546bc.ca9728","name":"TWO","func":"var a = msg.payload[2].TIP;\nvar name = msg.payload[2].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":660,"wires":[["b3e19eeb.430be"]]},{"id":"b3e19eeb.430be","type":"split","z":"667546bc.ca9728","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1160,"y":660,"wires":[["918fd2a8.4f17f"]]},{"id":"918fd2a8.4f17f","type":"join","z":"667546bc.ca9728","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1160,"y":720,"wires":[["c50f3cb2.0478b"]]},{"id":"fc65d5bc.1aabe8","type":"websocket out","z":"667546bc.ca9728","name":"","server":"b6557ae2.c4cb28","client":"","x":1360,"y":480,"wires":[]},{"id":"618e6419.671d2c","type":"websocket out","z":"667546bc.ca9728","name":"","server":"13fcbc0b.dec9d4","client":"","x":1360,"y":580,"wires":[]},{"id":"c50f3cb2.0478b","type":"websocket out","z":"667546bc.ca9728","name":"","server":"e1133e89.94422","client":"","x":1360,"y":700,"wires":[]},{"id":"3d5cd4f.a5b952c","type":"switch","z":"667546bc.ca9728","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":780,"y":800,"wires":[["37aa4be3.aa0894"]]},{"id":"37aa4be3.aa0894","type":"function","z":"667546bc.ca9728","name":"THREE","func":"var a = msg.payload[3].TIP;\nvar name = msg.payload[3].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":950,"y":800,"wires":[["7bd22c9f.df8dd4"]]},{"id":"7bd22c9f.df8dd4","type":"split","z":"667546bc.ca9728","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1180,"y":800,"wires":[["7f617a66.b314f4"]]},{"id":"7f617a66.b314f4","type":"join","z":"667546bc.ca9728","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1180,"y":860,"wires":[["820a9f0d.f18cc"]]},{"id":"820a9f0d.f18cc","type":"websocket out","z":"667546bc.ca9728","name":"","server":"851626f0.6ea418","client":"","x":1440,"y":860,"wires":[]},{"id":"76f6c717.c3c308","type":"switch","z":"667546bc.ca9728","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":780,"y":960,"wires":[["286773ba.0e3c0c"]]},{"id":"286773ba.0e3c0c","type":"function","z":"667546bc.ca9728","name":"FOUR","func":"var a = msg.payload[4].TIP;\nvar name = msg.payload[4].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":960,"wires":[["9c9b4384.79159"]]},{"id":"9c9b4384.79159","type":"split","z":"667546bc.ca9728","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1180,"y":960,"wires":[["ecb412b0.a43d9"]]},{"id":"ecb412b0.a43d9","type":"join","z":"667546bc.ca9728","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1180,"y":1020,"wires":[["8a87cdf5.c6c2"]]},{"id":"8a87cdf5.c6c2","type":"websocket out","z":"667546bc.ca9728","name":"","server":"4b9bc85f.f22868","client":"","x":1440,"y":1020,"wires":[]},{"id":"4815965d.04dea8","type":"switch","z":"667546bc.ca9728","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":740,"y":1100,"wires":[["f92baa77.79f558"]]},{"id":"f92baa77.79f558","type":"function","z":"667546bc.ca9728","name":"FIVE","func":"var a = msg.payload[5].TIP;\nvar name = msg.payload[5].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[5].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[5].IMAGE,\n    \"RECEIPTID\": msg.payload[5].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":900,"y":1100,"wires":[["485399f3.93a758"]]},{"id":"485399f3.93a758","type":"split","z":"667546bc.ca9728","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1140,"y":1100,"wires":[["34513f0b.1e57"]]},{"id":"34513f0b.1e57","type":"join","z":"667546bc.ca9728","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1140,"y":1160,"wires":[["b5f1fb64.c44738"]]},{"id":"b5f1fb64.c44738","type":"websocket out","z":"667546bc.ca9728","name":"","server":"b854f6ed.faa918","client":"","x":1400,"y":1160,"wires":[]},{"id":"1ccfd3df.a6e64c","type":"switch","z":"667546bc.ca9728","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":760,"y":1260,"wires":[["1730c97d.0639e7"]]},{"id":"1730c97d.0639e7","type":"function","z":"667546bc.ca9728","name":"SIX","func":"var a = msg.payload[6].TIP;\nvar name = msg.payload[6].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[6].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[6].IMAGE,\n    \"RECEIPTID\": msg.payload[6].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":1260,"wires":[["773be1a.11cec2"]]},{"id":"773be1a.11cec2","type":"split","z":"667546bc.ca9728","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1160,"y":1260,"wires":[["f01b4dc0.c049b"]]},{"id":"f01b4dc0.c049b","type":"join","z":"667546bc.ca9728","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1160,"y":1320,"wires":[["dcc46657.7d1798"]]},{"id":"dcc46657.7d1798","type":"websocket out","z":"667546bc.ca9728","name":"","server":"ce255a7c.0614a8","client":"","x":1420,"y":1320,"wires":[]},{"id":"773de58.525351c","type":"inject","z":"3e1505a9.19f9aa","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":330,"y":240,"wires":[["c2e2433f.f96b8","22ac6ad1.5d0fd6"]]},{"id":"5a4f9504.96321c","type":"Db2 in","z":"3e1505a9.19f9aa","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":420,"y":1080,"wires":[["3687b306.94da3c","27449201.2250de","e492a3ff.5ee25","b79ba89c.16dba8","8c41d8f.d9b6028","9a75ef9d.5bd9b","f341ba99.d3f2d8","815f9e85.7ee7"]]},{"id":"c2e2433f.f96b8","type":"function","z":"3e1505a9.19f9aa","name":"","func":"let query = \"SELECT COUNT(DATE) FROM PURPLE;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":160,"wires":[["96ce3311.4ced6"]]},{"id":"dc5da28a.0414","type":"link out","z":"3e1505a9.19f9aa","name":"Count","links":["71183fde.b1be7","848c7560.a74cb8"],"x":875,"y":160,"wires":[]},{"id":"96ce3311.4ced6","type":"Db2 in","z":"3e1505a9.19f9aa","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":620,"y":180,"wires":[["dc5da28a.0414"]]},{"id":"22ac6ad1.5d0fd6","type":"function","z":"3e1505a9.19f9aa","name":"","func":"let query = \"SELECT * FROM PURPLE ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":240,"wires":[["5a4f9504.96321c"]]},{"id":"3687b306.94da3c","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":300,"wires":[["11e7f80c.866f88"]]},{"id":"11e7f80c.866f88","type":"function","z":"3e1505a9.19f9aa","name":"ZERO","func":"var a = msg.payload.TIP;\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":300,"wires":[["361678cf.341308"]]},{"id":"27449201.2250de","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":360,"wires":[["7667d682.12e7c8"]]},{"id":"7667d682.12e7c8","type":"function","z":"3e1505a9.19f9aa","name":"ZERO","func":"var a = msg.payload[0].TIP;\nvar name = msg.payload[0].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":360,"wires":[["361678cf.341308"]]},{"id":"361678cf.341308","type":"split","z":"3e1505a9.19f9aa","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1080,"y":360,"wires":[["2d256cdb.7c9fd4"]]},{"id":"2d256cdb.7c9fd4","type":"join","z":"3e1505a9.19f9aa","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":420,"wires":[["9662d9d8.3f9108"]]},{"id":"e492a3ff.5ee25","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":480,"wires":[["9a1796a7.a66328"]]},{"id":"9a1796a7.a66328","type":"function","z":"3e1505a9.19f9aa","name":"ONE","func":"var a = msg.payload[1].TIP;\nvar name = msg.payload[1].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":480,"wires":[["60130f2.02745f"]]},{"id":"60130f2.02745f","type":"split","z":"3e1505a9.19f9aa","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1100,"y":480,"wires":[["fc7ddec0.d9ef5"]]},{"id":"fc7ddec0.d9ef5","type":"join","z":"3e1505a9.19f9aa","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1100,"y":540,"wires":[["bc18bde8.d3445"]]},{"id":"b79ba89c.16dba8","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":600,"wires":[["21c10ad5.2cf196"]]},{"id":"21c10ad5.2cf196","type":"function","z":"3e1505a9.19f9aa","name":"TWO","func":"var a = msg.payload[2].TIP;\nvar name = msg.payload[2].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":600,"wires":[["a3b5f06c.3a7c1"]]},{"id":"a3b5f06c.3a7c1","type":"split","z":"3e1505a9.19f9aa","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1080,"y":600,"wires":[["de3deeb8.b46c3"]]},{"id":"de3deeb8.b46c3","type":"join","z":"3e1505a9.19f9aa","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":660,"wires":[["73adfab4.3b6934"]]},{"id":"9662d9d8.3f9108","type":"websocket out","z":"3e1505a9.19f9aa","name":"","server":"bf0cf993.3bcf18","client":"","x":1280,"y":420,"wires":[]},{"id":"bc18bde8.d3445","type":"websocket out","z":"3e1505a9.19f9aa","name":"","server":"8281a3e7.cdefc","client":"","x":1280,"y":520,"wires":[]},{"id":"73adfab4.3b6934","type":"websocket out","z":"3e1505a9.19f9aa","name":"","server":"626ac2c0.6ca18c","client":"","x":1280,"y":640,"wires":[]},{"id":"8c41d8f.d9b6028","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":740,"wires":[["d2d38d53.a1dc2"]]},{"id":"d2d38d53.a1dc2","type":"function","z":"3e1505a9.19f9aa","name":"THREE","func":"var a = msg.payload[3].TIP;\nvar name = msg.payload[3].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":740,"wires":[["c0785e35.1ecf4"]]},{"id":"c0785e35.1ecf4","type":"split","z":"3e1505a9.19f9aa","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1100,"y":740,"wires":[["bca6a55c.5e5808"]]},{"id":"bca6a55c.5e5808","type":"join","z":"3e1505a9.19f9aa","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1100,"y":800,"wires":[["e8a84729.045bb8"]]},{"id":"e8a84729.045bb8","type":"websocket out","z":"3e1505a9.19f9aa","name":"","server":"acf07a98.89e6d8","client":"","x":1360,"y":800,"wires":[]},{"id":"9a75ef9d.5bd9b","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":900,"wires":[["167a76ca.3953e9"]]},{"id":"167a76ca.3953e9","type":"function","z":"3e1505a9.19f9aa","name":"FOUR","func":"var a = msg.payload[4].TIP;\nvar name = msg.payload[4].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":900,"wires":[["c24ec49c.bfe8c8"]]},{"id":"c24ec49c.bfe8c8","type":"split","z":"3e1505a9.19f9aa","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1100,"y":900,"wires":[["3b0ee3df.39685c"]]},{"id":"3b0ee3df.39685c","type":"join","z":"3e1505a9.19f9aa","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1100,"y":960,"wires":[["84ac9cfc.54e18"]]},{"id":"84ac9cfc.54e18","type":"websocket out","z":"3e1505a9.19f9aa","name":"","server":"326e2dfa.b77742","client":"","x":1360,"y":960,"wires":[]},{"id":"f341ba99.d3f2d8","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":1040,"wires":[["af995db1.38e6d"]]},{"id":"af995db1.38e6d","type":"function","z":"3e1505a9.19f9aa","name":"FIVE","func":"var a = msg.payload[5].TIP;\nvar name = msg.payload[5].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[5].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[5].IMAGE,\n    \"RECEIPTID\": msg.payload[5].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":1040,"wires":[["cf56e327.4cfdb"]]},{"id":"cf56e327.4cfdb","type":"split","z":"3e1505a9.19f9aa","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1060,"y":1040,"wires":[["67000810.380d88"]]},{"id":"67000810.380d88","type":"join","z":"3e1505a9.19f9aa","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":1100,"wires":[["a4dfd419.6df628"]]},{"id":"a4dfd419.6df628","type":"websocket out","z":"3e1505a9.19f9aa","name":"","server":"93cdcc1b.13daa","client":"","x":1320,"y":1100,"wires":[]},{"id":"815f9e85.7ee7","type":"switch","z":"3e1505a9.19f9aa","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":1200,"wires":[["55f8bce1.9bd074"]]},{"id":"55f8bce1.9bd074","type":"function","z":"3e1505a9.19f9aa","name":"SIX","func":"var a = msg.payload[6].TIP;\nvar name = msg.payload[6].NAME;\nmsg.payload = {\n    \n    \"DATE\": msg.payload[6].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[6].IMAGE,\n    \"RECEIPTID\": msg.payload[6].RECEIPTID,\n    \"TIP\": a.toFixed(2)\n    \n    \n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":1200,"wires":[["8ab590bc.9afba"]]},{"id":"8ab590bc.9afba","type":"split","z":"3e1505a9.19f9aa","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1080,"y":1200,"wires":[["22363bfb.d4ba04"]]},{"id":"22363bfb.d4ba04","type":"join","z":"3e1505a9.19f9aa","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":1260,"wires":[["3a451b26.538334"]]},{"id":"3a451b26.538334","type":"websocket out","z":"3e1505a9.19f9aa","name":"","server":"67dbeb8d.88d944","client":"","x":1340,"y":1260,"wires":[]},{"id":"d595e99b.f7f4f8","type":"link in","z":"b85a6914.392f38","name":"RED0","links":["3953d4.a799ec2c"],"x":1065,"y":260,"wires":[["cb833d36.2736b"]]},{"id":"7e001d1.59295e4","type":"link in","z":"b85a6914.392f38","name":"RED1","links":["e5c3ddcd.d49c8"],"x":1075,"y":440,"wires":[["8497169.2a970e8"]]},{"id":"85e55caf.9bd65","type":"link in","z":"b85a6914.392f38","name":"RED2","links":["dcbfe872.ad6968"],"x":1085,"y":600,"wires":[["e13ec2d8.27a0a"]]},{"id":"460c3988.cc3f68","type":"link in","z":"b85a6914.392f38","name":"RED3","links":["a8cbbd23.c65c6"],"x":1105,"y":720,"wires":[["d5270c78.cc6f8"]]},{"id":"79aa8b75.0d74d4","type":"link in","z":"b85a6914.392f38","name":"RED4","links":["6445c820.ff08f8"],"x":1085,"y":880,"wires":[["56587199.53da7"]]},{"id":"141f9a58.5e4f26","type":"link in","z":"b85a6914.392f38","name":"RED5","links":["f8e68e68.d853d"],"x":1085,"y":1040,"wires":[["7db98d03.249ef4"]]},{"id":"d2e8d37e.e9003","type":"link in","z":"b85a6914.392f38","name":"RED6","links":["a2722a7d.ffd288"],"x":1085,"y":1180,"wires":[["e2fcd728.2f20c8"]]},{"id":"ecbf2a54.a34138","type":"link in","z":"e37b953f.b70e58","name":"YELLOW0","links":["e70414c.e7a54e8"],"x":1205,"y":220,"wires":[["2884567e.25177a"]]},{"id":"80d4b97d.85e9c8","type":"link in","z":"e37b953f.b70e58","name":"YELLOW1","links":["58b3bf00.0034f"],"x":1165,"y":380,"wires":[["3f339880.46fd28"]]},{"id":"5161227a.c3ad5c","type":"link in","z":"e37b953f.b70e58","name":"YELLOW2","links":["ff046d53.906eb"],"x":1165,"y":480,"wires":[["62d396eb.65d2d8"]]},{"id":"2444fdec.bdd742","type":"link in","z":"e37b953f.b70e58","name":"YELLOW3","links":["ab40d21a.4363d"],"x":1225,"y":640,"wires":[["4cbb6b99.bb9514"]]},{"id":"de1eb156.988a","type":"link in","z":"e37b953f.b70e58","name":"YELLOW4","links":["6b20347f.5e223c"],"x":1205,"y":800,"wires":[["4b53ae49.477"]]},{"id":"e2d8d431.22f248","type":"link in","z":"e37b953f.b70e58","name":"YELLOW5","links":["a246e0c4.aa863"],"x":1165,"y":960,"wires":[["6978527e.f8505c"]]},{"id":"9b855f4e.eac38","type":"link in","z":"e37b953f.b70e58","name":"YELLOW6","links":["26e9a3df.f73e4c"],"x":1165,"y":1120,"wires":[["e076b411.0e10c8"]]},{"id":"7374e014.df3ae","type":"link in","z":"2690e03.823922","name":"BLUE0","links":["55ace5ce.762d7c"],"x":1215,"y":280,"wires":[["4618c1f6.dc3c5"]]},{"id":"e50799d4.630cc8","type":"link in","z":"2690e03.823922","name":"BLUE1","links":["2d3f9c59.e9a294"],"x":1245,"y":420,"wires":[["8aaa1e1e.c764b"]]},{"id":"3742c784.e02de8","type":"link in","z":"2690e03.823922","name":"BLUE2","links":["87e39fff.59d0b"],"x":1265,"y":540,"wires":[["64f3b351.1d21cc"]]},{"id":"c3a70224.00c3b","type":"link in","z":"2690e03.823922","name":"BLUE3","links":["beb7f429.188d88"],"x":1305,"y":680,"wires":[["b46b85fb.17a7f8"]]},{"id":"192aebdc.857d84","type":"link in","z":"2690e03.823922","name":"BLUE4","links":["d20ce5d6.df1818"],"x":1285,"y":820,"wires":[["4a010aee.9b8cf4"]]},{"id":"904c1695.f2d838","type":"link in","z":"2690e03.823922","name":"BLUE5","links":["36482eb6.afca12"],"x":1285,"y":980,"wires":[["51bc5f73.2ea67"]]},{"id":"2f4e4b4d.2296d4","type":"link in","z":"2690e03.823922","name":"BLUE6","links":["e9a5f41b.d8f4a8"],"x":1285,"y":1120,"wires":[["3fff06f1.06be0a"]]},{"id":"1e613f43.a818e1","type":"link in","z":"6b0b8af1.63c1b4","name":"ORANGE0","links":["bd011e01.afe24"],"x":1185,"y":360,"wires":[["1268d3fc.12fb5c"]]},{"id":"9f0ee35c.a410a","type":"link in","z":"6b0b8af1.63c1b4","name":"ORANGE1","links":["6257e30d.0028dc"],"x":1245,"y":440,"wires":[["b43ac58e.90acc8"]]},{"id":"4b62d194.cf376","type":"link in","z":"6b0b8af1.63c1b4","name":"ORANGE2","links":["8002f0bf.28c11"],"x":1185,"y":560,"wires":[["85370047.45536"]]},{"id":"42e7fb2d.d45f84","type":"link in","z":"6b0b8af1.63c1b4","name":"ORANGE3","links":["89b2b0d8.45f22"],"x":1235,"y":700,"wires":[["d8f91021.28546"]]},{"id":"8733251d.e4e3b8","type":"link in","z":"6b0b8af1.63c1b4","name":"ORANGE4","links":["1f8fc62d.5f75aa"],"x":1265,"y":880,"wires":[["abff92c.9757c7"]]},{"id":"cf308e15.f9354","type":"link in","z":"6b0b8af1.63c1b4","name":"ORANGE5","links":["34596d45.9447d2"],"x":1225,"y":1040,"wires":[["5c73099f.59c1a8"]]},{"id":"adc629cb.dd87b8","type":"link in","z":"6b0b8af1.63c1b4","name":"ORANGE6","links":["6b9ba281.2e9c6c"],"x":1265,"y":1160,"wires":[["ab2d3d57.1ecf7"]]},{"id":"79cce436.fb188c","type":"link in","z":"667546bc.ca9728","name":"GREEN0","links":["98d02e23.5aedc"],"x":1265,"y":380,"wires":[["fc65d5bc.1aabe8"]]},{"id":"9b7ad69f.456818","type":"link in","z":"667546bc.ca9728","name":"GREEN1","links":["a2e68b9c.3b3cc8"],"x":1305,"y":540,"wires":[["618e6419.671d2c"]]},{"id":"2c9faf9d.2738e","type":"link in","z":"667546bc.ca9728","name":"GREEN2","links":["3700441b.36f8dc"],"x":1305,"y":640,"wires":[["c50f3cb2.0478b"]]},{"id":"cb94f4f9.181708","type":"link in","z":"667546bc.ca9728","name":"GREEN3","links":["10ccbf0b.43a821"],"x":1335,"y":820,"wires":[["820a9f0d.f18cc"]]},{"id":"9c2ef8f6.af7148","type":"link in","z":"667546bc.ca9728","name":"GREEN4","links":["936dc569.aeed68"],"x":1305,"y":960,"wires":[["8a87cdf5.c6c2"]]},{"id":"a7b9c3e0.600e6","type":"link in","z":"667546bc.ca9728","name":"GREEN5","links":["3a33101.0071ef"],"x":1325,"y":1100,"wires":[["b5f1fb64.c44738"]]},{"id":"e13d17b5.732568","type":"link in","z":"667546bc.ca9728","name":"GREEN6","links":["df923e9e.d972e"],"x":1285,"y":1240,"wires":[["dcc46657.7d1798"]]},{"id":"ec644b55.d514a8","type":"link in","z":"3e1505a9.19f9aa","name":"PURPLE0","links":["b426ed1b.58cd1"],"x":1225,"y":340,"wires":[["9662d9d8.3f9108"]]},{"id":"fa5203ee.1c613","type":"link in","z":"3e1505a9.19f9aa","name":"PURPLE1","links":["e29fb753.197a08"],"x":1225,"y":480,"wires":[["bc18bde8.d3445"]]},{"id":"da7e0198.b606","type":"link in","z":"3e1505a9.19f9aa","name":"PURPLE2","links":["78ac3a5c.b1eaa4"],"x":1225,"y":600,"wires":[["73adfab4.3b6934"]]},{"id":"1f5c1c7f.c0c034","type":"link in","z":"3e1505a9.19f9aa","name":"PURPLE3","links":["d1b3c297.2e517"],"x":1305,"y":740,"wires":[["e8a84729.045bb8"]]},{"id":"be85ecf7.90a11","type":"link in","z":"3e1505a9.19f9aa","name":"PURPLE4","links":["5dc081ea.609ab"],"x":1245,"y":920,"wires":[["84ac9cfc.54e18"]]},{"id":"c79d12cc.c1c7f","type":"link in","z":"3e1505a9.19f9aa","name":"PURPLE5","links":["b0cdae79.cc88a"],"x":1205,"y":1060,"wires":[["a4dfd419.6df628"]]},{"id":"5e38e04e.e20cb","type":"link in","z":"3e1505a9.19f9aa","name":"PURPLE6","links":["842464d2.ce5768"],"x":1245,"y":1180,"wires":[["3a451b26.538334"]]},{"id":"6aa163e6.9f19dc","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":320,"y":260,"wires":[]},{"id":"848c7560.a74cb8","type":"link in","z":"40f8f6d.a9b5908","name":"CountInUse","links":["dc5da28a.0414"],"x":135,"y":260,"wires":[["c908724e.811f8","f0e6277a.d32718","ee6667af.21f638","43d8036.7761afc","c667f881.26c298","822caed1.6c4c1","ffc77377.1846f"]]},{"id":"c908724e.811f8","type":"function","z":"40f8f6d.a9b5908","name":"Count0","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":40,"wires":[["b426ed1b.58cd1","e29fb753.197a08","78ac3a5c.b1eaa4","d1b3c297.2e517","5dc081ea.609ab","b0cdae79.cc88a","842464d2.ce5768"]]},{"id":"f0e6277a.d32718","type":"function","z":"40f8f6d.a9b5908","name":"Count1","func":"if (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":100,"wires":[["e29fb753.197a08","78ac3a5c.b1eaa4","d1b3c297.2e517","5dc081ea.609ab","b0cdae79.cc88a","842464d2.ce5768"]]},{"id":"ee6667af.21f638","type":"function","z":"40f8f6d.a9b5908","name":"Count2","func":"if (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":160,"wires":[["78ac3a5c.b1eaa4","d1b3c297.2e517","5dc081ea.609ab","b0cdae79.cc88a","842464d2.ce5768"]]},{"id":"43d8036.7761afc","type":"function","z":"40f8f6d.a9b5908","name":"Count3","func":"if (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":220,"wires":[["d1b3c297.2e517","5dc081ea.609ab","b0cdae79.cc88a","842464d2.ce5768"]]},{"id":"822caed1.6c4c1","type":"function","z":"40f8f6d.a9b5908","name":"Count5","func":"if (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":340,"wires":[["b0cdae79.cc88a","842464d2.ce5768"]]},{"id":"c667f881.26c298","type":"function","z":"40f8f6d.a9b5908","name":"Count4","func":"if (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":260,"wires":[["5dc081ea.609ab","b0cdae79.cc88a","842464d2.ce5768"]]},{"id":"ffc77377.1846f","type":"function","z":"40f8f6d.a9b5908","name":"Count6","func":"if (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":420,"wires":[["842464d2.ce5768"]]},{"id":"b426ed1b.58cd1","type":"link out","z":"40f8f6d.a9b5908","name":"CountIU0","links":["ec644b55.d514a8"],"x":715,"y":40,"wires":[]},{"id":"e29fb753.197a08","type":"link out","z":"40f8f6d.a9b5908","name":"CountIU1","links":["fa5203ee.1c613"],"x":675,"y":80,"wires":[]},{"id":"78ac3a5c.b1eaa4","type":"link out","z":"40f8f6d.a9b5908","name":"CountIU2","links":["da7e0198.b606"],"x":735,"y":140,"wires":[]},{"id":"d1b3c297.2e517","type":"link out","z":"40f8f6d.a9b5908","name":"CountIU3","links":["1f5c1c7f.c0c034"],"x":715,"y":220,"wires":[]},{"id":"5dc081ea.609ab","type":"link out","z":"40f8f6d.a9b5908","name":"CountIU4","links":["be85ecf7.90a11"],"x":715,"y":280,"wires":[]},{"id":"b0cdae79.cc88a","type":"link out","z":"40f8f6d.a9b5908","name":"CountIU5","links":["c79d12cc.c1c7f"],"x":715,"y":340,"wires":[]},{"id":"842464d2.ce5768","type":"link out","z":"40f8f6d.a9b5908","name":"CountIU6","links":["5e38e04e.e20cb"],"x":715,"y":400,"wires":[]},{"id":"bffd3516.69ce98","type":"link in","z":"53665653.7cae58","name":"CountInUse","links":["f6ff49ec.e00e48","4ebb133c.f7319c"],"x":235,"y":360,"wires":[["8d01f36e.247ce","ad3265.a32d4d98","bf58c466.292ea8","e6fc2ab2.2c0a98","e4d0fe08.f587b","64188c0.c453774","5967cf78.94299"]]},{"id":"8d01f36e.247ce","type":"function","z":"53665653.7cae58","name":"Count0","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":140,"wires":[["bd011e01.afe24","6257e30d.0028dc","8002f0bf.28c11","89b2b0d8.45f22","1f8fc62d.5f75aa","34596d45.9447d2","6b9ba281.2e9c6c"]]},{"id":"ad3265.a32d4d98","type":"function","z":"53665653.7cae58","name":"Count1","func":"if (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":200,"wires":[["6257e30d.0028dc","8002f0bf.28c11","89b2b0d8.45f22","1f8fc62d.5f75aa","34596d45.9447d2","6b9ba281.2e9c6c"]]},{"id":"bf58c466.292ea8","type":"function","z":"53665653.7cae58","name":"Count2","func":"if (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":260,"wires":[["8002f0bf.28c11","89b2b0d8.45f22","1f8fc62d.5f75aa","34596d45.9447d2","6b9ba281.2e9c6c"]]},{"id":"e6fc2ab2.2c0a98","type":"function","z":"53665653.7cae58","name":"Count3","func":"if (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":320,"wires":[["89b2b0d8.45f22","1f8fc62d.5f75aa","34596d45.9447d2","6b9ba281.2e9c6c"]]},{"id":"64188c0.c453774","type":"function","z":"53665653.7cae58","name":"Count5","func":"if (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":440,"wires":[["34596d45.9447d2","6b9ba281.2e9c6c"]]},{"id":"e4d0fe08.f587b","type":"function","z":"53665653.7cae58","name":"Count4","func":"if (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":360,"wires":[["1f8fc62d.5f75aa","34596d45.9447d2","6b9ba281.2e9c6c"]]},{"id":"5967cf78.94299","type":"function","z":"53665653.7cae58","name":"Count6","func":"if (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":520,"wires":[["6b9ba281.2e9c6c"]]},{"id":"bd011e01.afe24","type":"link out","z":"53665653.7cae58","name":"CountIU0","links":["1e613f43.a818e1"],"x":815,"y":140,"wires":[]},{"id":"6257e30d.0028dc","type":"link out","z":"53665653.7cae58","name":"CountIU1","links":["9f0ee35c.a410a"],"x":775,"y":180,"wires":[]},{"id":"8002f0bf.28c11","type":"link out","z":"53665653.7cae58","name":"CountIU2","links":["4b62d194.cf376"],"x":835,"y":240,"wires":[]},{"id":"89b2b0d8.45f22","type":"link out","z":"53665653.7cae58","name":"CountIU3","links":["42e7fb2d.d45f84"],"x":815,"y":320,"wires":[]},{"id":"1f8fc62d.5f75aa","type":"link out","z":"53665653.7cae58","name":"CountIU4","links":["8733251d.e4e3b8"],"x":815,"y":380,"wires":[]},{"id":"34596d45.9447d2","type":"link out","z":"53665653.7cae58","name":"CountIU5","links":["cf308e15.f9354"],"x":815,"y":440,"wires":[]},{"id":"6b9ba281.2e9c6c","type":"link out","z":"53665653.7cae58","name":"CountIU6","links":["adc629cb.dd87b8"],"x":815,"y":500,"wires":[]},{"id":"c4945736.e8d9b8","type":"link in","z":"8c4c3173.3229e","name":"CountInUse","links":["f6ff49ec.e00e48","4ebb133c.f7319c"],"x":215,"y":360,"wires":[["47ea43d2.83d95c","405a5987.07bf38","2c531858.99b078","41936e5b.f29f9","7e703782.6acc08","465f8a57.f935c4","f7d983b1.0cb42"]]},{"id":"47ea43d2.83d95c","type":"function","z":"8c4c3173.3229e","name":"Count0","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":140,"wires":[["98d02e23.5aedc","a2e68b9c.3b3cc8","3700441b.36f8dc","10ccbf0b.43a821","936dc569.aeed68","3a33101.0071ef","df923e9e.d972e"]]},{"id":"405a5987.07bf38","type":"function","z":"8c4c3173.3229e","name":"Count1","func":"if (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":200,"wires":[["a2e68b9c.3b3cc8","3700441b.36f8dc","10ccbf0b.43a821","936dc569.aeed68","3a33101.0071ef","df923e9e.d972e"]]},{"id":"2c531858.99b078","type":"function","z":"8c4c3173.3229e","name":"Count2","func":"if (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":260,"wires":[["3700441b.36f8dc","10ccbf0b.43a821","936dc569.aeed68","3a33101.0071ef","df923e9e.d972e"]]},{"id":"41936e5b.f29f9","type":"function","z":"8c4c3173.3229e","name":"Count3","func":"if (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":320,"wires":[["10ccbf0b.43a821","936dc569.aeed68","3a33101.0071ef","df923e9e.d972e"]]},{"id":"465f8a57.f935c4","type":"function","z":"8c4c3173.3229e","name":"Count5","func":"if (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":440,"wires":[["3a33101.0071ef","df923e9e.d972e"]]},{"id":"7e703782.6acc08","type":"function","z":"8c4c3173.3229e","name":"Count4","func":"if (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":360,"wires":[["936dc569.aeed68","3a33101.0071ef","df923e9e.d972e"]]},{"id":"f7d983b1.0cb42","type":"function","z":"8c4c3173.3229e","name":"Count6","func":"if (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":520,"wires":[["df923e9e.d972e"]]},{"id":"98d02e23.5aedc","type":"link out","z":"8c4c3173.3229e","name":"CountIU0","links":["79cce436.fb188c"],"x":795,"y":140,"wires":[]},{"id":"a2e68b9c.3b3cc8","type":"link out","z":"8c4c3173.3229e","name":"CountIU1","links":["9b7ad69f.456818"],"x":755,"y":180,"wires":[]},{"id":"3700441b.36f8dc","type":"link out","z":"8c4c3173.3229e","name":"CountIU2","links":["2c9faf9d.2738e"],"x":815,"y":240,"wires":[]},{"id":"10ccbf0b.43a821","type":"link out","z":"8c4c3173.3229e","name":"CountIU3","links":["cb94f4f9.181708"],"x":795,"y":320,"wires":[]},{"id":"936dc569.aeed68","type":"link out","z":"8c4c3173.3229e","name":"CountIU4","links":["9c2ef8f6.af7148"],"x":795,"y":380,"wires":[]},{"id":"3a33101.0071ef","type":"link out","z":"8c4c3173.3229e","name":"CountIU5","links":["a7b9c3e0.600e6"],"x":795,"y":440,"wires":[]},{"id":"df923e9e.d972e","type":"link out","z":"8c4c3173.3229e","name":"CountIU6","links":["e13d17b5.732568"],"x":795,"y":500,"wires":[]},{"id":"d388021f.9f3f5","type":"link in","z":"1105ebe7.67b8f4","name":"CountInUse","links":["f6ff49ec.e00e48","4ebb133c.f7319c"],"x":215,"y":320,"wires":[["e80db5c8.471128","eef6fbaa.f7ac08","ced50590.8dbc58","f2a451a5.1cdb2","e7515908.8fb368","91cebb5b.ee1418","54180845.bb8ab8"]]},{"id":"e80db5c8.471128","type":"function","z":"1105ebe7.67b8f4","name":"Count0","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":100,"wires":[["55ace5ce.762d7c","2d3f9c59.e9a294","87e39fff.59d0b","beb7f429.188d88","d20ce5d6.df1818","36482eb6.afca12","e9a5f41b.d8f4a8"]]},{"id":"eef6fbaa.f7ac08","type":"function","z":"1105ebe7.67b8f4","name":"Count1","func":"if (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":160,"wires":[["2d3f9c59.e9a294","87e39fff.59d0b","beb7f429.188d88","d20ce5d6.df1818","36482eb6.afca12","e9a5f41b.d8f4a8"]]},{"id":"ced50590.8dbc58","type":"function","z":"1105ebe7.67b8f4","name":"Count2","func":"if (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":220,"wires":[["87e39fff.59d0b","beb7f429.188d88","d20ce5d6.df1818","36482eb6.afca12","e9a5f41b.d8f4a8"]]},{"id":"f2a451a5.1cdb2","type":"function","z":"1105ebe7.67b8f4","name":"Count3","func":"if (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":280,"wires":[["beb7f429.188d88","d20ce5d6.df1818","36482eb6.afca12","e9a5f41b.d8f4a8"]]},{"id":"91cebb5b.ee1418","type":"function","z":"1105ebe7.67b8f4","name":"Count5","func":"if (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":400,"wires":[["36482eb6.afca12","e9a5f41b.d8f4a8"]]},{"id":"e7515908.8fb368","type":"function","z":"1105ebe7.67b8f4","name":"Count4","func":"if (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":320,"wires":[["d20ce5d6.df1818","36482eb6.afca12","e9a5f41b.d8f4a8"]]},{"id":"54180845.bb8ab8","type":"function","z":"1105ebe7.67b8f4","name":"Count6","func":"if (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":480,"wires":[["e9a5f41b.d8f4a8"]]},{"id":"55ace5ce.762d7c","type":"link out","z":"1105ebe7.67b8f4","name":"CountIU0","links":["7374e014.df3ae"],"x":795,"y":100,"wires":[]},{"id":"2d3f9c59.e9a294","type":"link out","z":"1105ebe7.67b8f4","name":"CountIU1","links":["e50799d4.630cc8"],"x":755,"y":140,"wires":[]},{"id":"87e39fff.59d0b","type":"link out","z":"1105ebe7.67b8f4","name":"CountIU2","links":["3742c784.e02de8"],"x":815,"y":200,"wires":[]},{"id":"beb7f429.188d88","type":"link out","z":"1105ebe7.67b8f4","name":"CountIU3","links":["c3a70224.00c3b"],"x":795,"y":280,"wires":[]},{"id":"d20ce5d6.df1818","type":"link out","z":"1105ebe7.67b8f4","name":"CountIU4","links":["192aebdc.857d84"],"x":795,"y":340,"wires":[]},{"id":"36482eb6.afca12","type":"link out","z":"1105ebe7.67b8f4","name":"CountIU5","links":["904c1695.f2d838"],"x":795,"y":400,"wires":[]},{"id":"e9a5f41b.d8f4a8","type":"link out","z":"1105ebe7.67b8f4","name":"CountIU6","links":["2f4e4b4d.2296d4"],"x":795,"y":460,"wires":[]},{"id":"47175732.aead48","type":"link in","z":"e050cb8f.af4728","name":"CountInUse","links":["f6ff49ec.e00e48","4ebb133c.f7319c"],"x":155,"y":380,"wires":[["3fe26923.615816","95c6e9da.d21088","55ebce00.484494","ee0479e.8b27288","82e4862a.4c2998","98e30d88.3871b","296f9867.a6ce38"]]},{"id":"3fe26923.615816","type":"function","z":"e050cb8f.af4728","name":"Count0","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":160,"wires":[["e70414c.e7a54e8","58b3bf00.0034f","ff046d53.906eb","ab40d21a.4363d","6b20347f.5e223c","a246e0c4.aa863","26e9a3df.f73e4c"]]},{"id":"95c6e9da.d21088","type":"function","z":"e050cb8f.af4728","name":"Count1","func":"if (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":220,"wires":[["58b3bf00.0034f","ff046d53.906eb","ab40d21a.4363d","6b20347f.5e223c","a246e0c4.aa863","26e9a3df.f73e4c"]]},{"id":"55ebce00.484494","type":"function","z":"e050cb8f.af4728","name":"Count2","func":"if (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":280,"wires":[["ff046d53.906eb","ab40d21a.4363d","6b20347f.5e223c","a246e0c4.aa863","26e9a3df.f73e4c"]]},{"id":"ee0479e.8b27288","type":"function","z":"e050cb8f.af4728","name":"Count3","func":"if (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":340,"wires":[["ab40d21a.4363d","6b20347f.5e223c","a246e0c4.aa863","26e9a3df.f73e4c"]]},{"id":"98e30d88.3871b","type":"function","z":"e050cb8f.af4728","name":"Count5","func":"if (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":460,"wires":[["a246e0c4.aa863","26e9a3df.f73e4c"]]},{"id":"82e4862a.4c2998","type":"function","z":"e050cb8f.af4728","name":"Count4","func":"if (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":380,"wires":[["6b20347f.5e223c","a246e0c4.aa863","26e9a3df.f73e4c"]]},{"id":"296f9867.a6ce38","type":"function","z":"e050cb8f.af4728","name":"Count6","func":"if (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":540,"wires":[["26e9a3df.f73e4c"]]},{"id":"e70414c.e7a54e8","type":"link out","z":"e050cb8f.af4728","name":"CountIU0","links":["ecbf2a54.a34138"],"x":735,"y":160,"wires":[]},{"id":"58b3bf00.0034f","type":"link out","z":"e050cb8f.af4728","name":"CountIU1","links":["80d4b97d.85e9c8"],"x":695,"y":200,"wires":[]},{"id":"ff046d53.906eb","type":"link out","z":"e050cb8f.af4728","name":"CountIU2","links":["5161227a.c3ad5c"],"x":755,"y":260,"wires":[]},{"id":"ab40d21a.4363d","type":"link out","z":"e050cb8f.af4728","name":"CountIU3","links":["2444fdec.bdd742"],"x":735,"y":340,"wires":[]},{"id":"6b20347f.5e223c","type":"link out","z":"e050cb8f.af4728","name":"CountIU4","links":["de1eb156.988a"],"x":735,"y":400,"wires":[]},{"id":"a246e0c4.aa863","type":"link out","z":"e050cb8f.af4728","name":"CountIU5","links":["e2d8d431.22f248"],"x":735,"y":460,"wires":[]},{"id":"26e9a3df.f73e4c","type":"link out","z":"e050cb8f.af4728","name":"CountIU6","links":["9b855f4e.eac38"],"x":735,"y":520,"wires":[]},{"id":"d37d114.2468cf","type":"link in","z":"c4ec86ba.085538","name":"CountInUse","links":["f6ff49ec.e00e48","4ebb133c.f7319c"],"x":255,"y":240,"wires":[["74fc16be.cfe718","ea2f8d27.debd5","825d9039.9a2c5","427f6854.d80338","eacd7122.c7511","39eb2bf4.597c04","327bfa0.fff1f06"]]},{"id":"74fc16be.cfe718","type":"function","z":"c4ec86ba.085538","name":"Count0","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":40,"wires":[["3953d4.a799ec2c","e5c3ddcd.d49c8","dcbfe872.ad6968","a8cbbd23.c65c6","6445c820.ff08f8","f8e68e68.d853d","a2722a7d.ffd288"]]},{"id":"ea2f8d27.debd5","type":"function","z":"c4ec86ba.085538","name":"Count1","func":"if (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":100,"wires":[["e5c3ddcd.d49c8","dcbfe872.ad6968","a8cbbd23.c65c6","6445c820.ff08f8","f8e68e68.d853d","a2722a7d.ffd288"]]},{"id":"825d9039.9a2c5","type":"function","z":"c4ec86ba.085538","name":"Count2","func":"if (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":160,"wires":[["dcbfe872.ad6968","a8cbbd23.c65c6","6445c820.ff08f8","f8e68e68.d853d","a2722a7d.ffd288"]]},{"id":"427f6854.d80338","type":"function","z":"c4ec86ba.085538","name":"Count3","func":"if (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":200,"wires":[["a8cbbd23.c65c6","6445c820.ff08f8","f8e68e68.d853d","a2722a7d.ffd288"]]},{"id":"39eb2bf4.597c04","type":"function","z":"c4ec86ba.085538","name":"Count5","func":"if (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":300,"wires":[["f8e68e68.d853d","a2722a7d.ffd288"]]},{"id":"eacd7122.c7511","type":"function","z":"c4ec86ba.085538","name":"Count4","func":"if (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":260,"wires":[["6445c820.ff08f8","f8e68e68.d853d","a2722a7d.ffd288"]]},{"id":"327bfa0.fff1f06","type":"function","z":"c4ec86ba.085538","name":"Count6","func":"if (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":380,"wires":[["a2722a7d.ffd288"]]},{"id":"3953d4.a799ec2c","type":"link out","z":"c4ec86ba.085538","name":"CountIU0","links":["d595e99b.f7f4f8"],"x":835,"y":20,"wires":[]},{"id":"e5c3ddcd.d49c8","type":"link out","z":"c4ec86ba.085538","name":"CountIU1","links":["7e001d1.59295e4"],"x":795,"y":60,"wires":[]},{"id":"dcbfe872.ad6968","type":"link out","z":"c4ec86ba.085538","name":"CountIU2","links":["85e55caf.9bd65"],"x":855,"y":120,"wires":[]},{"id":"a8cbbd23.c65c6","type":"link out","z":"c4ec86ba.085538","name":"CountIU3","links":["460c3988.cc3f68"],"x":835,"y":200,"wires":[]},{"id":"6445c820.ff08f8","type":"link out","z":"c4ec86ba.085538","name":"CountIU4","links":["79aa8b75.0d74d4"],"x":835,"y":260,"wires":[]},{"id":"f8e68e68.d853d","type":"link out","z":"c4ec86ba.085538","name":"CountIU5","links":["141f9a58.5e4f26"],"x":835,"y":320,"wires":[]},{"id":"a2722a7d.ffd288","type":"link out","z":"c4ec86ba.085538","name":"CountIU6","links":["d2e8d37e.e9003"],"x":835,"y":380,"wires":[]},{"id":"446eebe.a088a14","type":"link in","z":"815c8219.f9012","name":"","links":["a88872c8.b14f9"],"x":665,"y":1480,"wires":[["652558e1.6bd768"]]},{"id":"3c661e78.192ea2","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT BARCODE,ALTERNATE,GBTIP,LABEL,COLOR,QUANTITY FROM BLUADMIN.MULTIREGISTRY WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":220,"wires":[["6438eeb8.4573f"]]},{"id":"6438eeb8.4573f","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":630,"y":220,"wires":[["11256093.e6535f"]]},{"id":"11256093.e6535f","type":"switch","z":"20500362.dcae9c","name":"","property":"payload.BARCODE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":800,"y":220,"wires":[["f6f56545.7d6698"]]},{"id":"d9189958.314348","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT BARCODE,ALTERNATE,GBTIP,LABEL,COLOR,QUANTITY FROM BLUADMIN.MULTIREGISTRY WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":900,"wires":[["2bef27c8.798518"]]},{"id":"1f6d08e6.5bc057","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT BARCODE,ALTERNATE,GBTIP,LABEL,COLOR,QUANTITY FROM BLUADMIN.MULTIREGISTRY WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":1440,"wires":[["104e9c93.2820c3"]]},{"id":"946f90c4.c1cac","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT BARCODE,ALTERNATE,GBTIP,LABEL,COLOR,QUANTITY FROM BLUADMIN.MULTIREGISTRY WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1980,"wires":[["8039aec8.b7f6b"]]},{"id":"98ca8b01.808f18","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT BARCODE,ALTERNATE,GBTIP,LABEL,COLOR,QUANTITY FROM BLUADMIN.MULTIREGISTRY WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":2500,"wires":[["d8059bb1.892608"]]},{"id":"2ab0db8c.5639e4","type":"function","z":"20500362.dcae9c","name":"","func":"let query = \"SELECT BARCODE,ALTERNATE,GBTIP,LABEL,COLOR,QUANTITY FROM BLUADMIN.MULTIREGISTRY WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":3000,"wires":[["460ee8b8.50ef88"]]},{"id":"f6f56545.7d6698","type":"link out","z":"20500362.dcae9c","name":"MULTIREGISTRY1","links":["f6e4ab34.8f50f8"],"x":1025,"y":200,"wires":[]},{"id":"f6e4ab34.8f50f8","type":"link in","z":"d929b1c6.8d226","name":"","links":["3b61bac7.747706","9a52e2ce.5470a","32b87ee0.e66a12","ce1d838f.ba691","f6f56545.7d6698","79d5743c.f76e5c"],"x":155,"y":80,"wires":[["6eaebede.10327","eabbf94c.049db8"]]},{"id":"6eaebede.10327","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload.ALTERNATE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":140,"wires":[["54059199.4b8b"]]},{"id":"54059199.4b8b","type":"function","z":"d929b1c6.8d226","name":"Build URL","func":"\nvar barcode = msg.payload;\nmsg.url = \"https://api.barcodelookup.com/v2/products?barcode=\" + barcode + \"&key=4eoewe63dsk23wcl2y4j27f9nijlu4\";\nmsg.method = \"GET\";\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":140,"wires":[["e5a5f9be.37f178"]]},{"id":"e5a5f9be.37f178","type":"http request","z":"d929b1c6.8d226","name":"","method":"GET","ret":"txt","paytoqs":"body","url":"","tls":"","persist":false,"proxy":"","authType":"","x":610,"y":180,"wires":[["4999fff1.2a047"]]},{"id":"4999fff1.2a047","type":"json","z":"d929b1c6.8d226","name":"","property":"payload","action":"","pretty":false,"x":690,"y":120,"wires":[["7453bbb1.6b8424"]]},{"id":"7453bbb1.6b8424","type":"function","z":"d929b1c6.8d226","name":"","func":"\nmsg.payload = {\n    \"BARCODE\": msg.payload.products[0].barcode_number,\n    \"NAME\": msg.payload.products[0].product_name,\n    \"IMAGE\": msg.payload.products[0].images[0]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":80,"wires":[["2ed427e8.e5d848","f482eec.2da8a1"]]},{"id":"ae8da726.e16d88","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"QUANTITY\": msg.payload.QUANTITY,\n    \"TIP\": msg.payload.GBTIP,\n    \"COLOR\": msg.payload.COLOR,\n    \"LABEL\": msg.payload.LABEL,\n    \"RECEIPTID\": msg.payload.RECEIPTID\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":360,"wires":[["c6b17540.42f2d8"]]},{"id":"2ed427e8.e5d848","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1040,"y":140,"wires":[]},{"id":"619855c4.2191fc","type":"link in","z":"d929b1c6.8d226","name":"MULTIRECEIPTID","links":["12f92734.a2a2f9"],"x":85,"y":240,"wires":[["eabbf94c.049db8"]]},{"id":"eabbf94c.049db8","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":250,"y":240,"wires":[["ae8da726.e16d88","744cb318.a7d5cc"]]},{"id":"12f92734.a2a2f9","type":"link out","z":"54c70365.d5e51c","name":"RECEIPTID0","links":["619855c4.2191fc"],"x":1015,"y":560,"wires":[]},{"id":"744cb318.a7d5cc","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1130,"y":400,"wires":[]},{"id":"c6b17540.42f2d8","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"10","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1450,"y":260,"wires":[["3768b70b.f2e778","744cb318.a7d5cc"]]},{"id":"3768b70b.f2e778","type":"Db2 out","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"GBMULTIINUSE","name":"","x":1340,"y":400,"wires":[]},{"id":"88f6bcf2.d515f","type":"inject","z":"d929b1c6.8d226","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":440,"wires":[["a9a003eb.b7d3e"]]},{"id":"d4e628d7.1c1358","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":450,"y":440,"wires":[["a6f31195.16ecd","f678a2f8.c099a","5eb0b5b6.990a9c","7b0ed2fa.9cb98c","beaf5984.0ee858","f2588846.c509e8"]]},{"id":"a9a003eb.b7d3e","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBMULTIINUSE ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":440,"wires":[["d4e628d7.1c1358"]]},{"id":"7f694a92.ee7614","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"4e474f75.53de9","client":"","x":1280,"y":560,"wires":[]},{"id":"5a712976.74ebb8","type":"function","z":"d929b1c6.8d226","name":"","func":"\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"QUANTITY\": msg.payload.QUANTITY,\n    \"COLOR\": msg.payload.COLOR\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":440,"wires":[["4d040ad0.ebf344"]]},{"id":"4d040ad0.ebf344","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":890,"y":460,"wires":[["d5897f86.23259"]]},{"id":"d5897f86.23259","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1170,"y":460,"wires":[["4a40a1d.e11646"]]},{"id":"266d337e.99a77c","type":"link out","z":"e1413e6b.06f05","name":"barcodemultiscan","links":["dbd80e50.9c9e9"],"x":65,"y":120,"wires":[]},{"id":"dbd80e50.9c9e9","type":"link in","z":"d929b1c6.8d226","name":"","links":["266d337e.99a77c"],"x":295,"y":1980,"wires":[["847f2dc3.3846b"]]},{"id":"b2c34c99.baa56","type":"comment","z":"d929b1c6.8d226","name":"Interval","info":"","x":150,"y":400,"wires":[]},{"id":"985f5689.25e668","type":"inject","z":"d929b1c6.8d226","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":840,"wires":[["7382a60c.0900b8"]]},{"id":"ee638a14.d31558","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":150,"y":1080,"wires":[["be2548be.974178","34396db1.cec142","129c34ff.071e9b","fc660690.083f28","e199e18d.30134","aafd69ad.5f1498"]]},{"id":"7382a60c.0900b8","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBMULTIVIRTUAL ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":200,"y":900,"wires":[["ee638a14.d31558"]]},{"id":"f3560532.0f6c28","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload.TIP;\nvar name = msg.payload.NAME;\nmsg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"NAME\": name.slice(0,40),\n    \"IMAGE\": msg.payload.IMAGE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"QUANTITY\": msg.payload.QUANTITY,\n    \"TIP\": a.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":960,"wires":[["860ea2d9.943c9"]]},{"id":"860ea2d9.943c9","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":710,"y":960,"wires":[["52adea95.39b644"]]},{"id":"52adea95.39b644","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":960,"wires":[["e0f6e3f4.2d562"]]},{"id":"5cc706f4.c5f038","type":"comment","z":"d929b1c6.8d226","name":"Interval","info":"","x":150,"y":800,"wires":[]},{"id":"a7c62829.2c5418","type":"dashDB in","z":"80f24fcb.041b1","dashDB":"b82a355c.28aca8","service":"_ext_","query":"","params":"","name":"","x":490,"y":380,"wires":[[]]},{"id":"3ef931c8.0f319e","type":"link in","z":"f19c6149.45ec9","name":"","links":["d9370737.5bfb18"],"x":115,"y":120,"wires":[["3632e744.d3d5b8"]]},{"id":"3632e744.d3d5b8","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = {\n    \"LOCATION\": msg.payload.LOCATION,\n    \"DATE\": msg.payload.DATE,\n    \"RECEIPTID\": msg.payload.RECEIPTID\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":260,"wires":[["8d7e82d3.0ec53"]]},{"id":"f64904.e43c47","type":"Db2 out","z":"f19c6149.45ec9","Db2":"dbf72238.b6841","service":"_ext_","table":"GBRECEIPTS","name":"","x":810,"y":380,"wires":[]},{"id":"12fd078d.7fabd8","type":"link in","z":"f19c6149.45ec9","name":"RECEIPTINUSECOUNT","links":["29439a8a.f1dfd6","f3392852.abf2c8","8fe1ac3c.6c879"],"x":175,"y":100,"wires":[["24f6ee02.f01e62"]]},{"id":"24f6ee02.f01e62","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = {\n    \"STATUS\": \"In Progress\",\n    \"INUSE\": msg.payload[\"1\"]\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":140,"wires":[["8d7e82d3.0ec53"]]},{"id":"8d7e82d3.0ec53","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"7","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":560,"y":300,"wires":[["896065ac.aa32c8","f64904.e43c47"]]},{"id":"896065ac.aa32c8","type":"debug","z":"f19c6149.45ec9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":800,"y":300,"wires":[]},{"id":"9d833b73.4497f8","type":"function","z":"f19c6149.45ec9","name":"","func":"let query = \"UPDATE BLUADMIN.GBRECEIPTS SET INUSE = '\";\nquery += msg.payload.inuse;\nquery += \"' WHERE RECEIPTID = '\"\nquery += msg.payload.receiptid;\nquery += \"';\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":1040,"wires":[["35dfff40.f3f5d"]]},{"id":"ebe72d0a.d8a1f","type":"inject","z":"f19c6149.45ec9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":330,"y":560,"wires":[["d9932a65.1cd7a8"]]},{"id":"c37ecb57.20faf8","type":"function","z":"f19c6149.45ec9","name":"","func":"var a = msg.payload.array.RECEIPTID;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":740,"wires":[["d9932a65.1cd7a8","440fbeac.66259"]]},{"id":"d2321af9.c514d8","type":"Db2 in","z":"f19c6149.45ec9","Db2":"dbf72238.b6841","service":"_ext_","query":"","params":"","name":"","x":590,"y":820,"wires":[["60f2256.50bb2dc","d7642ddc.32a6d"]]},{"id":"d9932a65.1cd7a8","type":"function","z":"f19c6149.45ec9","name":"","func":"let query = \"SELECT COUNT(BARCODE) FROM BLUADMIN.GBINUSE WHERE RECEIPTID = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":600,"wires":[["d2321af9.c514d8"]]},{"id":"3d98c695.1a272a","type":"debug","z":"f19c6149.45ec9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1290,"y":640,"wires":[]},{"id":"d7642ddc.32a6d","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = msg.payload[\"1\"];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":820,"wires":[["60f2256.50bb2dc","127c7daa.010ed2","bb48918f.dc261"]]},{"id":"35dfff40.f3f5d","type":"Db2 in","z":"f19c6149.45ec9","Db2":"dbf72238.b6841","service":"_ext_","query":"","params":"","name":"","x":1010,"y":800,"wires":[["3d98c695.1a272a"]]},{"id":"60f2256.50bb2dc","type":"debug","z":"f19c6149.45ec9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":620,"y":680,"wires":[]},{"id":"33e78842.b38758","type":"link in","z":"f19c6149.45ec9","name":"UPDATERECEIPTCOUNT","links":["9b8c47dc.760138"],"x":85,"y":740,"wires":[["60f2256.50bb2dc","827d4d3c.78a92"]]},{"id":"827d4d3c.78a92","type":"delay","z":"f19c6149.45ec9","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":170,"y":780,"wires":[["e97157bd.4755b8","ff946ec4.ce0c4"]]},{"id":"127c7daa.010ed2","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = {\n    \"inuse\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":960,"wires":[["bd0563cc.42a69"]]},{"id":"bd0563cc.42a69","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":1040,"wires":[["9d833b73.4497f8"]]},{"id":"e97157bd.4755b8","type":"switch","z":"f19c6149.45ec9","name":"","property":"payload.array[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":110,"y":1000,"wires":[["924f98c2.2c4228"]]},{"id":"ff946ec4.ce0c4","type":"switch","z":"f19c6149.45ec9","name":"","property":"payload.array.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":110,"y":860,"wires":[["c37ecb57.20faf8"]]},{"id":"924f98c2.2c4228","type":"function","z":"f19c6149.45ec9","name":"","func":"var a = msg.payload.array[0].RECEIPTID;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":960,"wires":[["d9932a65.1cd7a8","440fbeac.66259"]]},{"id":"72296cf.9f31794","type":"inject","z":"f19c6149.45ec9","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":130,"y":1260,"wires":[["dabdee98.1866b"]]},{"id":"dabdee98.1866b","type":"function","z":"f19c6149.45ec9","name":"","func":"let query = \"SELECT DATE,LOCATION,RECEIPTID,STATUS,INUSE FROM BLUADMIN.GBRECEIPTS ORDER BY DATE;\"\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":180,"y":1320,"wires":[["a5dc7d68.08d56"]]},{"id":"a5dc7d68.08d56","type":"Db2 in","z":"f19c6149.45ec9","Db2":"dbf72238.b6841","service":"_ext_","query":"","params":"","name":"","x":190,"y":1780,"wires":[["e3995ccd.9e5d1","40b80cf.92bd3f4","d01dec27.af2a8","8ae3a838.1a2098","f9c17f9.fa4ce8","95d81172.8e716","458f8a82.e94a34","b52a9c39.92d06","ecd25130.0b42d","23079d81.48f902","55aeca77.010aa4","4c4255f4.80222c"]]},{"id":"690b9bf2.3cdab4","type":"function","z":"f19c6149.45ec9","name":"","func":"if (msg.payload.RECEIPTCHECK == \"0\"){\n    msg.payload.RECEIPTCHECK = \"Ok\"\n}\n\nelse {\n   msg.payload.RECEIPTCHECK = null\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":60,"wires":[["8d7e82d3.0ec53"]]},{"id":"d3b60cf9.6c2eb","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = {\n    \"RECEIPTCHECK\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":40,"wires":[["690b9bf2.3cdab4"]]},{"id":"2c9a78.41ecb588","type":"link in","z":"f19c6149.45ec9","name":"","links":["f846d967.a8d3b8"],"x":115,"y":40,"wires":[["d3b60cf9.6c2eb","896065ac.aa32c8"]]},{"id":"e1b6fa12.39e138","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"31723faa.3a13e","client":"","x":970,"y":1400,"wires":[]},{"id":"c3545561.e5ae98","type":"function","z":"f19c6149.45ec9","name":"RECEIPT0","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[0].DATE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"LOCATION\": msg.payload[0].LOCATION,\n    \"INUSE\": msg.payload[0].INUSE\n\n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":1400,"wires":[["c15dfc1f.3fd09"]]},{"id":"c15dfc1f.3fd09","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":630,"y":1400,"wires":[["ba6a5371.0d8c2"]]},{"id":"ba6a5371.0d8c2","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":770,"y":1400,"wires":[["e1b6fa12.39e138"]]},{"id":"4a24c262.dc7cac","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"bb8af107.e3eb3","client":"","x":970,"y":1540,"wires":[]},{"id":"aeb296f6.6afa58","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"18f62d1e.0d9583","client":"","x":1010,"y":1620,"wires":[]},{"id":"d5b1c5f2.6e31c8","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"f87c0593.bd1f68","client":"","x":1010,"y":1700,"wires":[]},{"id":"b73add98.bc2b7","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"d4344c82.d9c9","client":"","x":1030,"y":1820,"wires":[]},{"id":"5a7b0cf.538bdf4","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"d38cd4aa.64dc48","client":"","x":1030,"y":1940,"wires":[]},{"id":"fbc22e92.c272e","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"a30502c5.1d4a","client":"","x":1010,"y":2060,"wires":[]},{"id":"7333fd.2d321c04","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"30878d18.c99672","client":"","x":1030,"y":2180,"wires":[]},{"id":"4b5a6362.8aad3c","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"77bc73fa.2488ec","client":"","x":1050,"y":2300,"wires":[]},{"id":"e3995ccd.9e5d1","type":"function","z":"f19c6149.45ec9","name":"RECEIPT1","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[1].DATE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"LOCATION\": msg.payload[1].LOCATION,\n    \"INUSE\": msg.payload[1].INUSE\n   \n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":1540,"wires":[["7ccd664b.ad6da8"]]},{"id":"7ccd664b.ad6da8","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":660,"y":1540,"wires":[["4c0ef3a7.68fe2c"]]},{"id":"4c0ef3a7.68fe2c","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":800,"y":1540,"wires":[["4a24c262.dc7cac"]]},{"id":"40b80cf.92bd3f4","type":"function","z":"f19c6149.45ec9","name":"RECEIPT2","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[2].DATE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"LOCATION\": msg.payload[2].LOCATION,\n    \"INUSE\": msg.payload[2].INUSE\n   \n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":1620,"wires":[["1d608873.964618"]]},{"id":"1d608873.964618","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":630,"y":1620,"wires":[["dec2a18f.74886"]]},{"id":"dec2a18f.74886","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":790,"y":1620,"wires":[["aeb296f6.6afa58"]]},{"id":"d01dec27.af2a8","type":"function","z":"f19c6149.45ec9","name":"RECEIPT3","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[3].DATE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"LOCATION\": msg.payload[3].LOCATION,\n    \"INUSE\": msg.payload[3].INUSE\n\n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":1700,"wires":[["1a7c0a2a.2c05a6"]]},{"id":"1a7c0a2a.2c05a6","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":650,"y":1700,"wires":[["8b4d6882.ce8a08"]]},{"id":"8b4d6882.ce8a08","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":810,"y":1700,"wires":[["d5b1c5f2.6e31c8"]]},{"id":"8ae3a838.1a2098","type":"function","z":"f19c6149.45ec9","name":"RECEIPT4","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[4].DATE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"LOCATION\": msg.payload[4].LOCATION,\n    \"INUSE\": msg.payload[4].INUSE\n\n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":1820,"wires":[["6824ccd3.abf454"]]},{"id":"6824ccd3.abf454","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":670,"y":1820,"wires":[["1dd525ff.068b9a"]]},{"id":"1dd525ff.068b9a","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":1820,"wires":[["b73add98.bc2b7"]]},{"id":"f9c17f9.fa4ce8","type":"function","z":"f19c6149.45ec9","name":"RECEIPT5","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[5].DATE,\n    \"RECEIPTID\": msg.payload[5].RECEIPTID,\n    \"LOCATION\": msg.payload[5].LOCATION,\n    \"INUSE\": msg.payload[5].INUSE\n   \n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":1940,"wires":[["129d5be8.8669a4"]]},{"id":"129d5be8.8669a4","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":650,"y":1940,"wires":[["3e577847.6e1e38"]]},{"id":"3e577847.6e1e38","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":810,"y":1940,"wires":[["5a7b0cf.538bdf4"]]},{"id":"95d81172.8e716","type":"function","z":"f19c6149.45ec9","name":"RECEIPT6","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[6].DATE,\n    \"RECEIPTID\": msg.payload[6].RECEIPTID,\n    \"LOCATION\": msg.payload[6].LOCATION,\n    \"INUSE\": msg.payload[6].INUSE\n   \n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":490,"y":2060,"wires":[["29455506.6b8e4a"]]},{"id":"29455506.6b8e4a","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":670,"y":2060,"wires":[["2dddb123.53786e"]]},{"id":"2dddb123.53786e","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":2060,"wires":[["fbc22e92.c272e"]]},{"id":"458f8a82.e94a34","type":"function","z":"f19c6149.45ec9","name":"RECEIPT7","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[7].DATE,\n    \"RECEIPTID\": msg.payload[7].RECEIPTID,\n    \"LOCATION\": msg.payload[7].LOCATION,\n    \"INUSE\": msg.payload[7].INUSE\n \n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":2180,"wires":[["ca829dc9.c3f4"]]},{"id":"ca829dc9.c3f4","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":650,"y":2180,"wires":[["630ba8aa.d2acb8"]]},{"id":"630ba8aa.d2acb8","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":810,"y":2180,"wires":[["7333fd.2d321c04"]]},{"id":"b52a9c39.92d06","type":"function","z":"f19c6149.45ec9","name":"RECEIPT8","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[8].DATE,\n    \"RECEIPTID\": msg.payload[8].RECEIPTID,\n    \"LOCATION\": msg.payload[8].LOCATION,\n    \"INUSE\": msg.payload[8].INUSE\n\n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":2300,"wires":[["cbbdc63b.6d7558"]]},{"id":"cbbdc63b.6d7558","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":690,"y":2300,"wires":[["cd45e767.d7be48"]]},{"id":"cd45e767.d7be48","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":2300,"wires":[["4b5a6362.8aad3c"]]},{"id":"ecd25130.0b42d","type":"function","z":"f19c6149.45ec9","name":"RECEIPT9","func":"msg.payload = {\n    \n    \"DATE\": msg.payload[9].DATE,\n    \"RECEIPTID\": msg.payload[9].RECEIPTID,\n    \"LOCATION\": msg.payload[9].LOCATION,\n    \"INUSE\": msg.payload[9].INUSE\n   \n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":2400,"wires":[["7266d468.eca1ec"]]},{"id":"7266d468.eca1ec","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":710,"y":2400,"wires":[["8a219e29.a086b"]]},{"id":"8a219e29.a086b","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":2400,"wires":[["1397c5d8.8e4f5a"]]},{"id":"1397c5d8.8e4f5a","type":"websocket out","z":"f19c6149.45ec9","name":"","server":"269314df.2cb66c","client":"","x":1050,"y":2380,"wires":[]},{"id":"a821ae4d.e60d1","type":"comment","z":"f19c6149.45ec9","name":"Interval","info":"","x":120,"y":1200,"wires":[]},{"id":"23079d81.48f902","type":"switch","z":"f19c6149.45ec9","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":1480,"wires":[["c3545561.e5ae98"]]},{"id":"55aeca77.010aa4","type":"switch","z":"f19c6149.45ec9","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":440,"y":1320,"wires":[["2ab84e9.03252b2"]]},{"id":"2ab84e9.03252b2","type":"function","z":"f19c6149.45ec9","name":"RECEIPT0","func":"msg.payload = {\n    \n    \"DATE\": msg.payload.DATE,\n    \"RECEIPTID\": msg.payload.RECEIPTID,\n    \"LOCATION\": msg.payload.LOCATION,\n    \"INUSE\": msg.payload.INUSE\n\n    \n}\n\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":610,"y":1280,"wires":[["8806cbf9.a46f08"]]},{"id":"8806cbf9.a46f08","type":"split","z":"f19c6149.45ec9","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":790,"y":1280,"wires":[["59df6eb3.90bf7"]]},{"id":"59df6eb3.90bf7","type":"join","z":"f19c6149.45ec9","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":910,"y":1280,"wires":[["e1b6fa12.39e138"]]},{"id":"d4ba9840.ae2ee8","type":"debug","z":"f19c6149.45ec9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1210,"y":820,"wires":[]},{"id":"c74f6ad6.d353f8","type":"debug","z":"f19c6149.45ec9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1440,"y":1040,"wires":[]},{"id":"b0796657.735118","type":"function","z":"c37a9a5d.cc60e8","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.TIPJAR\";\n\nmsg.payload = query;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":100,"wires":[["3c5ea494.69e2bc"]]},{"id":"3c5ea494.69e2bc","type":"dashDB in","z":"c37a9a5d.cc60e8","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":540,"y":220,"wires":[["b51c6da8.032b1","8f5c2a6e.090988","af10a50f.55a578"]]},{"id":"b31724b3.97ac08","type":"websocket out","z":"c37a9a5d.cc60e8","name":"","server":"18d56746.fc9019","client":"","x":790,"y":640,"wires":[]},{"id":"aea934c7.3577b8","type":"function","z":"c37a9a5d.cc60e8","name":"","func":"var a = msg.payload[\"1\"];\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":300,"wires":[["7f03624a.60506c","daec78a8.d0a028"]]},{"id":"a25c486b.7156d8","type":"http in","z":"c37a9a5d.cc60e8","name":"","url":"/clicked","method":"post","upload":false,"swaggerDoc":"","x":70,"y":100,"wires":[["65eaf91e.b7db58","6246290f.76ac88"]]},{"id":"65eaf91e.b7db58","type":"function","z":"c37a9a5d.cc60e8","name":"","func":"let query = \"DELETE FROM BLUADMIN.TIPJAR\";\n\nmsg.payload = query;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":440,"wires":[["3c5ea494.69e2bc"]]},{"id":"971ff684.ca0368","type":"inject","z":"c37a9a5d.cc60e8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":300,"y":180,"wires":[["b0796657.735118"]]},{"id":"6bd43b46.fb0c04","type":"comment","z":"c37a9a5d.cc60e8","name":"Interval","info":"","x":290,"y":120,"wires":[]},{"id":"6246290f.76ac88","type":"delay","z":"c37a9a5d.cc60e8","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":80,"wires":[["b0796657.735118","c24c5f3.b7cefa"]]},{"id":"c24c5f3.b7cefa","type":"link out","z":"c37a9a5d.cc60e8","name":"virtualtipclear","links":["6484cfb0.4286b"],"x":465,"y":40,"wires":[]},{"id":"97282d9a.bde09","type":"websocket out","z":"11f2b679.72250a","name":"","server":"141ec8e1.afffd7","client":"","x":1140,"y":1980,"wires":[]},{"id":"a37b9871.7c0ec8","type":"split","z":"11f2b679.72250a","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":570,"y":1940,"wires":[["480e06ef.d70098"]]},{"id":"480e06ef.d70098","type":"join","z":"11f2b679.72250a","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"1","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":1980,"wires":[["97282d9a.bde09","fdeae7b2.d8c928"]]},{"id":"8023dbf1.1d6b78","type":"function","z":"80f24fcb.041b1","name":"","func":"let query = \"DELETE FROM BLUADMIN.GREEN WHERE RECEIPTID = 19524;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":240,"y":300,"wires":[[]]},{"id":"4c4255f4.80222c","type":"debug","z":"f19c6149.45ec9","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":240,"y":1680,"wires":[]},{"id":"79d5743c.f76e5c","type":"link out","z":"20500362.dcae9c","name":"MULTIREGISTRY6","links":["f6e4ab34.8f50f8"],"x":845,"y":3060,"wires":[]},{"id":"21e30e9b.9834c2","type":"switch","z":"20500362.dcae9c","name":"","property":"payload.BARCODE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":3000,"wires":[["79d5743c.f76e5c"]]},{"id":"460ee8b8.50ef88","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":450,"y":3000,"wires":[["21e30e9b.9834c2"]]},{"id":"3b61bac7.747706","type":"link out","z":"20500362.dcae9c","name":"MULTIREGISTRY5","links":["f6e4ab34.8f50f8"],"x":785,"y":2540,"wires":[]},{"id":"377542f0.3d6ece","type":"switch","z":"20500362.dcae9c","name":"","property":"payload.BARCODE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":660,"y":2500,"wires":[["3b61bac7.747706"]]},{"id":"d8059bb1.892608","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":450,"y":2500,"wires":[["377542f0.3d6ece"]]},{"id":"32b87ee0.e66a12","type":"link out","z":"20500362.dcae9c","name":"MULTIREGISTRY4","links":["f6e4ab34.8f50f8"],"x":785,"y":2020,"wires":[]},{"id":"987f8518.bae2a8","type":"switch","z":"20500362.dcae9c","name":"","property":"payload.BARCODE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1980,"wires":[["32b87ee0.e66a12"]]},{"id":"8039aec8.b7f6b","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":490,"y":1980,"wires":[["987f8518.bae2a8"]]},{"id":"ce1d838f.ba691","type":"link out","z":"20500362.dcae9c","name":"MULTIREGISTRY3","links":["f6e4ab34.8f50f8"],"x":845,"y":1440,"wires":[]},{"id":"704a540a.b5487c","type":"switch","z":"20500362.dcae9c","name":"","property":"payload.BARCODE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":720,"y":1440,"wires":[["ce1d838f.ba691"]]},{"id":"104e9c93.2820c3","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":510,"y":1440,"wires":[["704a540a.b5487c"]]},{"id":"9a52e2ce.5470a","type":"link out","z":"20500362.dcae9c","name":"MULTIREGISTRY2","links":["f6e4ab34.8f50f8"],"x":925,"y":940,"wires":[]},{"id":"463f8f6a.4a517","type":"switch","z":"20500362.dcae9c","name":"","property":"payload.BARCODE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":780,"y":900,"wires":[["9a52e2ce.5470a"]]},{"id":"2bef27c8.798518","type":"Db2 in","z":"20500362.dcae9c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":570,"y":900,"wires":[["463f8f6a.4a517"]]},{"id":"f482eec.2da8a1","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n    \"NAME\": msg.payload.NAME,\n    \"IMAGE\": msg.payload.IMAGE,\n    \"BARCODE\": msg.payload.BARCODE\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":180,"wires":[["c6b17540.42f2d8"]]},{"id":"847f2dc3.3846b","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":2380,"wires":[["5043ad2.f14e754","740b6f6f.bdcd4","92dd305b.fa2ea","83d1557b.2bc038"]]},{"id":"5043ad2.f14e754","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBMULTIINUSE WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":2240,"wires":[["7e247015.48a17"]]},{"id":"7e247015.48a17","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":910,"y":2260,"wires":[["3b7d9bfe.37f544","94879ac3.3e3298","1f8166e.150f199","5313cd13.cd01c4","e4cb7bc.7c47988","24b6b367.e3fcac","3e9bf694.82e9ca","57ebb185.3f23d","5d62a936.d7f678"]]},{"id":"3b7d9bfe.37f544","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload.QUANTITY == \"1\") {\n  msg.payload = msg.payload.BARCODE\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":1980,"wires":[["faa12d0b.e6088"]]},{"id":"faa12d0b.e6088","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBMULTIINUSE WHERE BARCODE = \";\nquery += msg.payload;\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1300,"y":1980,"wires":[["a248fef6.07dfb"]]},{"id":"a248fef6.07dfb","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1370,"y":2040,"wires":[["6c6afa97.1ee754"]]},{"id":"6c6afa97.1ee754","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1520,"y":2000,"wires":[]},{"id":"94879ac3.3e3298","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = msg.payload.QUANTITY;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2140,"wires":[["190f6a42.c38946"]]},{"id":"497399a8.90b5f8","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIINUSE SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1760,"y":2140,"wires":[["99a7fb8d.a0e548"]]},{"id":"1f8166e.150f199","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n    \"BARCODE\": msg.payload.BARCODE\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2100,"wires":[["24ec8aa6.541776","b20016f7.463c98","63f9b9c5.2e8ff8","9f89582.a8f05a8","f0e99975.e9df78"]]},{"id":"190f6a42.c38946","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload == \"2\") {\n  msg.payload = \"1\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":2140,"wires":[["7885757b.ec247c"]]},{"id":"7885757b.ec247c","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":2140,"wires":[["24ec8aa6.541776"]]},{"id":"24ec8aa6.541776","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1590,"y":2140,"wires":[["763429d2.d12c78","497399a8.90b5f8"]]},{"id":"763429d2.d12c78","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1740,"y":1980,"wires":[]},{"id":"766afa39.c30074","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2070,"y":2140,"wires":[]},{"id":"5313cd13.cd01c4","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = msg.payload.QUANTITY;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1200,"y":2240,"wires":[["312a6e79.490cb2"]]},{"id":"5e04be65.63f4","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIINUSE SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1820,"y":2240,"wires":[["435befe1.76d4e"]]},{"id":"312a6e79.490cb2","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload == \"3\") {\n  msg.payload = \"2\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1340,"y":2240,"wires":[["9f246d1f.1dcce"]]},{"id":"9f246d1f.1dcce","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":2240,"wires":[["b20016f7.463c98"]]},{"id":"b20016f7.463c98","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1650,"y":2240,"wires":[["5e04be65.63f4"]]},{"id":"e4cb7bc.7c47988","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = msg.payload.QUANTITY;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2320,"wires":[["70abdbb1.bcccb4"]]},{"id":"a6718477.c3fea8","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIINUSE SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1760,"y":2320,"wires":[["a327b57f.b13918"]]},{"id":"70abdbb1.bcccb4","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload == \"4\") {\n  msg.payload = \"3\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":2320,"wires":[["f11b664f.918a88"]]},{"id":"f11b664f.918a88","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":2320,"wires":[["63f9b9c5.2e8ff8"]]},{"id":"63f9b9c5.2e8ff8","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1590,"y":2320,"wires":[["a6718477.c3fea8"]]},{"id":"ad8733ed.064a","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIINUSE SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1760,"y":2380,"wires":[["d7f2566f.450768"]]},{"id":"57ebb185.3f23d","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload == \"5\") {\n    msg.payload = \"4\"\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":2400,"wires":[["9eca34c9.aeccc8"]]},{"id":"9eca34c9.aeccc8","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":2380,"wires":[["9f89582.a8f05a8"]]},{"id":"9f89582.a8f05a8","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1590,"y":2380,"wires":[["ad8733ed.064a"]]},{"id":"24b6b367.e3fcac","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = msg.payload.QUANTITY;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":2460,"wires":[["18647bec.5d6ab4"]]},{"id":"c96859c8.836aa8","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIINUSE SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1740,"y":2460,"wires":[["19b4ccdb.a87653"]]},{"id":"18647bec.5d6ab4","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload == \"6\") {\n  msg.payload = \"5\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":2460,"wires":[["5260a307.87729c"]]},{"id":"5260a307.87729c","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n    \"QUANTITY\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1420,"y":2460,"wires":[["f0e99975.e9df78"]]},{"id":"f0e99975.e9df78","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1570,"y":2460,"wires":[["c96859c8.836aa8","2e7d21b0.af8a4e"]]},{"id":"99a7fb8d.a0e548","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1920,"y":2100,"wires":[["766afa39.c30074"]]},{"id":"435befe1.76d4e","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1950,"y":2240,"wires":[["766afa39.c30074"]]},{"id":"a327b57f.b13918","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1930,"y":2300,"wires":[["766afa39.c30074"]]},{"id":"d7f2566f.450768","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1930,"y":2380,"wires":[["766afa39.c30074"]]},{"id":"19b4ccdb.a87653","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1930,"y":2440,"wires":[["766afa39.c30074","b751f9ee.8dd9a8"]]},{"id":"740b6f6f.bdcd4","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"SELECT QUANTITY,BARCODE FROM BLUADMIN.GBMULTIVIRTUAL WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":2700,"wires":[["ceee65f3.b3d338"]]},{"id":"ceee65f3.b3d338","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":970,"y":2720,"wires":[["6cab8028.eaa48","35ff203d.b118","74eb6aab.505974","438a0e8e.2a1d5","86579091.1d051","3c902dcd.52a792","f5d773c1.64eee"]]},{"id":"4a6b70de.f65c5","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload[\"1\"] == \"0\") {\n    msg.payload = \"1\"\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2640,"wires":[["5cee1004.b0d5f"]]},{"id":"92dd305b.fa2ea","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n \"BARCODE\": msg.payload,\n \"DATE\": new Date().toLocaleDateString()\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":2500,"wires":[["17f3307c.60668","25d87b08.70b0e4"]]},{"id":"9aee9a.ae8f1168","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"SELECT * FROM BLUADMIN.GBMULTIINUSE WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":2640,"wires":[["64459e6d.2dbb"]]},{"id":"5cee1004.b0d5f","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n \"QUANTITY\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":2640,"wires":[["25d87b08.70b0e4"]]},{"id":"64459e6d.2dbb","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1650,"y":2640,"wires":[["857678a2.831a28"]]},{"id":"857678a2.831a28","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"NAME\": msg.payload.NAME,\n  \"IMAGE\": msg.payload.IMAGE,\n  \"TIP\": msg.payload.TIP,\n  \"RECEIPTID\": msg.payload.RECEIPTID,\n  \"COLOR\": msg.payload.COLOR,\n  \"LABEL\": msg.payload.LABEL\n \n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1830,"y":2640,"wires":[["25d87b08.70b0e4"]]},{"id":"25d87b08.70b0e4","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"9","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1770,"y":2540,"wires":[["7b13fd94.0309f4","592f0a25.54bd04"]]},{"id":"7b13fd94.0309f4","type":"Db2 out","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"GBMULTIVIRTUAL","name":"","x":2150,"y":2660,"wires":[]},{"id":"6cab8028.eaa48","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload.QUANTITY == \"1\") {\n  msg.payload.QUANTITY = \"2\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1260,"y":2780,"wires":[["177d68d7.7f2507"]]},{"id":"f807dd3b.06643","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIVIRTUAL SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1900,"y":2780,"wires":[["9bda4c9a.53b84"]]},{"id":"177d68d7.7f2507","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload.QUANTITY\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":2780,"wires":[["c05086a6.78a9e8"]]},{"id":"c05086a6.78a9e8","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1730,"y":2780,"wires":[["f807dd3b.06643"]]},{"id":"9bda4c9a.53b84","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":2050,"y":2780,"wires":[["2c46efce.8c947"]]},{"id":"35ff203d.b118","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = msg.payload.BARCODE;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1150,"y":2720,"wires":[["c05086a6.78a9e8","2aa325ea.137c6a","e9c86b5b.5a3078","27707de0.e5edb2","2d43c870.f96878"]]},{"id":"2c46efce.8c947","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2260,"y":2780,"wires":[]},{"id":"74eb6aab.505974","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload.QUANTITY == \"2\") {\n  msg.payload.QUANTITY = \"3\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1260,"y":2840,"wires":[["ca521d55.e3eda"]]},{"id":"146e585d.c44798","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIVIRTUAL SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1900,"y":2840,"wires":[["1ecd0ffd.59c15"]]},{"id":"ca521d55.e3eda","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload.QUANTITY\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":2840,"wires":[["2aa325ea.137c6a"]]},{"id":"2aa325ea.137c6a","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1730,"y":2840,"wires":[["146e585d.c44798"]]},{"id":"1ecd0ffd.59c15","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":2050,"y":2840,"wires":[["2c46efce.8c947"]]},{"id":"438a0e8e.2a1d5","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload.QUANTITY == \"3\") {\n  msg.payload.QUANTITY = \"4\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1260,"y":2900,"wires":[["84660a10.438e78"]]},{"id":"c00fbf31.288bd","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIVIRTUAL SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1900,"y":2900,"wires":[["27ce3295.98fc1e"]]},{"id":"84660a10.438e78","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload.QUANTITY\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":2900,"wires":[["e9c86b5b.5a3078"]]},{"id":"e9c86b5b.5a3078","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1730,"y":2900,"wires":[["c00fbf31.288bd"]]},{"id":"27ce3295.98fc1e","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":2050,"y":2900,"wires":[["2c46efce.8c947"]]},{"id":"86579091.1d051","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload.QUANTITY == \"4\") {\n  msg.payload.QUANTITY = \"5\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1240,"y":2960,"wires":[["96eac8a2.aba938"]]},{"id":"419c71c0.c969e","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIVIRTUAL SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1880,"y":2960,"wires":[["fda7a698.7cee88"]]},{"id":"96eac8a2.aba938","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload.QUANTITY\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1480,"y":2960,"wires":[["27707de0.e5edb2"]]},{"id":"27707de0.e5edb2","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1710,"y":2960,"wires":[["419c71c0.c969e"]]},{"id":"fda7a698.7cee88","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":2030,"y":2960,"wires":[["2c46efce.8c947"]]},{"id":"3c902dcd.52a792","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload.QUANTITY == \"5\") {\n  msg.payload.QUANTITY = \"6\"\n}\n\nelse {\n  return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1260,"y":3020,"wires":[["935e1a53.ee6ad8"]]},{"id":"860e8e8e.ecbc","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"UPDATE BLUADMIN.GBMULTIVIRTUAL SET QUANTITY = \";\nquery += msg.payload.QUANTITY;\nquery += \" WHERE BARCODE = \";\nquery += msg.payload.BARCODE;\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1900,"y":3020,"wires":[["43410ffb.75c4a"]]},{"id":"935e1a53.ee6ad8","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n  \"QUANTITY\": msg.payload.QUANTITY\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":3020,"wires":[["2d43c870.f96878"]]},{"id":"2d43c870.f96878","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1730,"y":3020,"wires":[["860e8e8e.ecbc"]]},{"id":"43410ffb.75c4a","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":2050,"y":3020,"wires":[["2c46efce.8c947"]]},{"id":"3e9bf694.82e9ca","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1090,"y":1900,"wires":[]},{"id":"7cf0d923.34cc98","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1330,"y":2500,"wires":[]},{"id":"b751f9ee.8dd9a8","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2100,"y":2460,"wires":[]},{"id":"2e7d21b0.af8a4e","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1920,"y":2500,"wires":[]},{"id":"592f0a25.54bd04","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":2240,"y":2540,"wires":[]},{"id":"5d62a936.d7f678","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = msg.payload.QUANTITY;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1100,"y":2400,"wires":[["57ebb185.3f23d"]]},{"id":"f5d773c1.64eee","type":"debug","z":"d929b1c6.8d226","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":900,"y":2940,"wires":[]},{"id":"17f3307c.60668","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload.BARCODE;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1420,"y":2600,"wires":[["9aee9a.ae8f1168"]]},{"id":"fde8b2dd.e4c0b","type":"link out","z":"54c70365.d5e51c","name":"ReceiptMessageDirect","links":["d8bf348a.0c6d98","ce2e22bf.bd10d"],"x":1215,"y":280,"wires":[]},{"id":"574208d0.c211b8","type":"link out","z":"54c70365.d5e51c","name":"ReceiptMessageDirect2","links":["40f30e83.adf26","4d38159.31fc9ec"],"x":1425,"y":120,"wires":[]},{"id":"4556850e.66803c","type":"link out","z":"54c70365.d5e51c","name":"ReceiptMessageDelay","links":["d93b4845.fedd48","66e69fa6.f6dac"],"x":1325,"y":160,"wires":[]},{"id":"bffcff39.8f995","type":"websocket out","z":"57060e7a.25d5a","name":"","server":"1f4eab44.de3175","client":"","x":890,"y":20,"wires":[]},{"id":"a0fc3d18.dbfff","type":"delay","z":"57060e7a.25d5a","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":280,"y":160,"wires":[["bea19d43.83fff"]]},{"id":"bea19d43.83fff","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = \"...\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":200,"wires":[["bffcff39.8f995"]]},{"id":"d93b4845.fedd48","type":"link in","z":"57060e7a.25d5a","name":"","links":["4556850e.66803c"],"x":135,"y":160,"wires":[["a0fc3d18.dbfff"]]},{"id":"d8bf348a.0c6d98","type":"link in","z":"57060e7a.25d5a","name":"","links":["fde8b2dd.e4c0b"],"x":155,"y":40,"wires":[["bffcff39.8f995","1efb8c09.681484"]]},{"id":"40f30e83.adf26","type":"link in","z":"57060e7a.25d5a","name":"","links":["574208d0.c211b8"],"x":105,"y":100,"wires":[["bffcff39.8f995","1efb8c09.681484"]]},{"id":"b1161361.c2c18","type":"link out","z":"54c70365.d5e51c","name":"DelaySum","links":["d47202cb.c05b1","65aaac18.38d704"],"x":1085,"y":320,"wires":[]},{"id":"2cf3d038.fcd3c","type":"link out","z":"54c70365.d5e51c","name":"DelayCount","links":["abfa866a.9a4178","7e50631a.2d8fec"],"x":1075,"y":440,"wires":[]},{"id":"3d463b2.1fdc9c4","type":"function","z":"57060e7a.25d5a","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.GBINUSE WHERE RECEIPTID = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":260,"wires":[["bcea7a78.7c1fe8"]]},{"id":"c69eee9c.f009","type":"dashDB in","z":"57060e7a.25d5a","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":420,"y":420,"wires":[["7c94008b.bb68f","deb46cd8.6db9e"]]},{"id":"67255745.784c98","type":"websocket out","z":"57060e7a.25d5a","name":"","server":"3ef802c5.56844e","client":"","x":1880,"y":180,"wires":[]},{"id":"506e6fe4.5a9f8","type":"function","z":"57060e7a.25d5a","name":"","func":"var a = msg.payload[\"1\"];\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":280,"wires":[["9cf19557.d87ae8","5a2c26bf.eca6e8","450bd7c5.66ba68"]]},{"id":"9cf19557.d87ae8","type":"delay","z":"57060e7a.25d5a","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":140,"wires":[["2d49a9c4.7f2086"]]},{"id":"2d49a9c4.7f2086","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = \"...\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1380,"y":240,"wires":[["15deff5d.892e51","67255745.784c98","bffcff39.8f995"]]},{"id":"d47202cb.c05b1","type":"link in","z":"57060e7a.25d5a","name":"","links":["b1161361.c2c18"],"x":105,"y":340,"wires":[["3d463b2.1fdc9c4","2587156a.d3a8ba"]]},{"id":"edbd0b26.df0938","type":"function","z":"57060e7a.25d5a","name":"","func":"let query = \"SELECT COUNT(BARCODE) FROM BLUADMIN.GBINUSE WHERE RECEIPTID = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":540,"wires":[["8c9a2942.a93768"]]},{"id":"8c9a2942.a93768","type":"dashDB in","z":"57060e7a.25d5a","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":360,"y":540,"wires":[["f3392852.abf2c8","f8826a92.5d4318"]]},{"id":"72972a39.7c2334","type":"websocket out","z":"57060e7a.25d5a","name":"","server":"5a5144f8.75aa0c","client":"","x":1790,"y":520,"wires":[]},{"id":"64c81de8.e56554","type":"delay","z":"57060e7a.25d5a","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":480,"wires":[["bebecd52.05249"]]},{"id":"bebecd52.05249","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = \"...\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1240,"y":440,"wires":[["72972a39.7c2334"]]},{"id":"f3392852.abf2c8","type":"link out","z":"57060e7a.25d5a","name":"COUNTGBINUSE","links":["12fd078d.7fabd8"],"x":455,"y":480,"wires":[]},{"id":"abfa866a.9a4178","type":"link in","z":"57060e7a.25d5a","name":"","links":["2cf3d038.fcd3c"],"x":95,"y":480,"wires":[["edbd0b26.df0938","dd9db07f.0ac2d"]]},{"id":"2587156a.d3a8ba","type":"function","z":"57060e7a.25d5a","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.GBMULTIINUSE WHERE RECEIPTID = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":360,"wires":[["c69eee9c.f009"]]},{"id":"bcea7a78.7c1fe8","type":"dashDB in","z":"57060e7a.25d5a","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":400,"y":280,"wires":[["506e6fe4.5a9f8","708879ce.d14228"]]},{"id":"7c94008b.bb68f","type":"function","z":"57060e7a.25d5a","name":"","func":"var a = msg.payload[\"1\"];\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":420,"wires":[["9cf19557.d87ae8","5866268e.a59868"]]},{"id":"dd9db07f.0ac2d","type":"function","z":"57060e7a.25d5a","name":"","func":"let query = \"SELECT COUNT(BARCODE) FROM BLUADMIN.GBMULTIINUSE WHERE RECEIPTID = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":220,"y":680,"wires":[["abbc1e03.d5395"]]},{"id":"abbc1e03.d5395","type":"dashDB in","z":"57060e7a.25d5a","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":360,"y":640,"wires":[["35bc3ae4.97eae6"]]},{"id":"6afe77ec.7e7958","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":900,"y":220,"wires":[]},{"id":"7c8832b8.65074c","type":"debug","z":"57060e7a.25d5a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1300,"y":800,"wires":[]},{"id":"f8826a92.5d4318","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = msg.payload[\"1\"];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":520,"wires":[["64c81de8.e56554","bfe05ba1.867838"]]},{"id":"35bc3ae4.97eae6","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = msg.payload[\"1\"];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":620,"wires":[["34ad7377.ddbd5c","67aa2790.82c5c8"]]},{"id":"34ad7377.ddbd5c","type":"delay","z":"57060e7a.25d5a","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1080,"y":620,"wires":[["4e6e0e2b.73468"]]},{"id":"4e6e0e2b.73468","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = \"...\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1400,"y":600,"wires":[["3a5f6fa1.5a623"]]},{"id":"3a5f6fa1.5a623","type":"websocket out","z":"57060e7a.25d5a","name":"","server":"2784f517.c0eb3a","client":"","x":1670,"y":660,"wires":[]},{"id":"15deff5d.892e51","type":"websocket out","z":"57060e7a.25d5a","name":"","server":"3ad79a95.48b546","client":"","x":1880,"y":440,"wires":[]},{"id":"5866268e.a59868","type":"switch","z":"57060e7a.25d5a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"null"}],"checkall":"true","repair":false,"outputs":1,"x":810,"y":340,"wires":[["61ece71.371c518"]]},{"id":"61ece71.371c518","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = \"0.00\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":340,"wires":[["20a89e8d.0531b2"]]},{"id":"5a2c26bf.eca6e8","type":"switch","z":"57060e7a.25d5a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"null"}],"checkall":"true","repair":false,"outputs":1,"x":810,"y":300,"wires":[["d0724382.a5462"]]},{"id":"d0724382.a5462","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = \"0.00\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":300,"wires":[["fa5baf00.1fda8"]]},{"id":"deb46cd8.6db9e","type":"debug","z":"57060e7a.25d5a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":600,"y":340,"wires":[]},{"id":"dd0561e2.5c881","type":"join","z":"57060e7a.25d5a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1510,"y":80,"wires":[["7724ba90.b877b4","7b55408.6b057c"]]},{"id":"1efb8c09.681484","type":"function","z":"57060e7a.25d5a","name":"","func":"if (msg.payload == \"Receipt already scanned!\"){\n    return null;\n}\n\nelse {\n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":870,"y":80,"wires":[["202aaed6.57da22"]]},{"id":"202aaed6.57da22","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = {\n    \"MESSAGE\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1170,"y":80,"wires":[["dd0561e2.5c881","d0e4cb29.aed728","20542c6a.9a0a54","b7f851e2.2661a"]]},{"id":"450bd7c5.66ba68","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = {\n    \"RECEIPTSUM\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":240,"wires":[["dd0561e2.5c881"]]},{"id":"7724ba90.b877b4","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = msg.payload.RECEIPTSUM;\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1690,"y":80,"wires":[["67255745.784c98"]]},{"id":"7b55408.6b057c","type":"debug","z":"57060e7a.25d5a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1640,"y":340,"wires":[]},{"id":"d0e4cb29.aed728","type":"join","z":"57060e7a.25d5a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1370,"y":340,"wires":[["2ee58aef.b44926"]]},{"id":"20a89e8d.0531b2","type":"function","z":"57060e7a.25d5a","name":"","func":"var gbsum = Number(msg.payload);\nmsg.payload = {\n    \"GBRECEIPTSUM\": gbsum.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1220,"y":360,"wires":[["d0e4cb29.aed728"]]},{"id":"2ee58aef.b44926","type":"function","z":"57060e7a.25d5a","name":"","func":"\nmsg.payload = msg.payload.GBRECEIPTSUM;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":380,"wires":[["15deff5d.892e51","9cf19557.d87ae8"]]},{"id":"20542c6a.9a0a54","type":"join","z":"57060e7a.25d5a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1210,"y":560,"wires":[["99117cb9.a5304"]]},{"id":"b7f851e2.2661a","type":"join","z":"57060e7a.25d5a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1270,"y":700,"wires":[["d65f5009.788f2"]]},{"id":"bfe05ba1.867838","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = {\n    \"RECEIPTPRODUCT\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":560,"wires":[["20542c6a.9a0a54"]]},{"id":"67aa2790.82c5c8","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = {\n    \"GBRECEIPTPRODUCT\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1100,"y":680,"wires":[["b7f851e2.2661a"]]},{"id":"d65f5009.788f2","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = msg.payload.GBRECEIPTPRODUCT;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1460,"y":700,"wires":[["3a5f6fa1.5a623"]]},{"id":"99117cb9.a5304","type":"function","z":"57060e7a.25d5a","name":"","func":"msg.payload = msg.payload.RECEIPTPRODUCT;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1420,"y":540,"wires":[["72972a39.7c2334"]]},{"id":"b0e0cefa.de8a6","type":"link out","z":"e1413e6b.06f05","name":"MULTIRECYCLESCAN","links":["a5708576.498d38"],"x":525,"y":460,"wires":[]},{"id":"a5708576.498d38","type":"link in","z":"efb7ad8b.89c53","name":"","links":["b0e0cefa.de8a6"],"x":175,"y":40,"wires":[["f94c2a19.cc0eb8","601ff3f7.67a22c","9843e9d0.b8e3e8"]]},{"id":"5a8fc473.82934c","type":"function","z":"efb7ad8b.89c53","name":"","func":"let query = \"SELECT COUNT(BARCODE) FROM BLUADMIN.GBMULTIINUSE WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":220,"wires":[["d73cea26.c60c78"]]},{"id":"e279997c.8d7c68","type":"function","z":"efb7ad8b.89c53","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return null\n}\n\nelse {\n    \n    return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":200,"wires":[["b31562.19d02aa"]]},{"id":"5183956d.cf9bdc","type":"join","z":"efb7ad8b.89c53","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":490,"y":20,"wires":[["64e3b270.120ecc","bb4f6680.8783d8"]]},{"id":"f94c2a19.cc0eb8","type":"function","z":"efb7ad8b.89c53","name":"","func":"let query = \"SELECT DATE,IMAGE,BARCODE,TIP,LABEL,RECEIPTID,COLOR FROM BLUADMIN.GBMULTIINUSE WHERE BARCODE = \";\nquery += msg.payload;\nquery += \" ORDER BY DATE;\";\n\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":180,"y":380,"wires":[["142b455a.cc3d9b"]]},{"id":"d73cea26.c60c78","type":"Db2 in","z":"efb7ad8b.89c53","Db2":"dbf72238.b6841","service":"_ext_","query":"","params":"","name":"","x":440,"y":200,"wires":[["e279997c.8d7c68","c8bdc084.0fa18","597b65a0.29839c"]]},{"id":"142b455a.cc3d9b","type":"Db2 in","z":"efb7ad8b.89c53","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":430,"y":460,"wires":[["9ad49356.02ba1","a8ca4e1a.98c11"]]},{"id":"b31562.19d02aa","type":"function","z":"efb7ad8b.89c53","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":160,"wires":[["5183956d.cf9bdc"]]},{"id":"c8bdc084.0fa18","type":"function","z":"efb7ad8b.89c53","name":"","func":"if (msg.payload[\"1\"] == \"1\"){\n    return msg\n}\n\nelse {\n    \n    return null\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":300,"wires":[["83b0f5f8.a7c458"]]},{"id":"83b0f5f8.a7c458","type":"function","z":"efb7ad8b.89c53","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":280,"wires":[["5183956d.cf9bdc"]]},{"id":"710d155e.355b2c","type":"link out","z":"efb7ad8b.89c53","name":"BARCODEMSGMULTI","links":["25fbf62e.5c8b5a"],"x":755,"y":40,"wires":[]},{"id":"597b65a0.29839c","type":"function","z":"efb7ad8b.89c53","name":"","func":"if (msg.payload[\"1\"] == \"17\"){\n    return msg\n}\n\nelse {\n    \n    return null\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":360,"wires":[["3275e1e3.b34bde"]]},{"id":"3275e1e3.b34bde","type":"function","z":"efb7ad8b.89c53","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":360,"wires":[["5183956d.cf9bdc"]]},{"id":"8fb42450.e940e8","type":"comment","z":"efb7ad8b.89c53","name":"COUNT = 1","info":"","x":1020,"y":200,"wires":[]},{"id":"9ce10d2.24771f","type":"function","z":"efb7ad8b.89c53","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload[0].TIP,\n    \"LABEL\": msg.payload[0].LABEL,\n    \"IMAGE\": msg.payload[0].IMAGE,\n      \"COLOR\": msg.payload[0].COLOR\n\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":460,"wires":[["a9098b52.19e9e8","21b55655.8d950a"]]},{"id":"9ad49356.02ba1","type":"switch","z":"efb7ad8b.89c53","name":"","property":"payload[0].IMAGE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":590,"y":480,"wires":[["9ce10d2.24771f"]]},{"id":"a8ca4e1a.98c11","type":"switch","z":"efb7ad8b.89c53","name":"","property":"payload.IMAGE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":580,"y":560,"wires":[["1b4884f4.a0425b"]]},{"id":"601ff3f7.67a22c","type":"delay","z":"efb7ad8b.89c53","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":190,"y":180,"wires":[["5a8fc473.82934c"]]},{"id":"1b4884f4.a0425b","type":"function","z":"efb7ad8b.89c53","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload.TIP,\n    \"LABEL\": msg.payload.LABEL,\n     \"IMAGE\": msg.payload.IMAGE,\n    \"COLOR\": msg.payload.COLOR\n   \n\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":560,"wires":[["f1307b1c.4bda08","21b55655.8d950a"]]},{"id":"a9098b52.19e9e8","type":"link out","z":"efb7ad8b.89c53","name":"MULTISCAN11","links":["921a864e.a96b58"],"x":905,"y":500,"wires":[]},{"id":"f1307b1c.4bda08","type":"link out","z":"efb7ad8b.89c53","name":"MULTISCAN22","links":["8c76f2b3.17fda"],"x":865,"y":580,"wires":[]},{"id":"921a864e.a96b58","type":"link in","z":"11f2b679.72250a","name":"","links":["a9098b52.19e9e8"],"x":1045,"y":1620,"wires":[["c24860ab.a7c7"]]},{"id":"8c76f2b3.17fda","type":"link in","z":"11f2b679.72250a","name":"","links":["f1307b1c.4bda08"],"x":1045,"y":1700,"wires":[["c24860ab.a7c7"]]},{"id":"25fbf62e.5c8b5a","type":"link in","z":"11f2b679.72250a","name":"","links":["710d155e.355b2c"],"x":255,"y":1720,"wires":[["30a21cea.7a8e34","c2953e19.94f58"]]},{"id":"30a21cea.7a8e34","type":"function","z":"11f2b679.72250a","name":"MESSAGE","func":"msg.payload = {\n    \"MESSAGEMULTI\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":510,"y":1740,"wires":[["773c2460.bee7bc"]]},{"id":"64e3b270.120ecc","type":"function","z":"efb7ad8b.89c53","name":"","func":"msg.payload = \"GOLDEN BIN\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":40,"wires":[["710d155e.355b2c"]]},{"id":"773c2460.bee7bc","type":"join","z":"11f2b679.72250a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":1700,"wires":[["64611269.724a4c","3acc8b1.0af6974"]]},{"id":"64611269.724a4c","type":"function","z":"11f2b679.72250a","name":"","func":"if (msg.payload.MESSAGEMULTI == \"GOLDEN BIN\") {\n    msg.payload = msg.payload.MESSAGEMULTI\n}\n\nelse {\n    \n    msg.payload = msg.payload.MESSAGENORM\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":1880,"wires":[["99510536.a04338","3acc8b1.0af6974"]]},{"id":"99510536.a04338","type":"function","z":"11f2b679.72250a","name":"","func":"msg.payload = {\n    \"MESSAGE\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":1840,"wires":[["a37b9871.7c0ec8"]]},{"id":"3acc8b1.0af6974","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":880,"y":1900,"wires":[]},{"id":"fdeae7b2.d8c928","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":920,"y":2060,"wires":[]},{"id":"c2953e19.94f58","type":"switch","z":"11f2b679.72250a","name":"","property":"payload","propertyType":"msg","rules":[{"t":"empty"}],"checkall":"true","repair":false,"outputs":1,"x":430,"y":1640,"wires":[["709c74df.42761c"]]},{"id":"709c74df.42761c","type":"function","z":"11f2b679.72250a","name":"","func":"msg.payload = {\n    \"MESSAGEMULTI\": \"No match\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":530,"y":1580,"wires":[["773c2460.bee7bc"]]},{"id":"bb4f6680.8783d8","type":"debug","z":"efb7ad8b.89c53","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":920,"y":120,"wires":[]},{"id":"9843e9d0.b8e3e8","type":"function","z":"efb7ad8b.89c53","name":"","func":"msg.payload = {\n    \"BARCODE\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":270,"y":80,"wires":[["5183956d.cf9bdc"]]},{"id":"21b55655.8d950a","type":"debug","z":"efb7ad8b.89c53","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":940,"y":420,"wires":[]},{"id":"bbe9fd18.7d8d9","type":"link out","z":"54c70365.d5e51c","name":"MULTIRECEIPTCHECK","links":["d406933e.a83e8","9adb5446.7e8ac8"],"x":205,"y":80,"wires":[]},{"id":"d406933e.a83e8","type":"link in","z":"d929b1c6.8d226","name":"","links":["bbe9fd18.7d8d9"],"x":495,"y":240,"wires":[["adee16.d85e41e8"]]},{"id":"adee16.d85e41e8","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = msg.payload.RECEIPTID;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":240,"wires":[["d1cee2a5.4a6aa"]]},{"id":"d1cee2a5.4a6aa","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GBMULTIINUSE WHERE RECEIPTID = \";\nquery += msg.payload;\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":240,"wires":[["6fd8b9bb.bbf858"]]},{"id":"6fd8b9bb.bbf858","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":910,"y":240,"wires":[["6dbe89d6.011578"]]},{"id":"6dbe89d6.011578","type":"function","z":"d929b1c6.8d226","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    msg.payload = \"Ok\"\n}\n\nelse {\n    return null\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":300,"wires":[["e16efa90.dd9788"]]},{"id":"e16efa90.dd9788","type":"switch","z":"d929b1c6.8d226","name":"","property":"payload","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":960,"y":300,"wires":[["22a4a719.3b7098"]]},{"id":"22a4a719.3b7098","type":"function","z":"d929b1c6.8d226","name":"","func":"msg.payload = {\n    \"RECEIPTCOUNT\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1130,"y":280,"wires":[["c6b17540.42f2d8"]]},{"id":"c46854d0.039ad8","type":"function","z":"f19c6149.45ec9","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GBRECEIPTS WHERE RECEIPTID = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":480,"wires":[["3598eb5c.4daa94"]]},{"id":"ec9be04a.e9d9c","type":"function","z":"f19c6149.45ec9","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return msg;\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":500,"wires":[["1416567a.b7d71a"]]},{"id":"1416567a.b7d71a","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = {\n    \"RECEIPTCOUNT\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":400,"wires":[["8d7e82d3.0ec53"]]},{"id":"8c4f50e9.f8e5e","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = msg.payload.RECEIPTID;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":380,"wires":[["c46854d0.039ad8"]]},{"id":"3598eb5c.4daa94","type":"Db2 in","z":"f19c6149.45ec9","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":480,"y":500,"wires":[["ec9be04a.e9d9c"]]},{"id":"9adb5446.7e8ac8","type":"link in","z":"f19c6149.45ec9","name":"","links":["bbe9fd18.7d8d9"],"x":125,"y":360,"wires":[["8c4f50e9.f8e5e"]]},{"id":"8ec69102.244ad","type":"http in","z":"de1fb1fe.a612b","name":"Orange","url":"/orangescan","method":"post","upload":true,"swaggerDoc":"","x":230,"y":140,"wires":[["7bc0d433.e820cc","ca3a1f4c.1b88c"]]},{"id":"60c7d750.ff7928","type":"http in","z":"de1fb1fe.a612b","name":"Red","url":"/redscan","method":"post","upload":false,"swaggerDoc":"","x":350,"y":1240,"wires":[["7443230a.4a43bc","d5ea4d9a.fb7b4"]]},{"id":"adfd1379.7d506","type":"http in","z":"de1fb1fe.a612b","name":"Purple","url":"/purplescan","method":"post","upload":false,"swaggerDoc":"","x":410,"y":2440,"wires":[["ab31a477.8264a8"]]},{"id":"ca3a1f4c.1b88c","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":630,"y":120,"wires":[]},{"id":"7bc0d433.e820cc","type":"function","z":"de1fb1fe.a612b","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":260,"y":200,"wires":[["b51e4ec2.ed3f2"]]},{"id":"b51e4ec2.ed3f2","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nvar output = msg.payload.split(\",\");\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":200,"wires":[["298a9187.5814ee","2120be01.dab6a2","caee5124.bcef3"]]},{"id":"1fe8b848.633a68","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1030,"y":260,"wires":[]},{"id":"298a9187.5814ee","type":"function","z":"de1fb1fe.a612b","name":"","func":"if (msg.payload[1] == \"orange\"){\n    msg.payload = \"Orange QR Code Scanned!\"\n}\n\nelse {\n    msg.payload = \"Wrong QR code.\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":260,"wires":[["1fe8b848.633a68"]]},{"id":"2120be01.dab6a2","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.ORANGE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":380,"wires":[["472d808b.7d7a2"]]},{"id":"472d808b.7d7a2","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":650,"y":380,"wires":[["ecffba13.15b8e8"]]},{"id":"caee5124.bcef3","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.ORANGE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":480,"wires":[["d663c719.8b7538"]]},{"id":"5cfb0157.ca9f9","type":"comment","z":"de1fb1fe.a612b","name":"COLOR ORANGE STEP 1","info":"","x":550,"y":320,"wires":[]},{"id":"702b5d3e.9f0014","type":"comment","z":"de1fb1fe.a612b","name":"COLOR ORANGE STEP 1 SUM TIP","info":"","x":180,"y":420,"wires":[]},{"id":"d663c719.8b7538","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":510,"y":480,"wires":[["31cdb11e.96e70e"]]},{"id":"927613eb.335e5","type":"http in","z":"de1fb1fe.a612b","name":"","url":"/orangebarcode","method":"post","upload":false,"swaggerDoc":"","x":140,"y":560,"wires":[["72a7a338.284ddc","b2646c50.209d6"]]},{"id":"72a7a338.284ddc","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":120,"y":660,"wires":[["37940046.5af2e","aa6cee85.7b0a8","43258e42.d08e9","b2646c50.209d6"]]},{"id":"37940046.5af2e","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.ORANGE WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":740,"wires":[["e9b5c614.ed6738"]]},{"id":"c254e69f.b6f0c8","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":890,"y":460,"wires":[["ee5bb894.64c1e8","f2de374a.93e5d8"]]},{"id":"ecffba13.15b8e8","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":380,"wires":[["c254e69f.b6f0c8"]]},{"id":"31cdb11e.96e70e","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":460,"wires":[["c254e69f.b6f0c8","466180e4.b44ae"]]},{"id":"ee5bb894.64c1e8","type":"function","z":"de1fb1fe.a612b","name":"","func":"var tip = Number(msg.payload.TIP);\nmsg.payload = {\n    \n    \"COUNT\": msg.payload.COUNT,\n    \"TIP\": tip.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":520,"wires":[["755b4813.1c6278","f2de374a.93e5d8"]]},{"id":"755b4813.1c6278","type":"split","z":"de1fb1fe.a612b","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":910,"y":560,"wires":[["3452482d.e1d3e8"]]},{"id":"3452482d.e1d3e8","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":960,"y":620,"wires":[["ec2c3212.470b3","ba4c2a90.89a2e8","466180e4.b44ae"]]},{"id":"ec2c3212.470b3","type":"websocket out","z":"de1fb1fe.a612b","name":"","server":"f7e12f77.c1be","client":"","x":1230,"y":580,"wires":[]},{"id":"e9b5c614.ed6738","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":610,"y":740,"wires":[["bfd97fa4.bda71"]]},{"id":"bfd97fa4.bda71","type":"function","z":"de1fb1fe.a612b","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return null\n}\n\nelse {\n   return msg;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":740,"wires":[["3189cea4.0785f2","483aa89.0a86a58"]]},{"id":"3189cea4.0785f2","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = \"https://img.icons8.com/flat-round/128/000000/checkmark.png\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":740,"wires":[["c171ab3a.c2a0f8"]]},{"id":"aa6cee85.7b0a8","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.ORANGE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":840,"wires":[["9568ee56.9e63f"]]},{"id":"9568ee56.9e63f","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":510,"y":840,"wires":[["c084267.0cb1dd8"]]},{"id":"c084267.0cb1dd8","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":840,"wires":[["23cdbe08.6d9692","7c2a0652.a586f8"]]},{"id":"c171ab3a.c2a0f8","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"CHECKMARK\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1200,"y":700,"wires":[["23cdbe08.6d9692","7c2a0652.a586f8","483aa89.0a86a58"]]},{"id":"23cdbe08.6d9692","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1090,"y":1000,"wires":[["e76864eb.9a2f38","91577e7f.eea9c","483aa89.0a86a58"]]},{"id":"e76864eb.9a2f38","type":"function","z":"de1fb1fe.a612b","name":"","func":"var orange = Number(msg.payload.TIP);\nmsg.payload = {\n    \"CHECK\": msg.payload.CHECKMARK,\n    \"TIP\": orange.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1340,"y":840,"wires":[["71a191b8.437cf"]]},{"id":"71a191b8.437cf","type":"split","z":"de1fb1fe.a612b","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1270,"y":920,"wires":[["d2e4e13a.0bdfb"]]},{"id":"d2e4e13a.0bdfb","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1450,"y":920,"wires":[["1721f6f0.e64169","91577e7f.eea9c"]]},{"id":"1721f6f0.e64169","type":"websocket out","z":"de1fb1fe.a612b","name":"","server":"999ae24a.129c7","client":"","x":1510,"y":980,"wires":[]},{"id":"91577e7f.eea9c","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1640,"y":880,"wires":[]},{"id":"ba4c2a90.89a2e8","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1320,"y":640,"wires":[]},{"id":"43258e42.d08e9","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.ORANGE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":960,"wires":[["ca4ffe1d.d7ba5"]]},{"id":"ca4ffe1d.d7ba5","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":530,"y":920,"wires":[["3f2a9970.f98286"]]},{"id":"3f2a9970.f98286","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":960,"wires":[["7c2a0652.a586f8"]]},{"id":"7c2a0652.a586f8","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":820,"wires":[["86fbe80e.969248","ae2e5e53.a05c1"]]},{"id":"86fbe80e.969248","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1660,"y":740,"wires":[]},{"id":"ae2e5e53.a05c1","type":"link out","z":"de1fb1fe.a612b","name":"TIPJARPAYLOAD","links":["b1d5137d.fd383","d2b81d71.31068","5642ce36.0cb17"],"x":1585,"y":660,"wires":[]},{"id":"b1d5137d.fd383","type":"link in","z":"c0b30cd2.450c2","name":"","links":["ae2e5e53.a05c1"],"x":105,"y":140,"wires":[["ec3829bb.6fcf88","6ba45644.602de8"]]},{"id":"8d047221.6c31c","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":630,"y":360,"wires":[]},{"id":"ec3829bb.6fcf88","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/orange/octagon-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString()\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":100,"wires":[["6ba45644.602de8"]]},{"id":"6ba45644.602de8","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":470,"y":160,"wires":[["234091cf.0d578e"]]},{"id":"234091cf.0d578e","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":200,"wires":[["8d047221.6c31c","9c19f8f1.af1448","7340d7d5.94e128"]]},{"id":"9c19f8f1.af1448","type":"Db2 out","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":930,"y":280,"wires":[]},{"id":"58f3353d.c7271c","type":"inject","z":"c0b30cd2.450c2","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"7","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":250,"y":2900,"wires":[["80c78aed.576008"]]},{"id":"80c78aed.576008","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"SELECT * FROM BLUADMIN.TIPJAR ORDER BY DATE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":370,"y":2960,"wires":[["74380304.8e012c"]]},{"id":"74380304.8e012c","type":"Db2 in","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":260,"y":3380,"wires":[["2da7e2b6.0a136e","37f87b24.5b78d4","c29f50ab.521c2","3d669f3e.2bd2a","99bb3683.88f238","fbb0a989.985468","5584b869.dbd098","198711be.baaa7e","5025fd9e.838c24","1960d2ad.02a19d","ee4a1627.661858","d30ac61a.91df78"]]},{"id":"2da7e2b6.0a136e","type":"switch","z":"c0b30cd2.450c2","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":600,"y":2960,"wires":[["17cc3588.7fa29a"]]},{"id":"37f87b24.5b78d4","type":"switch","z":"c0b30cd2.450c2","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":590,"y":3040,"wires":[["84b777cf.2156a8"]]},{"id":"17cc3588.7fa29a","type":"function","z":"c0b30cd2.450c2","name":"NO ZERO","func":"var a = msg.payload.TIP;\nmsg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload.COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":2960,"wires":[["2f92fbb0.d1eb74"]]},{"id":"84b777cf.2156a8","type":"function","z":"c0b30cd2.450c2","name":"ZERO","func":"var a = msg.payload[0].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[0].DATE,\n    \"COLOR\": msg.payload[0].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[0].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":3040,"wires":[["2f92fbb0.d1eb74"]]},{"id":"2f92fbb0.d1eb74","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":920,"y":3020,"wires":[["cbaf1a7c.c0b3e8"]]},{"id":"cbaf1a7c.c0b3e8","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1060,"y":3020,"wires":[["ee36bb06.d893f8","d30ac61a.91df78"]]},{"id":"c29f50ab.521c2","type":"function","z":"c0b30cd2.450c2","name":"ONE","func":"var a = msg.payload[1].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[1].DATE,\n    \"COLOR\": msg.payload[1].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[1].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":3120,"wires":[["affc003b.eab9b"]]},{"id":"affc003b.eab9b","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":760,"y":3120,"wires":[["89f1734c.1a1bc"]]},{"id":"89f1734c.1a1bc","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":920,"y":3120,"wires":[["1567ad88.f3b0f2"]]},{"id":"ee36bb06.d893f8","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"414f0345.96907c","client":"","x":1240,"y":3020,"wires":[]},{"id":"1567ad88.f3b0f2","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"b6092579.0a3768","client":"","x":1120,"y":3120,"wires":[]},{"id":"3d669f3e.2bd2a","type":"function","z":"c0b30cd2.450c2","name":"TWO","func":"var a = msg.payload[2].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[2].DATE,\n    \"COLOR\": msg.payload[2].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[2].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":3200,"wires":[["9e9393f7.71402"]]},{"id":"9e9393f7.71402","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3200,"wires":[["46b99fcb.52cc1"]]},{"id":"46b99fcb.52cc1","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3200,"wires":[["4af73e83.c03f6"]]},{"id":"99bb3683.88f238","type":"function","z":"c0b30cd2.450c2","name":"THREE","func":"var a = msg.payload[3].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[3].DATE,\n    \"COLOR\": msg.payload[3].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[3].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":3280,"wires":[["25560ff5.843c2"]]},{"id":"25560ff5.843c2","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3280,"wires":[["1a2cbb4e.698bc5"]]},{"id":"1a2cbb4e.698bc5","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3280,"wires":[["bf5b4009.ade68"]]},{"id":"fbb0a989.985468","type":"function","z":"c0b30cd2.450c2","name":"FOUR","func":"var a = msg.payload[4].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[4].DATE,\n    \"COLOR\": msg.payload[4].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[4].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":3360,"wires":[["9d76e4fa.3796a8"]]},{"id":"9d76e4fa.3796a8","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3360,"wires":[["94002be5.f8ab78"]]},{"id":"94002be5.f8ab78","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3360,"wires":[["600ecb2b.e58fe4"]]},{"id":"4af73e83.c03f6","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"3834b753.253178","client":"","x":1100,"y":3200,"wires":[]},{"id":"bf5b4009.ade68","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"94821d0a.3cc7d","client":"","x":1100,"y":3260,"wires":[]},{"id":"600ecb2b.e58fe4","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"afdbd605.a595b8","client":"","x":1100,"y":3360,"wires":[]},{"id":"5584b869.dbd098","type":"function","z":"c0b30cd2.450c2","name":"FIVE","func":"var a = msg.payload[5].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[5].DATE,\n    \"COLOR\": msg.payload[5].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[5].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":3440,"wires":[["e2ea41eb.f6e7b"]]},{"id":"e2ea41eb.f6e7b","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3440,"wires":[["25872b26.ad8b24"]]},{"id":"25872b26.ad8b24","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3440,"wires":[["1fdb3cd5.081993"]]},{"id":"198711be.baaa7e","type":"function","z":"c0b30cd2.450c2","name":"SIX","func":"var a = msg.payload[6].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[6].DATE,\n    \"COLOR\": msg.payload[6].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[6].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":3520,"wires":[["5407f0d0.bba0a"]]},{"id":"5407f0d0.bba0a","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3520,"wires":[["cacb9b0e.cbedc8"]]},{"id":"cacb9b0e.cbedc8","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3520,"wires":[["f056c67f.d4b868"]]},{"id":"5025fd9e.838c24","type":"function","z":"c0b30cd2.450c2","name":"SEVEN","func":"var a = msg.payload[7].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[7].DATE,\n    \"COLOR\": msg.payload[7].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[7].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":590,"y":3600,"wires":[["60ccedf4.e4bf14"]]},{"id":"60ccedf4.e4bf14","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3600,"wires":[["c0e60be0.5d21b8"]]},{"id":"c0e60be0.5d21b8","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3600,"wires":[["39ae1433.f6034c"]]},{"id":"1fdb3cd5.081993","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"9a461264.d8df7","client":"","x":1070,"y":3440,"wires":[]},{"id":"f056c67f.d4b868","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"dcef072d.72d358","client":"","x":1100,"y":3520,"wires":[]},{"id":"39ae1433.f6034c","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"a2d6d5aa.7e5a88","client":"","x":1080,"y":3600,"wires":[]},{"id":"1960d2ad.02a19d","type":"function","z":"c0b30cd2.450c2","name":"EIGHT","func":"var a = msg.payload[8].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[8].DATE,\n    \"COLOR\": msg.payload[8].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[8].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":3660,"wires":[["85ed9c3f.82a7d"]]},{"id":"85ed9c3f.82a7d","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3660,"wires":[["780dc5c9.897cac"]]},{"id":"780dc5c9.897cac","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3660,"wires":[["edd96bcf.d23988"]]},{"id":"ee4a1627.661858","type":"function","z":"c0b30cd2.450c2","name":"NINE","func":"var a = msg.payload[9].TIP;\nmsg.payload = {\n    \"DATE\": msg.payload[9].DATE,\n    \"COLOR\": msg.payload[9].COLOR,\n    \"TIP\": a.toFixed(2),\n    \"COUNT\": msg.payload[9].COUNT\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":3720,"wires":[["4f0453b3.38922c"]]},{"id":"4f0453b3.38922c","type":"split","z":"c0b30cd2.450c2","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":740,"y":3720,"wires":[["1404ed6b.81eba3"]]},{"id":"1404ed6b.81eba3","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":900,"y":3720,"wires":[["8643ea3.9de4618"]]},{"id":"edd96bcf.d23988","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"2ca45b2a.c4bfb4","client":"","x":1080,"y":3660,"wires":[]},{"id":"8643ea3.9de4618","type":"websocket out","z":"c0b30cd2.450c2","name":"","server":"36ed3b80.1a1674","client":"","x":1080,"y":3720,"wires":[]},{"id":"7340d7d5.94e128","type":"delay","z":"c0b30cd2.450c2","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":780,"y":120,"wires":[["547e647b.32d0cc","45823356.32681c"]]},{"id":"547e647b.32d0cc","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.ORANGE;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":930,"y":120,"wires":[["de4dd429.078d88"]]},{"id":"de4dd429.078d88","type":"Db2 in","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":920,"y":180,"wires":[["a013cccd.5d8d5"]]},{"id":"a013cccd.5d8d5","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1020,"y":220,"wires":[]},{"id":"dcc5f1c0.d7fcf","type":"debug","z":"e1413e6b.06f05","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1200,"y":980,"wires":[]},{"id":"f2cc0cb9.acc8d","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":680,"wires":[["b7e9100c.1a13a"]]},{"id":"2674b609.eab39a","type":"http in","z":"c87c8b56.c2b2f8","name":"Blue","url":"/bluescan","method":"post","upload":false,"swaggerDoc":"","x":90,"y":140,"wires":[["fd8b4079.9c7f9"]]},{"id":"1674cbf1.e28e74","type":"http in","z":"c87c8b56.c2b2f8","name":"Yellow","url":"/yellowscan","method":"post","upload":false,"swaggerDoc":"","x":270,"y":1480,"wires":[["dbf1ef30.2c229"]]},{"id":"3ca0161a.0447aa","type":"http in","z":"c87c8b56.c2b2f8","name":"Green","url":"/greenscan","method":"post","upload":false,"swaggerDoc":"","x":150,"y":2480,"wires":[["ca3342c0.0f348"]]},{"id":"c6c9d66e.c09198","type":"comment","z":"de1fb1fe.a612b","name":"Red","info":"","x":190,"y":1120,"wires":[]},{"id":"d5ea4d9a.fb7b4","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":830,"y":1240,"wires":[]},{"id":"7443230a.4a43bc","type":"function","z":"de1fb1fe.a612b","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":1320,"wires":[["3c60bd3c.56a602"]]},{"id":"3c60bd3c.56a602","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nvar output = msg.payload.split(\",\");\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1320,"wires":[["291751fc.798c4e","db1f3946.814898"]]},{"id":"291751fc.798c4e","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.RED;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1500,"wires":[["51266760.94e378"]]},{"id":"51266760.94e378","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":850,"y":1500,"wires":[["aa89e20e.fcec4"]]},{"id":"db1f3946.814898","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.RED;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":1600,"wires":[["a62fed1c.855e2"]]},{"id":"a62fed1c.855e2","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":710,"y":1600,"wires":[["26b401fe.e221be"]]},{"id":"5c06e4f9.1e1b5c","type":"function","z":"de1fb1fe.a612b","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":1800,"wires":[["dee3ea0a.03f238"]]},{"id":"dee3ea0a.03f238","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.RED WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1860,"wires":[["5296fc0e.5abb04"]]},{"id":"7339e5e4.461abc","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1090,"y":1580,"wires":[["60708dd9.39dfe4"]]},{"id":"aa89e20e.fcec4","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1500,"wires":[["7339e5e4.461abc"]]},{"id":"26b401fe.e221be","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":1580,"wires":[["7339e5e4.461abc"]]},{"id":"60708dd9.39dfe4","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"COUNT\": msg.payload.COUNT,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1170,"y":1640,"wires":[["c1652b0f.81a378"]]},{"id":"c1652b0f.81a378","type":"split","z":"de1fb1fe.a612b","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1110,"y":1680,"wires":[["be50e43e.cbd3b8"]]},{"id":"be50e43e.cbd3b8","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1160,"y":1740,"wires":[["92401edf.0824b","9b017bf7.43e0e8"]]},{"id":"5296fc0e.5abb04","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":810,"y":1860,"wires":[["9d153a4b.88ed38"]]},{"id":"9d153a4b.88ed38","type":"function","z":"de1fb1fe.a612b","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return null\n}\n\nelse {\n    msg.payload = \"Ok\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1100,"y":1860,"wires":[["a4ba06d6.ce94d8"]]},{"id":"a4ba06d6.ce94d8","type":"switch","z":"de1fb1fe.a612b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":1230,"y":1820,"wires":[["3ec85e0f.903472"]]},{"id":"3ec85e0f.903472","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = \"https://img.icons8.com/flat-round/128/000000/checkmark.png\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1280,"y":1880,"wires":[["e8340128.cb51a"]]},{"id":"c0927cb6.00403","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.RED;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":1960,"wires":[["bdf86c87.8669d"]]},{"id":"bdf86c87.8669d","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":710,"y":1960,"wires":[["c195917a.3dea1"]]},{"id":"c195917a.3dea1","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":900,"y":1960,"wires":[["9650d780.4c56a8","817ea576.a6ea28"]]},{"id":"e8340128.cb51a","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"CHECKMARK\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1400,"y":1820,"wires":[["9650d780.4c56a8","817ea576.a6ea28"]]},{"id":"9650d780.4c56a8","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1430,"y":1900,"wires":[["35827298.97b52e"]]},{"id":"35827298.97b52e","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"CHECK\": msg.payload.CHECKMARK,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1540,"y":1960,"wires":[["39b3141.8fef5ec"]]},{"id":"39b3141.8fef5ec","type":"split","z":"de1fb1fe.a612b","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1470,"y":2040,"wires":[["60f4d6ae.7a2808"]]},{"id":"60f4d6ae.7a2808","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1650,"y":2040,"wires":[["1b14c53c.d87adb","8547dee9.f6865"]]},{"id":"1b14c53c.d87adb","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1840,"y":2000,"wires":[]},{"id":"92401edf.0824b","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1520,"y":1760,"wires":[]},{"id":"79a7b3e2.6cb15c","type":"switch","z":"de1fb1fe.a612b","name":"","property":"payload.data","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":480,"y":1880,"wires":[["c0927cb6.00403"]]},{"id":"917144f5.9bc6f8","type":"switch","z":"de1fb1fe.a612b","name":"","property":"payload.data","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":2060,"wires":[["267ecd9e.2a1eb2"]]},{"id":"267ecd9e.2a1eb2","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.RED;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":2080,"wires":[["ac1aa036.7ecb"]]},{"id":"ac1aa036.7ecb","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":730,"y":2040,"wires":[["96702c38.9198e"]]},{"id":"96702c38.9198e","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":900,"y":2080,"wires":[["817ea576.a6ea28"]]},{"id":"817ea576.a6ea28","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1710,"y":1840,"wires":[["666b9ce3.63d074","e0f4520f.e13bc"]]},{"id":"666b9ce3.63d074","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1860,"y":1860,"wires":[]},{"id":"e0f4520f.e13bc","type":"link out","z":"de1fb1fe.a612b","name":"TIPJARPAYLOAD","links":["bfe7354f.144ec8","5642ce36.0cb17"],"x":1785,"y":1780,"wires":[]},{"id":"9b017bf7.43e0e8","type":"websocket out","z":"de1fb1fe.a612b","name":"","server":"419c82f5.3e98ac","client":"","x":1450,"y":1640,"wires":[]},{"id":"8547dee9.f6865","type":"websocket out","z":"de1fb1fe.a612b","name":"","server":"acaf6d07.42554","client":"","x":1800,"y":2160,"wires":[]},{"id":"1fe162fb.5bd82d","type":"http in","z":"de1fb1fe.a612b","name":"","url":"/redbarcode","method":"post","upload":false,"swaggerDoc":"","x":200,"y":1740,"wires":[["5c06e4f9.1e1b5c","79a7b3e2.6cb15c","917144f5.9bc6f8"]]},{"id":"ab31a477.8264a8","type":"function","z":"de1fb1fe.a612b","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":2600,"wires":[["871711a5.674e"]]},{"id":"871711a5.674e","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nvar output = msg.payload.split(\",\");\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2600,"wires":[["854b267c.868978","91a1ffc8.4f726","b220b798.a6d828"]]},{"id":"3c598021.c1ee","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1270,"y":2660,"wires":[]},{"id":"854b267c.868978","type":"function","z":"de1fb1fe.a612b","name":"","func":"if (msg.payload[1] == \"orange\"){\n    msg.payload = \"Orange QR Code Scanned!\"\n}\n\nelse {\n    msg.payload = \"Wrong QR code.\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":2660,"wires":[["3c598021.c1ee"]]},{"id":"91a1ffc8.4f726","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.PURPLE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":2780,"wires":[["efad0b12.3dad58"]]},{"id":"efad0b12.3dad58","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":890,"y":2780,"wires":[["85bd34de.645a18"]]},{"id":"b220b798.a6d828","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.PURPLE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":2880,"wires":[["71794616.84b608"]]},{"id":"71794616.84b608","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":750,"y":2880,"wires":[["a073a827.7079d8"]]},{"id":"1a648a66.4fef06","type":"function","z":"de1fb1fe.a612b","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":3080,"wires":[["dd0ef93d.a837f8"]]},{"id":"dd0ef93d.a837f8","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.PURPLE WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":3140,"wires":[["d08f72e7.df311"]]},{"id":"3646b3e3.22ffbc","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1130,"y":2860,"wires":[["be838b36.db8678"]]},{"id":"85bd34de.645a18","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1060,"y":2780,"wires":[["3646b3e3.22ffbc"]]},{"id":"a073a827.7079d8","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":2860,"wires":[["3646b3e3.22ffbc"]]},{"id":"be838b36.db8678","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"COUNT\": msg.payload.COUNT,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1210,"y":2920,"wires":[["aa8f3f69.53971"]]},{"id":"aa8f3f69.53971","type":"split","z":"de1fb1fe.a612b","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1150,"y":2960,"wires":[["9e28d314.aab1f"]]},{"id":"9e28d314.aab1f","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1200,"y":3020,"wires":[["dc3bbf77.c0ef7","6a65098d.ac3138"]]},{"id":"d08f72e7.df311","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":850,"y":3140,"wires":[["57233d2.14dd9c4"]]},{"id":"57233d2.14dd9c4","type":"function","z":"de1fb1fe.a612b","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return null\n}\n\nelse {\n    msg.payload = \"Ok\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":3140,"wires":[["f5391841.932df8"]]},{"id":"f5391841.932df8","type":"switch","z":"de1fb1fe.a612b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":1270,"y":3100,"wires":[["8dffc6fb.db2b18"]]},{"id":"8dffc6fb.db2b18","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = \"https://img.icons8.com/flat-round/128/000000/checkmark.png\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1320,"y":3160,"wires":[["7b3e073d.1de158"]]},{"id":"4a0b8266.50b5ac","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.PURPLE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":3240,"wires":[["60fe3f4e.b3323"]]},{"id":"60fe3f4e.b3323","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":750,"y":3240,"wires":[["858cc55f.6d4d58"]]},{"id":"858cc55f.6d4d58","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":3240,"wires":[["f13b161f.221b58","a1e59348.9ffc"]]},{"id":"7b3e073d.1de158","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"CHECKMARK\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1440,"y":3100,"wires":[["f13b161f.221b58","a1e59348.9ffc"]]},{"id":"f13b161f.221b58","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1690,"y":3200,"wires":[["fcbd50c.8d364b"]]},{"id":"fcbd50c.8d364b","type":"function","z":"de1fb1fe.a612b","name":"","func":"\nmsg.payload = {\n    \"CHECK\": msg.payload.CHECKMARK,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1580,"y":3240,"wires":[["6b87f72b.830e88"]]},{"id":"6b87f72b.830e88","type":"split","z":"de1fb1fe.a612b","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1510,"y":3320,"wires":[["539ca8b0.7999e8"]]},{"id":"539ca8b0.7999e8","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1690,"y":3320,"wires":[["d54e8e68.fe33d","998865fa.54dea8"]]},{"id":"d54e8e68.fe33d","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1880,"y":3280,"wires":[]},{"id":"dc3bbf77.c0ef7","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1560,"y":3040,"wires":[]},{"id":"574b8862.d06d08","type":"function","z":"de1fb1fe.a612b","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.PURPLE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":3360,"wires":[["f70773fc.df4d2"]]},{"id":"f70773fc.df4d2","type":"Db2 in","z":"de1fb1fe.a612b","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":770,"y":3320,"wires":[["f2c212a5.2ab03"]]},{"id":"f2c212a5.2ab03","type":"function","z":"de1fb1fe.a612b","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":3360,"wires":[["a1e59348.9ffc"]]},{"id":"a1e59348.9ffc","type":"join","z":"de1fb1fe.a612b","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1750,"y":3120,"wires":[["6519466d.18c328","1d11d1b4.bdbc0e"]]},{"id":"6519466d.18c328","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1900,"y":3140,"wires":[]},{"id":"1d11d1b4.bdbc0e","type":"link out","z":"de1fb1fe.a612b","name":"TIPJARPAYLOAD","links":["a2ae824.121ec8"],"x":1825,"y":3060,"wires":[]},{"id":"9f022748.8d74c8","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":680,"y":660,"wires":[]},{"id":"308f0cfb.399164","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/soylent-red/circle-outline-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString()\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":280,"y":360,"wires":[["e420e897.7708e8"]]},{"id":"e420e897.7708e8","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":490,"y":420,"wires":[["48e69739.494bd8"]]},{"id":"48e69739.494bd8","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":630,"y":500,"wires":[["9f022748.8d74c8","6c14155.080fcec","e64ff750.e9bc58"]]},{"id":"6c14155.080fcec","type":"Db2 out","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":980,"y":580,"wires":[]},{"id":"e64ff750.e9bc58","type":"delay","z":"c0b30cd2.450c2","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":780,"y":400,"wires":[["53b75ec8.371f4","a90cc7e9.27fb88"]]},{"id":"53b75ec8.371f4","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.RED;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":420,"wires":[["a9c092f.9fa347"]]},{"id":"a9c092f.9fa347","type":"Db2 in","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":970,"y":480,"wires":[["cc72912a.e7621"]]},{"id":"cc72912a.e7621","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1070,"y":520,"wires":[]},{"id":"bfe7354f.144ec8","type":"link in","z":"c0b30cd2.450c2","name":"REDTIPJAR","links":["e0f4520f.e13bc"],"x":85,"y":360,"wires":[["308f0cfb.399164","e420e897.7708e8"]]},{"id":"74e23e73.1eb1c","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":700,"y":1020,"wires":[]},{"id":"652144a.df986bc","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/purple/circle-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString()\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":370,"y":760,"wires":[["7aff7611.23cb68"]]},{"id":"7aff7611.23cb68","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":540,"y":820,"wires":[["20dbe6b9.cc996a"]]},{"id":"20dbe6b9.cc996a","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":860,"wires":[["74e23e73.1eb1c","462d7238.cd719c","656b0607.d5d8c8"]]},{"id":"462d7238.cd719c","type":"Db2 out","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1000,"y":940,"wires":[]},{"id":"656b0607.d5d8c8","type":"delay","z":"c0b30cd2.450c2","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":850,"y":780,"wires":[["1a04ca73.6b5b16","2c0be589.80827a"]]},{"id":"1a04ca73.6b5b16","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.PURPLE;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":780,"wires":[["af9115a2.4e3ba8"]]},{"id":"af9115a2.4e3ba8","type":"Db2 in","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":990,"y":840,"wires":[["f413e283.18bb8"]]},{"id":"f413e283.18bb8","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1090,"y":880,"wires":[]},{"id":"a2ae824.121ec8","type":"link in","z":"c0b30cd2.450c2","name":"PURPLETIPJAR","links":["1d11d1b4.bdbc0e"],"x":85,"y":780,"wires":[["652144a.df986bc","7aff7611.23cb68"]]},{"id":"6a65098d.ac3138","type":"websocket out","z":"de1fb1fe.a612b","name":"","server":"978dc49d.e4e7b8","client":"","x":1560,"y":2860,"wires":[]},{"id":"998865fa.54dea8","type":"websocket out","z":"de1fb1fe.a612b","name":"","server":"c16ee2fa.81976","client":"","x":1810,"y":3520,"wires":[]},{"id":"32c0705.b7b099","type":"http in","z":"de1fb1fe.a612b","name":"","url":"/purplebarcode","method":"post","upload":false,"swaggerDoc":"","x":780,"y":2980,"wires":[["1a648a66.4fef06","4a0b8266.50b5ac","574b8862.d06d08"]]},{"id":"c4123f81.6d2c4","type":"comment","z":"c87c8b56.c2b2f8","name":"BLUE","info":"","x":110,"y":60,"wires":[]},{"id":"fd8b4079.9c7f9","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":260,"wires":[["b5d2d09a.661a3"]]},{"id":"b5d2d09a.661a3","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nvar output = msg.payload.split(\",\");\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":260,"wires":[["81dda593.864538","d4f2071c.a77df8"]]},{"id":"81dda593.864538","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.BLUE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":440,"wires":[["db11b7de.62a028"]]},{"id":"db11b7de.62a028","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":770,"y":440,"wires":[["90239a2c.7dce68"]]},{"id":"d4f2071c.a77df8","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.BLUE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":540,"wires":[["511116be.943258"]]},{"id":"511116be.943258","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":630,"y":540,"wires":[["e043fc6c.e5288"]]},{"id":"1ff53935.0cdfa7","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":740,"wires":[["c0279b1d.c70028"]]},{"id":"c0279b1d.c70028","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.BLUE WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":800,"wires":[["73d75aaa.250744"]]},{"id":"4602bb34.5aeac4","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1010,"y":520,"wires":[["2f507cbf.30f564"]]},{"id":"90239a2c.7dce68","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":440,"wires":[["4602bb34.5aeac4"]]},{"id":"e043fc6c.e5288","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":520,"wires":[["4602bb34.5aeac4"]]},{"id":"2f507cbf.30f564","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"COUNT\": msg.payload.COUNT,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1090,"y":580,"wires":[["e44e2856.d74fd8"]]},{"id":"e44e2856.d74fd8","type":"split","z":"c87c8b56.c2b2f8","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1030,"y":620,"wires":[["c3550e10.d3298"]]},{"id":"c3550e10.d3298","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1080,"y":680,"wires":[["4fe3e359.ae5d3c","2611824e.f8856e"]]},{"id":"73d75aaa.250744","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":730,"y":800,"wires":[["f99b8e92.39695"]]},{"id":"f99b8e92.39695","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return null\n}\n\nelse {\n    msg.payload = \"Ok\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":800,"wires":[["10020535.8d261b"]]},{"id":"10020535.8d261b","type":"switch","z":"c87c8b56.c2b2f8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":1150,"y":760,"wires":[["f730b23d.5b69f"]]},{"id":"f730b23d.5b69f","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = \"https://img.icons8.com/flat-round/128/000000/checkmark.png\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1200,"y":820,"wires":[["f67c6a00.0da558"]]},{"id":"9c63a0f7.06651","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.BLUE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":900,"wires":[["ed87eb0d.bc10a8"]]},{"id":"ed87eb0d.bc10a8","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":630,"y":900,"wires":[["1bf9ead5.1f39d5"]]},{"id":"1bf9ead5.1f39d5","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":900,"wires":[["b05578bb.f0c7a8","91a69f34.0ba33"]]},{"id":"f67c6a00.0da558","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"CHECKMARK\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1320,"y":760,"wires":[["b05578bb.f0c7a8","91a69f34.0ba33"]]},{"id":"b05578bb.f0c7a8","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1350,"y":840,"wires":[["5144e02f.8a5e7"]]},{"id":"5144e02f.8a5e7","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"CHECK\": msg.payload.CHECKMARK,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1460,"y":900,"wires":[["42676947.aa9b28"]]},{"id":"42676947.aa9b28","type":"split","z":"c87c8b56.c2b2f8","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1390,"y":980,"wires":[["accabc95.b072e"]]},{"id":"accabc95.b072e","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1570,"y":980,"wires":[["4f560e87.fb42e","bd5008d3.30b338"]]},{"id":"4f560e87.fb42e","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1760,"y":940,"wires":[]},{"id":"4fe3e359.ae5d3c","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1440,"y":700,"wires":[]},{"id":"5c5698ba.6a93b8","type":"switch","z":"c87c8b56.c2b2f8","name":"","property":"payload.data","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":400,"y":820,"wires":[["9c63a0f7.06651"]]},{"id":"c0f0bfa6.caaa5","type":"switch","z":"c87c8b56.c2b2f8","name":"","property":"payload.data","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":390,"y":1000,"wires":[["2e1d93d.8c7ea6c"]]},{"id":"2e1d93d.8c7ea6c","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.BLUE;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":1020,"wires":[["3a4465f1.70805a"]]},{"id":"3a4465f1.70805a","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":650,"y":980,"wires":[["322c5a15.e1c8a6"]]},{"id":"322c5a15.e1c8a6","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":1020,"wires":[["91a69f34.0ba33"]]},{"id":"91a69f34.0ba33","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1630,"y":780,"wires":[["f32828a1.525098","f236e121.7e98b"]]},{"id":"f32828a1.525098","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1780,"y":800,"wires":[]},{"id":"f236e121.7e98b","type":"link out","z":"c87c8b56.c2b2f8","name":"TIPJARPAYLOAD","links":["be43c7e2.e82a58"],"x":1705,"y":720,"wires":[]},{"id":"2611824e.f8856e","type":"websocket out","z":"c87c8b56.c2b2f8","name":"","server":"3a308002.ace93","client":"","x":1370,"y":580,"wires":[]},{"id":"bd5008d3.30b338","type":"websocket out","z":"c87c8b56.c2b2f8","name":"","server":"6d4c4835.8f2de8","client":"","x":1720,"y":1100,"wires":[]},{"id":"9a0e0803.059018","type":"http in","z":"c87c8b56.c2b2f8","name":"","url":"/bluebarcode","method":"post","upload":false,"swaggerDoc":"","x":120,"y":680,"wires":[["1ff53935.0cdfa7","5c5698ba.6a93b8","c0f0bfa6.caaa5"]]},{"id":"c75ed057.fe9c2","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":710,"y":1460,"wires":[]},{"id":"f171a906.cd7958","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/royal-blue/square-outline-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString()\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":1200,"wires":[["b7564103.3af0b"]]},{"id":"b7564103.3af0b","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":550,"y":1260,"wires":[["fac41b79.ccdc68"]]},{"id":"fac41b79.ccdc68","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1300,"wires":[["c75ed057.fe9c2","b6e82ff7.3dbec","e5f33953.d86488"]]},{"id":"b6e82ff7.3dbec","type":"Db2 out","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1010,"y":1380,"wires":[]},{"id":"e5f33953.d86488","type":"delay","z":"c0b30cd2.450c2","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":860,"y":1220,"wires":[["357ae4cd.8e3ccc","f823a46f.a72408"]]},{"id":"357ae4cd.8e3ccc","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.BLUE;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1010,"y":1220,"wires":[["b5252ccb.a40d"]]},{"id":"b5252ccb.a40d","type":"Db2 in","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1000,"y":1280,"wires":[["68256be5.37ec84"]]},{"id":"68256be5.37ec84","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1100,"y":1320,"wires":[]},{"id":"be43c7e2.e82a58","type":"link in","z":"c0b30cd2.450c2","name":"BLUETIPJAR","links":["f236e121.7e98b"],"x":95,"y":1220,"wires":[["f171a906.cd7958","b7564103.3af0b"]]},{"id":"4d5f5cd1.66da14","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":730,"y":1860,"wires":[]},{"id":"f2b4e4f7.bea6d8","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/green/triangle-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString()\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":1600,"wires":[["6295f1bb.9996b"]]},{"id":"6295f1bb.9996b","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":570,"y":1660,"wires":[["5b7ec997.63aad8"]]},{"id":"5b7ec997.63aad8","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":1700,"wires":[["4d5f5cd1.66da14","65728cb9.cdde54","9226c88.1a02a38"]]},{"id":"65728cb9.cdde54","type":"Db2 out","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1030,"y":1780,"wires":[]},{"id":"9226c88.1a02a38","type":"delay","z":"c0b30cd2.450c2","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":1620,"wires":[["e0a01fa0.b38a7","71412ff1.e1fc7"]]},{"id":"e0a01fa0.b38a7","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.GREEN;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":1620,"wires":[["cc6eb44c.0cf868"]]},{"id":"cc6eb44c.0cf868","type":"Db2 in","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1020,"y":1680,"wires":[["3bc6a22e.d4787e"]]},{"id":"3bc6a22e.d4787e","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1120,"y":1720,"wires":[]},{"id":"e9257a3d.310988","type":"link in","z":"c0b30cd2.450c2","name":"GREENTIPJAR","links":["159db388.6c00fc"],"x":115,"y":1620,"wires":[["f2b4e4f7.bea6d8","6295f1bb.9996b"]]},{"id":"ed7776dd.4a1648","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":730,"y":2280,"wires":[]},{"id":"3a91dac8.24aec6","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/yellow/arrow-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString()\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":2020,"wires":[["2761e3e1.e6e61c"]]},{"id":"2761e3e1.e6e61c","type":"join","z":"c0b30cd2.450c2","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":570,"y":2080,"wires":[["11f7fa18.fda396"]]},{"id":"11f7fa18.fda396","type":"function","z":"c0b30cd2.450c2","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":2120,"wires":[["ed7776dd.4a1648","e718b9a3.365d68","d213244a.262648"]]},{"id":"e718b9a3.365d68","type":"Db2 out","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1030,"y":2200,"wires":[]},{"id":"d213244a.262648","type":"delay","z":"c0b30cd2.450c2","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":2040,"wires":[["7ce81294.4a437c","75a089ad.00a268"]]},{"id":"7ce81294.4a437c","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.YELLOW;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":2040,"wires":[["f74e44b3.72fbc8"]]},{"id":"f74e44b3.72fbc8","type":"Db2 in","z":"c0b30cd2.450c2","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1020,"y":2100,"wires":[["88949806.dc82f8"]]},{"id":"88949806.dc82f8","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1120,"y":2140,"wires":[]},{"id":"680f4030.43376","type":"link in","z":"c0b30cd2.450c2","name":"YELLOWTIPJAR","links":["f82dcddf.46385"],"x":115,"y":2040,"wires":[["3a91dac8.24aec6","2761e3e1.e6e61c"]]},{"id":"5422481c.a39b88","type":"comment","z":"c87c8b56.c2b2f8","name":"YELLOW","info":"","x":300,"y":1340,"wires":[]},{"id":"dbf1ef30.2c229","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":1540,"wires":[["cc167487.bf1268"]]},{"id":"cc167487.bf1268","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nvar output = msg.payload.split(\",\");\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":1540,"wires":[["96dfdd02.d9bb","d813ed69.2c0ec"]]},{"id":"96dfdd02.d9bb","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.YELLOW;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":1720,"wires":[["fa4e1741.14d8e8"]]},{"id":"fa4e1741.14d8e8","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":950,"y":1720,"wires":[["bee07c5a.4ddf7"]]},{"id":"d813ed69.2c0ec","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.YELLOW;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1820,"wires":[["1f37d87b.b52eb8"]]},{"id":"1f37d87b.b52eb8","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":810,"y":1820,"wires":[["5210fdba.840b14"]]},{"id":"ce506e13.1a20b","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":2020,"wires":[["a3fda2e5.90fa7"]]},{"id":"a3fda2e5.90fa7","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.YELLOW WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":2080,"wires":[["3def5c7a.d121a4"]]},{"id":"301bc8bc.3c4998","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1190,"y":1800,"wires":[["ec8e5a01.10ccb8"]]},{"id":"bee07c5a.4ddf7","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":1720,"wires":[["301bc8bc.3c4998"]]},{"id":"5210fdba.840b14","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":1800,"wires":[["301bc8bc.3c4998"]]},{"id":"ec8e5a01.10ccb8","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"COUNT\": msg.payload.COUNT,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1270,"y":1860,"wires":[["142a2356.558d0d"]]},{"id":"142a2356.558d0d","type":"split","z":"c87c8b56.c2b2f8","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1210,"y":1900,"wires":[["14c2f7d9.b922b8"]]},{"id":"14c2f7d9.b922b8","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1260,"y":1960,"wires":[["99960258.ef1f6","2d8500f0.772b1"]]},{"id":"3def5c7a.d121a4","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":910,"y":2080,"wires":[["31b9a031.f6847"]]},{"id":"31b9a031.f6847","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return null\n}\n\nelse {\n    msg.payload = \"Ok\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1200,"y":2080,"wires":[["798fc2ec.38e13c"]]},{"id":"798fc2ec.38e13c","type":"switch","z":"c87c8b56.c2b2f8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":1330,"y":2040,"wires":[["34de6efa.9b71d2"]]},{"id":"34de6efa.9b71d2","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = \"https://img.icons8.com/flat-round/128/000000/checkmark.png\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1380,"y":2100,"wires":[["29f2f9d4.0c1ea6"]]},{"id":"5bdeba2d.c28274","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.YELLOW;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":2180,"wires":[["7bb0fc29.e48dd4"]]},{"id":"7bb0fc29.e48dd4","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":810,"y":2180,"wires":[["bbd96d37.b29cc"]]},{"id":"bbd96d37.b29cc","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":2180,"wires":[["6d49cfff.56da3","b5c84d17.10b36"]]},{"id":"29f2f9d4.0c1ea6","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"CHECKMARK\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1500,"y":2040,"wires":[["6d49cfff.56da3","b5c84d17.10b36"]]},{"id":"6d49cfff.56da3","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1530,"y":2120,"wires":[["82906d8c.d4635"]]},{"id":"82906d8c.d4635","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"CHECK\": msg.payload.CHECKMARK,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1640,"y":2180,"wires":[["c2c99c5a.5dca2"]]},{"id":"c2c99c5a.5dca2","type":"split","z":"c87c8b56.c2b2f8","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1570,"y":2260,"wires":[["24b1e0ca.abb02"]]},{"id":"24b1e0ca.abb02","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1750,"y":2260,"wires":[["9163e2ee.a676b","5718d706.09c8f8"]]},{"id":"9163e2ee.a676b","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1940,"y":2220,"wires":[]},{"id":"99960258.ef1f6","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1620,"y":1980,"wires":[]},{"id":"e001e9d2.081888","type":"switch","z":"c87c8b56.c2b2f8","name":"","property":"payload.data","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":580,"y":2100,"wires":[["5bdeba2d.c28274"]]},{"id":"cc4c636b.eb1bc","type":"switch","z":"c87c8b56.c2b2f8","name":"","property":"payload.data","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":2280,"wires":[["280e0209.5f2f3e"]]},{"id":"280e0209.5f2f3e","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.YELLOW;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":2300,"wires":[["3c85ebb2.536c04"]]},{"id":"3c85ebb2.536c04","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":830,"y":2260,"wires":[["22e842e.48a12be"]]},{"id":"22e842e.48a12be","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":2300,"wires":[["b5c84d17.10b36"]]},{"id":"b5c84d17.10b36","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1810,"y":2060,"wires":[["a27ab82b.95dad8","f82dcddf.46385"]]},{"id":"a27ab82b.95dad8","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1960,"y":2080,"wires":[]},{"id":"f82dcddf.46385","type":"link out","z":"c87c8b56.c2b2f8","name":"TIPJARPAYLOAD","links":["680f4030.43376"],"x":1885,"y":2000,"wires":[]},{"id":"2d8500f0.772b1","type":"websocket out","z":"c87c8b56.c2b2f8","name":"","server":"12bc5203.11583e","client":"","x":1560,"y":1860,"wires":[]},{"id":"5718d706.09c8f8","type":"websocket out","z":"c87c8b56.c2b2f8","name":"","server":"4d26b4be.7cc3cc","client":"","x":1910,"y":2380,"wires":[]},{"id":"1eb174c9.3a8b7b","type":"http in","z":"c87c8b56.c2b2f8","name":"","url":"/yellowbarcode","method":"post","upload":false,"swaggerDoc":"","x":310,"y":1960,"wires":[["ce506e13.1a20b","e001e9d2.081888","cc4c636b.eb1bc"]]},{"id":"bc8b0452.27e118","type":"comment","z":"c87c8b56.c2b2f8","name":"GREEN","info":"","x":310,"y":2420,"wires":[]},{"id":"ca3342c0.0f348","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":2620,"wires":[["742f3005.ba6bd"]]},{"id":"742f3005.ba6bd","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nvar output = msg.payload.split(\",\");\nmsg.payload = output;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":2620,"wires":[["64f11fb6.75731","6a5b5224.65194c"]]},{"id":"64f11fb6.75731","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GREEN;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":2800,"wires":[["1f4dca20.088de6"]]},{"id":"1f4dca20.088de6","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":970,"y":2800,"wires":[["8b76a7a3.3d89a8"]]},{"id":"6a5b5224.65194c","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.GREEN;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":2900,"wires":[["60ecf42c.93c00c"]]},{"id":"60ecf42c.93c00c","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":830,"y":2900,"wires":[["4eceb3c3.1d532c"]]},{"id":"fcef43ec.b4d2","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"var a = msg.payload.data;\nmsg.payload = a;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":3100,"wires":[["7e9c59c5.c0a418"]]},{"id":"7e9c59c5.c0a418","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GREEN WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":780,"y":3160,"wires":[["6c204fb4.8c59"]]},{"id":"248e534e.d5822c","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1210,"y":2880,"wires":[["27449bc6.d29634"]]},{"id":"8b76a7a3.3d89a8","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2800,"wires":[["248e534e.d5822c"]]},{"id":"4eceb3c3.1d532c","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":2880,"wires":[["248e534e.d5822c"]]},{"id":"27449bc6.d29634","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"COUNT\": msg.payload.COUNT,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1290,"y":2940,"wires":[["15a440f9.47141f"]]},{"id":"15a440f9.47141f","type":"split","z":"c87c8b56.c2b2f8","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1230,"y":2980,"wires":[["a0786925.90de68"]]},{"id":"a0786925.90de68","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1280,"y":3040,"wires":[["90ad36de.50cd88","14b9b14.1f7144f"]]},{"id":"6c204fb4.8c59","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":930,"y":3160,"wires":[["b92df6eb.323e98"]]},{"id":"b92df6eb.323e98","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"if (msg.payload[\"1\"] == \"0\"){\n    return null\n}\n\nelse {\n    msg.payload = \"Ok\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1180,"y":3140,"wires":[["4959ba4.2bfb044"]]},{"id":"4959ba4.2bfb044","type":"switch","z":"c87c8b56.c2b2f8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":1350,"y":3120,"wires":[["5dd71bc1.807984"]]},{"id":"5dd71bc1.807984","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = \"https://img.icons8.com/flat-round/128/000000/checkmark.png\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1380,"y":3160,"wires":[["f270809b.4bdc8"]]},{"id":"35585ad9.0093b6","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT SUM(TIP) FROM BLUADMIN.GREEN;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":3260,"wires":[["f34d2.0073cb2f"]]},{"id":"f34d2.0073cb2f","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":810,"y":3260,"wires":[["bfe0cd15.af929","fca8e4fb.ed6dc8"]]},{"id":"bfe0cd15.af929","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"TIP\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":3240,"wires":[["3e073ae7.f09bf6","4b1b255e.06664c"]]},{"id":"f270809b.4bdc8","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"CHECKMARK\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1520,"y":3120,"wires":[["3e073ae7.f09bf6","4b1b255e.06664c"]]},{"id":"3e073ae7.f09bf6","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1790,"y":3200,"wires":[["c48c5e12.32785"]]},{"id":"c48c5e12.32785","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"\nmsg.payload = {\n    \"CHECK\": msg.payload.CHECKMARK,\n    \"TIP\": msg.payload.TIP\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1660,"y":3260,"wires":[["764e611a.14a2d"]]},{"id":"764e611a.14a2d","type":"split","z":"c87c8b56.c2b2f8","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1590,"y":3340,"wires":[["63a4cda3.69b2d4"]]},{"id":"63a4cda3.69b2d4","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1770,"y":3340,"wires":[["9df93910.894548","b1cfbf4a.816ba"]]},{"id":"9df93910.894548","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1960,"y":3300,"wires":[]},{"id":"90ad36de.50cd88","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1640,"y":3060,"wires":[]},{"id":"1abff953.355b37","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GREEN;\";\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":3380,"wires":[["75d852e1.a7da5c"]]},{"id":"75d852e1.a7da5c","type":"Db2 in","z":"c87c8b56.c2b2f8","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":850,"y":3340,"wires":[["906bc5fe.8847f8"]]},{"id":"906bc5fe.8847f8","type":"function","z":"c87c8b56.c2b2f8","name":"","func":"msg.payload = {\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":3380,"wires":[["4b1b255e.06664c"]]},{"id":"4b1b255e.06664c","type":"join","z":"c87c8b56.c2b2f8","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1830,"y":3140,"wires":[["9d46328c.d038d","159db388.6c00fc"]]},{"id":"9d46328c.d038d","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1980,"y":3160,"wires":[]},{"id":"159db388.6c00fc","type":"link out","z":"c87c8b56.c2b2f8","name":"TIPJARPAYLOAD","links":["e9257a3d.310988"],"x":1905,"y":3080,"wires":[]},{"id":"14b9b14.1f7144f","type":"websocket out","z":"c87c8b56.c2b2f8","name":"","server":"e1e87e67.d15cd","client":"","x":1580,"y":2940,"wires":[]},{"id":"b1cfbf4a.816ba","type":"websocket out","z":"c87c8b56.c2b2f8","name":"","server":"91db0d72.8fe33","client":"","x":1930,"y":3460,"wires":[]},{"id":"568a05cc.c669ec","type":"http in","z":"c87c8b56.c2b2f8","name":"","url":"/greenbarcode","method":"post","upload":false,"swaggerDoc":"","x":320,"y":3040,"wires":[["fcef43ec.b4d2","35585ad9.0093b6","1abff953.355b37"]]},{"id":"d30ac61a.91df78","type":"debug","z":"c0b30cd2.450c2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1360,"y":2720,"wires":[]},{"id":"a6f31195.16ecd","type":"switch","z":"d929b1c6.8d226","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":590,"y":440,"wires":[["5a712976.74ebb8"]]},{"id":"f678a2f8.c099a","type":"switch","z":"d929b1c6.8d226","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":600,"y":500,"wires":[["10d1eb37.e8b3a5"]]},{"id":"10d1eb37.e8b3a5","type":"function","z":"d929b1c6.8d226","name":"","func":"\nvar name = msg.payload[0].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"QUANTITY\": msg.payload[0].QUANTITY,\n    \"COLOR\": msg.payload[0].COLOR\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":500,"wires":[["4d040ad0.ebf344"]]},{"id":"5eb0b5b6.990a9c","type":"function","z":"d929b1c6.8d226","name":"","func":"var name = msg.payload[1].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"QUANTITY\": msg.payload[1].QUANTITY,\n    \"COLOR\": msg.payload[1].COLOR\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":720,"y":560,"wires":[["92bf9472.aa6718"]]},{"id":"92bf9472.aa6718","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":890,"y":560,"wires":[["c8482560.048328"]]},{"id":"c8482560.048328","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1050,"y":560,"wires":[["7f694a92.ee7614"]]},{"id":"4a40a1d.e11646","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"497f0cf.a2bcef4","client":"","x":1430,"y":460,"wires":[]},{"id":"7b0ed2fa.9cb98c","type":"function","z":"d929b1c6.8d226","name":"","func":"var name = msg.payload[2].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"QUANTITY\": msg.payload[2].QUANTITY,\n    \"COLOR\": msg.payload[2].COLOR\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":620,"wires":[["9f4f2dcc.3d32d"]]},{"id":"9f4f2dcc.3d32d","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":910,"y":620,"wires":[["e0068008.ae13f"]]},{"id":"e0068008.ae13f","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1070,"y":620,"wires":[["64fb2207.219ebc"]]},{"id":"beaf5984.0ee858","type":"function","z":"d929b1c6.8d226","name":"","func":"var name = msg.payload[3].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"QUANTITY\": msg.payload[3].QUANTITY,\n    \"COLOR\": msg.payload[3].COLOR\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":680,"wires":[["cdfb2726.d7a878"]]},{"id":"cdfb2726.d7a878","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":910,"y":680,"wires":[["1cf876e0.3b6b49"]]},{"id":"1cf876e0.3b6b49","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1070,"y":680,"wires":[["8db1a678.8b5868"]]},{"id":"f2588846.c509e8","type":"function","z":"d929b1c6.8d226","name":"","func":"var name = msg.payload[4].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"QUANTITY\": msg.payload[4].QUANTITY,\n    \"COLOR\": msg.payload[4].COLOR\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":740,"wires":[["5aaca568.bdac8c"]]},{"id":"5aaca568.bdac8c","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":910,"y":740,"wires":[["ca1920c6.1099e"]]},{"id":"ca1920c6.1099e","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1070,"y":740,"wires":[["5cc2f19b.bb966"]]},{"id":"64fb2207.219ebc","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"32e74151.399d2e","client":"","x":1350,"y":620,"wires":[]},{"id":"8db1a678.8b5868","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"dada533c.cf9e","client":"","x":1280,"y":680,"wires":[]},{"id":"5cc2f19b.bb966","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"167cf501.a7327b","client":"","x":1330,"y":740,"wires":[]},{"id":"45823356.32681c","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE COLOR = 'https://www.iconsdb.com/icons/preview/orange/octagon-xxl.png';\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":60,"wires":[["de4dd429.078d88"]]},{"id":"a90cc7e9.27fb88","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE COLOR = 'https://www.iconsdb.com/icons/preview/soylent-red/circle-outline-xxl.png';\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":360,"wires":[["a9c092f.9fa347"]]},{"id":"2c0be589.80827a","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE COLOR = 'https://www.iconsdb.com/icons/preview/purple/circle-xxl.png';\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":980,"y":720,"wires":[["af9115a2.4e3ba8"]]},{"id":"f823a46f.a72408","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE COLOR = 'https://www.iconsdb.com/icons/preview/royal-blue/square-outline-xxl.png';\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1000,"y":1160,"wires":[["b5252ccb.a40d"]]},{"id":"71412ff1.e1fc7","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE COLOR = 'https://www.iconsdb.com/icons/preview/green/triangle-xxl.png';\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":1580,"wires":[["cc6eb44c.0cf868"]]},{"id":"75a089ad.00a268","type":"function","z":"c0b30cd2.450c2","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBINUSE WHERE COLOR = 'https://www.iconsdb.com/icons/preview/yellow/arrow-xxl.png';\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1020,"y":1980,"wires":[["f74e44b3.72fbc8"]]},{"id":"a64883f5.bbdd","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":610,"y":1080,"wires":[["f92d4eec.a0f8f"]]},{"id":"f92d4eec.a0f8f","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":790,"y":1080,"wires":[["d61410dd.b9bcc"]]},{"id":"3852a9eb.4f5556","type":"comment","z":"d929b1c6.8d226","name":"Interval","info":"","x":150,"y":1600,"wires":[]},{"id":"e0f6e3f4.2d562","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"160b3ae8.a0d365","client":"","x":1060,"y":960,"wires":[]},{"id":"d61410dd.b9bcc","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"4acf324f.83b72c","client":"","x":1040,"y":1080,"wires":[]},{"id":"d5f2bfc6.4abc9","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"5ce05014.fab43","client":"","x":1060,"y":1200,"wires":[]},{"id":"647aace5.775884","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"d321a63f.d40768","client":"","x":1060,"y":1380,"wires":[]},{"id":"1a71017c.c1ae8f","type":"websocket out","z":"d929b1c6.8d226","name":"","server":"80c78be.c115278","client":"","x":1100,"y":1560,"wires":[]},{"id":"be2548be.974178","type":"switch","z":"d929b1c6.8d226","name":"","property":"payload.DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":960,"wires":[["f3560532.0f6c28"]]},{"id":"34396db1.cec142","type":"switch","z":"d929b1c6.8d226","name":"","property":"payload[0].DATE","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":1000,"wires":[["b46b2447.e174a8"]]},{"id":"b46b2447.e174a8","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload[0].TIP;\nvar name = msg.payload[0].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[0].DATE,\n    \"NAME\": name.slice(0,40),\n    \"IMAGE\": msg.payload[0].IMAGE,\n    \"RECEIPTID\": msg.payload[0].RECEIPTID,\n    \"QUANTITY\": msg.payload[0].QUANTITY,\n    \"TIP\": a.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":1000,"wires":[["860ea2d9.943c9"]]},{"id":"129c34ff.071e9b","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload[1].TIP;\nvar name = msg.payload[1].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[1].DATE,\n    \"NAME\": name.slice(0,40),\n    \"IMAGE\": msg.payload[1].IMAGE,\n    \"RECEIPTID\": msg.payload[1].RECEIPTID,\n    \"QUANTITY\": msg.payload[1].QUANTITY,\n    \"TIP\": a.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":1080,"wires":[["a64883f5.bbdd"]]},{"id":"5986ccb2.a0f174","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":610,"y":1200,"wires":[["ede2c2b7.75077"]]},{"id":"ede2c2b7.75077","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":790,"y":1200,"wires":[["d5f2bfc6.4abc9"]]},{"id":"fc660690.083f28","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload[2].TIP;\nvar name = msg.payload[2].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[2].DATE,\n    \"NAME\": name.slice(0,40),\n    \"IMAGE\": msg.payload[2].IMAGE,\n    \"RECEIPTID\": msg.payload[2].RECEIPTID,\n    \"QUANTITY\": msg.payload[2].QUANTITY,\n    \"TIP\": a.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":1200,"wires":[["5986ccb2.a0f174"]]},{"id":"962d9d0f.bc76","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":630,"y":1380,"wires":[["b13cb9b7.3cf198"]]},{"id":"b13cb9b7.3cf198","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":810,"y":1380,"wires":[["647aace5.775884"]]},{"id":"e199e18d.30134","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload[3].TIP;\nvar name = msg.payload[3].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[3].DATE,\n    \"NAME\": name.slice(0,40),\n    \"IMAGE\": msg.payload[3].IMAGE,\n    \"RECEIPTID\": msg.payload[3].RECEIPTID,\n    \"QUANTITY\": msg.payload[3].QUANTITY,\n    \"TIP\": a.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1380,"wires":[["962d9d0f.bc76"]]},{"id":"98101991.d2c368","type":"split","z":"d929b1c6.8d226","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":630,"y":1560,"wires":[["e468473b.de9f38"]]},{"id":"e468473b.de9f38","type":"join","z":"d929b1c6.8d226","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"6","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":810,"y":1560,"wires":[["1a71017c.c1ae8f"]]},{"id":"aafd69ad.5f1498","type":"function","z":"d929b1c6.8d226","name":"","func":"var a = msg.payload[4].TIP;\nvar name = msg.payload[4].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[4].DATE,\n    \"NAME\": name.slice(0,40),\n    \"IMAGE\": msg.payload[4].IMAGE,\n    \"RECEIPTID\": msg.payload[4].RECEIPTID,\n    \"QUANTITY\": msg.payload[4].QUANTITY,\n    \"TIP\": a.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1560,"wires":[["98101991.d2c368"]]},{"id":"e412c39e.c0e26","type":"function","z":"7e27ab14.c7aa04","name":"Count10","func":"if (msg.payload[\"1\"] == \"10\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":400,"y":760,"wires":[["73ce8a11.f92844","477e2141.ce82e"]]},{"id":"627391ac.8720e","type":"function","z":"7e27ab14.c7aa04","name":"Count11","func":"if (msg.payload[\"1\"] == \"11\"){\n    msg.payload = \"...\";\n}\n\nelse {\n    return null;\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":860,"wires":[["477e2141.ce82e"]]},{"id":"73ce8a11.f92844","type":"link out","z":"7e27ab14.c7aa04","name":"InUseCount10","links":["270af87c.d6a808"],"x":585,"y":760,"wires":[]},{"id":"477e2141.ce82e","type":"link out","z":"7e27ab14.c7aa04","name":"InUseCount11","links":["ba12b73e.4f4de8"],"x":625,"y":860,"wires":[]},{"id":"829098c0.70a258","type":"function","z":"815c8219.f9012","name":"TEN","func":"var name = msg.payload[10].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[10].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[10].IMAGE,\n    \"COLOR\": msg.payload[10].COLOR,\n     \"RECEIPTID\": msg.payload[10].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":2480,"wires":[["82d8fbb7.fdc4d8"]]},{"id":"82d8fbb7.fdc4d8","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":590,"y":2480,"wires":[["684a68d0.9bcd48"]]},{"id":"684a68d0.9bcd48","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":570,"y":2560,"wires":[["36f59dbc.c07b32"]]},{"id":"1edb3419.b1121c","type":"function","z":"815c8219.f9012","name":"ELEVEN","func":"var name = msg.payload[11].NAME;\nmsg.payload = {\n    \"DATE\": msg.payload[11].DATE,\n    \"NAME\": name.slice(0,20),\n    \"IMAGE\": msg.payload[11].IMAGE,\n    \"COLOR\": msg.payload[11].COLOR,\n     \"RECEIPTID\": msg.payload[11].RECEIPTID\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":2660,"wires":[["430e3a4f.043084"]]},{"id":"430e3a4f.043084","type":"split","z":"815c8219.f9012","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":570,"y":2660,"wires":[["d3c0651c.56caf8"]]},{"id":"d3c0651c.56caf8","type":"join","z":"815c8219.f9012","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"5","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":550,"y":2740,"wires":[["bb54644d.c7d178"]]},{"id":"270af87c.d6a808","type":"link in","z":"815c8219.f9012","name":"","links":["73ce8a11.f92844"],"x":765,"y":2440,"wires":[["36f59dbc.c07b32"]]},{"id":"ba12b73e.4f4de8","type":"link in","z":"815c8219.f9012","name":"","links":["477e2141.ce82e"],"x":745,"y":2640,"wires":[["bb54644d.c7d178"]]},{"id":"bb54644d.c7d178","type":"websocket out","z":"815c8219.f9012","name":"","server":"bdfad05.570503","client":"","x":920,"y":2740,"wires":[]},{"id":"36f59dbc.c07b32","type":"websocket out","z":"815c8219.f9012","name":"","server":"bb43e519.6068b8","client":"","x":1040,"y":2560,"wires":[]},{"id":"b51c6da8.032b1","type":"debug","z":"c37a9a5d.cc60e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1260,"y":300,"wires":[]},{"id":"7f03624a.60506c","type":"debug","z":"c37a9a5d.cc60e8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":960,"y":380,"wires":[]},{"id":"8f5c2a6e.090988","type":"switch","z":"c37a9a5d.cc60e8","name":"","property":"payload[\"1\"]","propertyType":"msg","rules":[{"t":"null"}],"checkall":"true","repair":false,"outputs":1,"x":530,"y":320,"wires":[["8847d067.686b7"]]},{"id":"8847d067.686b7","type":"function","z":"c37a9a5d.cc60e8","name":"","func":"msg.payload = \"0.00\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":440,"y":420,"wires":[["7f03624a.60506c","42dc71e3.4d9b3"]]},{"id":"af10a50f.55a578","type":"switch","z":"c37a9a5d.cc60e8","name":"","property":"payload[\"1\"]","propertyType":"msg","rules":[{"t":"nnull"}],"checkall":"true","repair":false,"outputs":1,"x":730,"y":160,"wires":[["aea934c7.3577b8"]]},{"id":"a170efba.889f7","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1140,"y":700,"wires":[]},{"id":"708879ce.d14228","type":"debug","z":"57060e7a.25d5a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":560,"y":180,"wires":[]},{"id":"1534617b.916d4f","type":"delay","z":"11f2b679.72250a","name":"","pauseType":"delay","timeout":"14","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1120,"y":1280,"wires":[["6bb77773.44c728"]]},{"id":"440fbeac.66259","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = {\n    \"receiptid\": msg.payload\n}\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":1040,"wires":[["bd0563cc.42a69"]]},{"id":"2aef70a8.56f9","type":"function","z":"e1413e6b.06f05","name":"","func":"msg.payload = msg.payload.IMAGE;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":960,"y":1000,"wires":[["2d0da0c.770e76"]]},{"id":"98517f23.34573","type":"split","z":"11f2b679.72250a","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1390,"y":1840,"wires":[["63b727cd.7c8a28"]]},{"id":"63b727cd.7c8a28","type":"join","z":"11f2b679.72250a","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1390,"y":1900,"wires":[[]]},{"id":"83d1557b.2bc038","type":"function","z":"d929b1c6.8d226","name":"","func":"let query = \"SELECT COUNT(BARCODE) FROM BLUADMIN.GBMULTIVIRTUAL WHERE BARCODE = \";\nquery += msg.payload;\n\n\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":920,"y":2620,"wires":[["fa99d735.18c788"]]},{"id":"fa99d735.18c788","type":"Db2 in","z":"d929b1c6.8d226","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":1090,"y":2560,"wires":[["4a6b70de.f65c5"]]},{"id":"6bb77773.44c728","type":"function","z":"11f2b679.72250a","name":"","func":"msg.payload = {\n    \"GBTIP\": \"...\",\n    \"LABEL\": \"...\",\n    \"IMAGE\": \"...\",\n    \"COLOR\": \"...\"\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1260,"y":1220,"wires":[["a3bf58a3.79a8f8"]]},{"id":"a3bf58a3.79a8f8","type":"split","z":"11f2b679.72250a","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1330,"y":1280,"wires":[["44c7647d.ababcc"]]},{"id":"44c7647d.ababcc","type":"join","z":"11f2b679.72250a","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1430,"y":1220,"wires":[[]]},{"id":"bb48918f.dc261","type":"switch","z":"f19c6149.45ec9","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":790,"y":620,"wires":[["65640c85.8fce94"]]},{"id":"d3eef61e.66d628","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = {\n    \"STATUS\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1060,"y":700,"wires":[["3d98c695.1a272a"]]},{"id":"65640c85.8fce94","type":"function","z":"f19c6149.45ec9","name":"","func":"msg.payload = \"Complete\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":600,"wires":[["d3eef61e.66d628"]]},{"id":"fca8e4fb.ed6dc8","type":"debug","z":"c87c8b56.c2b2f8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1030,"y":3300,"wires":[]},{"id":"daec78a8.d0a028","type":"function","z":"c37a9a5d.cc60e8","name":"","func":"var a = msg.payload;\nmsg.payload = {\n    \"TIP\": a.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":460,"wires":[["42dc71e3.4d9b3"]]},{"id":"42dc71e3.4d9b3","type":"split","z":"c37a9a5d.cc60e8","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":760,"y":520,"wires":[["11eca841.92c048"]]},{"id":"11eca841.92c048","type":"join","z":"c37a9a5d.cc60e8","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"1","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":580,"wires":[["b31724b3.97ac08"]]},{"id":"466180e4.b44ae","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":690,"y":540,"wires":[]},{"id":"f2de374a.93e5d8","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1020,"y":400,"wires":[]},{"id":"483aa89.0a86a58","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":740,"y":1060,"wires":[]},{"id":"b2646c50.209d6","type":"debug","z":"de1fb1fe.a612b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":560,"y":640,"wires":[]},{"id":"4de78e26.83fd8","type":"http in","z":"6b5aabaf.a98a14","name":"","url":"/curbsidered","method":"post","upload":false,"swaggerDoc":"","x":170,"y":140,"wires":[["fd298f7.9ce027"]]},{"id":"fd298f7.9ce027","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":220,"wires":[["ceff832c.05606"]]},{"id":"ceff832c.05606","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.RED;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":160,"wires":[["48be4187.4f496"]]},{"id":"48be4187.4f496","type":"Db2 in","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":600,"y":240,"wires":[["3309b552.33bf4a","a06eff01.51a5c","9c9c4977.25d858"]]},{"id":"3309b552.33bf4a","type":"function","z":"6b5aabaf.a98a14","name":"","func":"if (msg.payload[\"1\"] == \"0\") {\n    return null;\n}\n\nif (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"0.10\";\n}\n\nif (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"0.20\";\n}\n\nif (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"0.30\";\n}\n\nif (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"0.40\";\n}\n\nif (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"0.50\";\n}\n\nif (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"0.60\";\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":160,"wires":[["9672f32d.3cd37"]]},{"id":"6446c98f.1744c8","type":"http in","z":"6b5aabaf.a98a14","name":"","url":"/curbsidegreen","method":"post","upload":false,"swaggerDoc":"","x":160,"y":1500,"wires":[["7563ad86.1dc404"]]},{"id":"9672f32d.3cd37","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":240,"wires":[["b428abfc.ea70a8"]]},{"id":"a06eff01.51a5c","type":"function","z":"6b5aabaf.a98a14","name":"COUNT","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/soylent-red/circle-outline-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString(),\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":320,"wires":[["b428abfc.ea70a8"]]},{"id":"b428abfc.ea70a8","type":"join","z":"6b5aabaf.a98a14","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":320,"wires":[["8bac69c1.c19c88"]]},{"id":"8bac69c1.c19c88","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":380,"wires":[["31bfc54c.e7e80a"]]},{"id":"9c9c4977.25d858","type":"delay","z":"6b5aabaf.a98a14","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":440,"wires":[["e92bf199.40362"]]},{"id":"e92bf199.40362","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.RED;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":440,"wires":[["669b7da.59deb84"]]},{"id":"31bfc54c.e7e80a","type":"Db2 out","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1090,"y":400,"wires":[]},{"id":"669b7da.59deb84","type":"dashDB in","z":"6b5aabaf.a98a14","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":790,"y":480,"wires":[["e7986f39.348ec"]]},{"id":"e7986f39.348ec","type":"debug","z":"6b5aabaf.a98a14","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":960,"y":520,"wires":[]},{"id":"7563ad86.1dc404","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":1520,"wires":[["138d5481.8e2efb"]]},{"id":"138d5481.8e2efb","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GREEN;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":1460,"wires":[["3afef0b8.e576a"]]},{"id":"3afef0b8.e576a","type":"Db2 in","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":660,"y":1540,"wires":[["e9ad6981.d404a8","a03347ed.3f7018","35c1c648.569bba"]]},{"id":"e9ad6981.d404a8","type":"function","z":"6b5aabaf.a98a14","name":"","func":"if (msg.payload[\"1\"] == \"0\") {\n    return null;\n}\n\nif (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"0.10\";\n}\n\nif (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"0.20\";\n}\n\nif (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"0.30\";\n}\n\nif (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"0.40\";\n}\n\nif (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"0.50\";\n}\n\nif (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"0.60\";\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":1460,"wires":[["bff1d4d9.845708"]]},{"id":"bff1d4d9.845708","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":1540,"wires":[["6726bef2.611d5"]]},{"id":"a03347ed.3f7018","type":"function","z":"6b5aabaf.a98a14","name":"COUNT","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/green/triangle-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString(),\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":1620,"wires":[["6726bef2.611d5"]]},{"id":"6726bef2.611d5","type":"join","z":"6b5aabaf.a98a14","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":930,"y":1620,"wires":[["71215d6c.f86e64"]]},{"id":"71215d6c.f86e64","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":1680,"wires":[["fa86261c.e547f8"]]},{"id":"35c1c648.569bba","type":"delay","z":"6b5aabaf.a98a14","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":520,"y":1740,"wires":[["c1287d0b.d0603"]]},{"id":"c1287d0b.d0603","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.GREEN;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":1740,"wires":[["580bdec7.f3249"]]},{"id":"fa86261c.e547f8","type":"Db2 out","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1150,"y":1700,"wires":[]},{"id":"580bdec7.f3249","type":"dashDB in","z":"6b5aabaf.a98a14","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":850,"y":1780,"wires":[["75f64faf.81d5f"]]},{"id":"75f64faf.81d5f","type":"debug","z":"6b5aabaf.a98a14","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1020,"y":1820,"wires":[]},{"id":"ae2c1f62.c9798","type":"http in","z":"6b5aabaf.a98a14","name":"","url":"/curbsideorange","method":"post","upload":false,"swaggerDoc":"","x":200,"y":560,"wires":[["e04e296.5d935d8"]]},{"id":"e04e296.5d935d8","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":640,"wires":[["19afd773.f54549"]]},{"id":"19afd773.f54549","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.ORANGE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":580,"wires":[["90493f10.33b93"]]},{"id":"90493f10.33b93","type":"Db2 in","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":600,"y":660,"wires":[["89c85a00.d424f8","8659c247.aa6fc","f818fa21.28b288"]]},{"id":"89c85a00.d424f8","type":"function","z":"6b5aabaf.a98a14","name":"","func":"if (msg.payload[\"1\"] == \"0\") {\n    return null;\n}\n\nif (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"0.10\";\n}\n\nif (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"0.20\";\n}\n\nif (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"0.30\";\n}\n\nif (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"0.40\";\n}\n\nif (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"0.50\";\n}\n\nif (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"0.60\";\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":580,"wires":[["2c09ae6b.e58552"]]},{"id":"2c09ae6b.e58552","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":660,"wires":[["973eb47.3e30d48"]]},{"id":"8659c247.aa6fc","type":"function","z":"6b5aabaf.a98a14","name":"COUNT","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/orange/octagon-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString(),\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":740,"wires":[["973eb47.3e30d48"]]},{"id":"973eb47.3e30d48","type":"join","z":"6b5aabaf.a98a14","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":740,"wires":[["e1fb00dd.c0e19"]]},{"id":"e1fb00dd.c0e19","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":800,"wires":[["a209d6a2.96ec78"]]},{"id":"f818fa21.28b288","type":"delay","z":"6b5aabaf.a98a14","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":860,"wires":[["b0d2e26.d2a2f2"]]},{"id":"b0d2e26.d2a2f2","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.ORANGE;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":860,"wires":[["efa27e8d.5e02c"]]},{"id":"a209d6a2.96ec78","type":"Db2 out","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1090,"y":820,"wires":[]},{"id":"efa27e8d.5e02c","type":"dashDB in","z":"6b5aabaf.a98a14","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":790,"y":900,"wires":[["29d1d8c9.cada38"]]},{"id":"29d1d8c9.cada38","type":"debug","z":"6b5aabaf.a98a14","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":960,"y":940,"wires":[]},{"id":"7bc7e29b.5f702c","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":1080,"wires":[["86ccb1e0.2462d"]]},{"id":"86ccb1e0.2462d","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.PURPLE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":1020,"wires":[["427bee56.f0cdb"]]},{"id":"427bee56.f0cdb","type":"Db2 in","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":600,"y":1100,"wires":[["1a5b03be.be21ec","18ee74d5.3e266b","80a2e4df.bf1818"]]},{"id":"1a5b03be.be21ec","type":"function","z":"6b5aabaf.a98a14","name":"","func":"if (msg.payload[\"1\"] == \"0\") {\n    return null;\n}\n\nif (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"0.10\";\n}\n\nif (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"0.20\";\n}\n\nif (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"0.30\";\n}\n\nif (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"0.40\";\n}\n\nif (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"0.50\";\n}\n\nif (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"0.60\";\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":1020,"wires":[["689ec462.136c6c"]]},{"id":"689ec462.136c6c","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":1100,"wires":[["e4222b28.c12518"]]},{"id":"18ee74d5.3e266b","type":"function","z":"6b5aabaf.a98a14","name":"COUNT","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/purple/circle-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString(),\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":700,"y":1180,"wires":[["e4222b28.c12518"]]},{"id":"e4222b28.c12518","type":"join","z":"6b5aabaf.a98a14","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1180,"wires":[["b1f65f0.9b692a"]]},{"id":"b1f65f0.9b692a","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":1240,"wires":[["790e44ed.cd1d4c"]]},{"id":"80a2e4df.bf1818","type":"delay","z":"6b5aabaf.a98a14","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":1300,"wires":[["8f0fb209.d5ddd"]]},{"id":"8f0fb209.d5ddd","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.PURPLE;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":1300,"wires":[["95d3d8c8.0ed698"]]},{"id":"790e44ed.cd1d4c","type":"Db2 out","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":1090,"y":1260,"wires":[]},{"id":"95d3d8c8.0ed698","type":"dashDB in","z":"6b5aabaf.a98a14","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":790,"y":1340,"wires":[["5c449d3.2d83164"]]},{"id":"5c449d3.2d83164","type":"debug","z":"6b5aabaf.a98a14","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":960,"y":1380,"wires":[]},{"id":"24d6616a.5e9a7e","type":"http in","z":"6b5aabaf.a98a14","name":"","url":"/purplecurbside","method":"post","upload":false,"swaggerDoc":"","x":230,"y":1020,"wires":[["7bc7e29b.5f702c"]]},{"id":"c7857e0e.da744","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":200,"y":1900,"wires":[["f1ed28e.a0428d8"]]},{"id":"f1ed28e.a0428d8","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.BLUE;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":1840,"wires":[["ce3ccb03.1a0a28"]]},{"id":"ce3ccb03.1a0a28","type":"Db2 in","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":480,"y":1920,"wires":[["aefe1744.b51598","378458a1.d871a8","dc37de84.50ffe"]]},{"id":"aefe1744.b51598","type":"function","z":"6b5aabaf.a98a14","name":"","func":"if (msg.payload[\"1\"] == \"0\") {\n    return null;\n}\n\nif (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"0.10\";\n}\n\nif (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"0.20\";\n}\n\nif (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"0.30\";\n}\n\nif (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"0.40\";\n}\n\nif (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"0.50\";\n}\n\nif (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"0.60\";\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":1840,"wires":[["c9fd8752.b4d928"]]},{"id":"c9fd8752.b4d928","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":1920,"wires":[["7003cb1d.84d3e4"]]},{"id":"378458a1.d871a8","type":"function","z":"6b5aabaf.a98a14","name":"COUNT","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/royal-blue/square-outline-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString(),\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":2000,"wires":[["7003cb1d.84d3e4"]]},{"id":"7003cb1d.84d3e4","type":"join","z":"6b5aabaf.a98a14","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":2000,"wires":[["ee22c153.5cbfa"]]},{"id":"ee22c153.5cbfa","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":760,"y":2060,"wires":[["f8b6b37c.c9111"]]},{"id":"dc37de84.50ffe","type":"delay","z":"6b5aabaf.a98a14","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":340,"y":2120,"wires":[["9ae1ad52.4e75c"]]},{"id":"9ae1ad52.4e75c","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.BLUE;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":500,"y":2120,"wires":[["f44cbf2c.42d36"]]},{"id":"f8b6b37c.c9111","type":"Db2 out","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":970,"y":2080,"wires":[]},{"id":"f44cbf2c.42d36","type":"dashDB in","z":"6b5aabaf.a98a14","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":670,"y":2160,"wires":[["12492a3e.53f726"]]},{"id":"12492a3e.53f726","type":"debug","z":"6b5aabaf.a98a14","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":840,"y":2200,"wires":[]},{"id":"bc418d1f.50fbd","type":"http in","z":"6b5aabaf.a98a14","name":"","url":"/curbsideblue","method":"post","upload":false,"swaggerDoc":"","x":130,"y":1780,"wires":[["c7857e0e.da744","88403e34.510e3"]]},{"id":"88403e34.510e3","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":180,"y":2320,"wires":[["912edc11.3469a"]]},{"id":"912edc11.3469a","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"SELECT COUNT(DATE) FROM BLUADMIN.GBMULTIVIRTUAL;\";\n\n\n\n\n\nmsg.payload = query;\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":2260,"wires":[["3800f243.a438ee"]]},{"id":"3800f243.a438ee","type":"Db2 in","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":460,"y":2340,"wires":[["d53ac6f8.543d98","b36c33bc.560eb","7cbed7c5.8c0718"]]},{"id":"d53ac6f8.543d98","type":"function","z":"6b5aabaf.a98a14","name":"","func":"if (msg.payload[\"1\"] == \"0\") {\n    return null;\n}\n\nif (msg.payload[\"1\"] == \"1\"){\n    msg.payload = \"0.10\";\n}\n\nif (msg.payload[\"1\"] == \"2\"){\n    msg.payload = \"0.20\";\n}\n\nif (msg.payload[\"1\"] == \"3\"){\n    msg.payload = \"0.30\";\n}\n\nif (msg.payload[\"1\"] == \"4\"){\n    msg.payload = \"0.40\";\n}\n\nif (msg.payload[\"1\"] == \"5\"){\n    msg.payload = \"0.50\";\n}\n\nif (msg.payload[\"1\"] == \"6\"){\n    msg.payload = \"0.60\";\n}\n\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":620,"y":2260,"wires":[["b8527eab.1826f"]]},{"id":"b8527eab.1826f","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"TIP\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":690,"y":2340,"wires":[["20d2e658.b88afa"]]},{"id":"b36c33bc.560eb","type":"function","z":"6b5aabaf.a98a14","name":"COUNT","func":"msg.payload = {\n    \"COLOR\": \"https://www.iconsdb.com/icons/preview/royal-blue/square-outline-xxl.png\",\n    \"DATE\": new Date().toLocaleDateString(),\n    \"COUNT\": msg.payload[\"1\"]\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":2420,"wires":[["20d2e658.b88afa"]]},{"id":"20d2e658.b88afa","type":"join","z":"6b5aabaf.a98a14","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":730,"y":2420,"wires":[["bee81c5a.ee18a"]]},{"id":"bee81c5a.ee18a","type":"function","z":"6b5aabaf.a98a14","name":"","func":"msg.payload = {\n    \"DATE\": msg.payload.DATE,\n    \"COLOR\": msg.payload.COLOR,\n    \"TIP\": msg.payload.TIP,\n    \"COUNT\": msg.payload.COUNT\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":740,"y":2480,"wires":[["fe6e7cb9.21959"]]},{"id":"7cbed7c5.8c0718","type":"delay","z":"6b5aabaf.a98a14","name":"","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":2540,"wires":[["de40f838.4e6428","76de2319.f8a0ec","2d82920b.be6cae","edb4fef5.a7f09","144c41a9.e04e9e","6d02fd2a.877a14"]]},{"id":"de40f838.4e6428","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBMULTIVIRTUAL;\";\n\nmsg.payload = query;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":2540,"wires":[["cb5321d7.3017d"]]},{"id":"fe6e7cb9.21959","type":"Db2 out","z":"6b5aabaf.a98a14","Db2":"6ba3359a.7bca1c","service":"_ext_","table":"TIPJAR","name":"","x":950,"y":2500,"wires":[]},{"id":"cb5321d7.3017d","type":"dashDB in","z":"6b5aabaf.a98a14","dashDB":"7e796147.3fe93","service":"_ext_","query":"","params":"","name":"","x":650,"y":2580,"wires":[["5caa462.e9fc9b8"]]},{"id":"5caa462.e9fc9b8","type":"debug","z":"6b5aabaf.a98a14","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":820,"y":2620,"wires":[]},{"id":"76de2319.f8a0ec","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBMULTIINUSE WHERE QUANTITY = 5;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":470,"y":2640,"wires":[["cb5321d7.3017d"]]},{"id":"2d82920b.be6cae","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBMULTIINUSE WHERE QUANTITY = 4;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":2700,"wires":[["cb5321d7.3017d"]]},{"id":"edb4fef5.a7f09","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBMULTIINUSE WHERE QUANTITY = 3;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":2760,"wires":[["cb5321d7.3017d"]]},{"id":"144c41a9.e04e9e","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBMULTIINUSE WHERE QUANTITY = 2;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":2800,"wires":[["cb5321d7.3017d"]]},{"id":"6d02fd2a.877a14","type":"function","z":"6b5aabaf.a98a14","name":"","func":"let query = \"DELETE FROM BLUADMIN.GBMULTIINUSE WHERE QUANTITY = 1;\";\n\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":460,"y":2860,"wires":[["cb5321d7.3017d"]]},{"id":"ef6d944b.7da038","type":"debug","z":"20500362.dcae9c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":240,"y":400,"wires":[]},{"id":"da8eb3b0.82d42","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":820,"y":940,"wires":[]},{"id":"56f6947.b31ee6c","type":"function","z":"54c70365.d5e51c","name":"","func":"msg.payload = {\n    \"OK\": msg.payload\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":500,"wires":[["b21e2110.7e26a"]]},{"id":"784fbdfd.938114","type":"delay","z":"54c70365.d5e51c","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1280,"y":1220,"wires":[["210dc368.ee868c"]]},{"id":"5e9d882d.583938","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":500,"y":640,"wires":[]},{"id":"d61e1611.3464a8","type":"function","z":"54c70365.d5e51c","name":"","func":"msg.payload = msg.payload[\"1\"];\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":280,"wires":[["fde8b2dd.e4c0b"]]},{"id":"fa5baf00.1fda8","type":"function","z":"57060e7a.25d5a","name":"","func":"var receiptsum = Number(msg.payload);\nmsg.payload = {\n    \"RECEIPTSUM\": receiptsum.toFixed(2)\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":280,"wires":[["dd0561e2.5c881"]]},{"id":"9ea2365a.a1e988","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":570,"y":1040,"wires":[]},{"id":"d52c104b.a41ac","type":"debug","z":"54c70365.d5e51c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":450,"y":860,"wires":[]},{"id":"bb59b42b.bb0c08","type":"Db2 in","z":"54c70365.d5e51c","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":450,"y":800,"wires":[["9209cceb.bf004","d52c104b.a41ac"]]},{"id":"c09c8e9c.21453","type":"link in","z":"54c70365.d5e51c","name":"","links":["a15fbaef.93c708"],"x":75,"y":880,"wires":[["9ab55a3f.f37ed8","3beb745c.8a97cc"]]},{"id":"e53de44.0ead018","type":"link in","z":"54c70365.d5e51c","name":"","links":["57025e08.3753b"],"x":115,"y":740,"wires":[["749b5537.2bf98c","38b61246.0984be"]]},{"id":"4a0d383d.82e518","type":"function","z":"11f2b679.72250a","name":"","func":"msg.payload = {\n    \n    \"IMAGE\": msg.payload.IMAGE\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":940,"y":1500,"wires":[["3519ddbc.b5c3f2"]]},{"id":"3519ddbc.b5c3f2","type":"join","z":"11f2b679.72250a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":990,"y":1400,"wires":[["b44d3cc5.19231"]]},{"id":"c24860ab.a7c7","type":"join","z":"11f2b679.72250a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":",","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1410,"y":1780,"wires":[["417b633c.09121c"]]},{"id":"417b633c.09121c","type":"function","z":"11f2b679.72250a","name":"","func":"msg.payload = {\n    \"GBTIP\": msg.payload.GBTIP,\n    \"COLOR\": msg.payload.COLOR,\n    \"LABEL\": msg.payload.LABEL,\n    \"IMAGE\": msg.payload.IMAGE\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1560,"y":1800,"wires":[["98517f23.34573"]]},{"id":"b44d3cc5.19231","type":"function","z":"11f2b679.72250a","name":"","func":"\nmsg.payload = {\n    \"GBTIP\": msg.payload.GBTIP,\n    \"COLOR\": msg.payload.COLOR,\n    \"LABEL\": msg.payload.LABEL,\n    \"IMAGE\": msg.payload.IMAGE\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1190,"y":1420,"wires":[["24e5ac23.781984"]]},{"id":"495952bd.78c0ec","type":"function","z":"11f2b679.72250a","name":"","func":"\nif (msg.payload.count == 1){\n    msg.payload = {\n        \"barcode\": msg.payload.array.BARCODE,\n        \"receiptid\": msg.payload.array.RECEIPTID\n        \n    }\n}\n\nelse {\n    msg.payload = \"Hello\";\n}\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":440,"wires":[["211c951c.d0b3ca","23afed2f.96dd02","5eb6b508.12a30c"]]},{"id":"6f310043.26e6e","type":"link out","z":"e1413e6b.06f05","name":"COUNT1RecycleScan","links":["22b21072.ef391"],"x":825,"y":360,"wires":[]},{"id":"3cdeef05.e6d0e","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1170,"y":820,"wires":[]},{"id":"23afed2f.96dd02","type":"debug","z":"11f2b679.72250a","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":430,"y":380,"wires":[]},{"id":"2badced.37f0332","type":"switch","z":"11f2b679.72250a","name":"","property":"payload.barcode","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":770,"y":1040,"wires":[["5a2664ba.ca780c"]]},{"id":"7410fb9b.d78774","type":"switch","z":"11f2b679.72250a","name":"","property":"payload.barcode","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":730,"y":980,"wires":[["5a2664ba.ca780c"]]},{"id":"46ebfc08.6aabf4","type":"switch","z":"11f2b679.72250a","name":"","property":"payload.barcode","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":850,"y":940,"wires":[["5a2664ba.ca780c"]]},{"id":"5eb6b508.12a30c","type":"switch","z":"11f2b679.72250a","name":"","property":"payload.barcode","propertyType":"msg","rules":[{"t":"nempty"}],"checkall":"true","repair":false,"outputs":1,"x":750,"y":780,"wires":[["5a2664ba.ca780c"]]},{"id":"19b56bc1.400174","type":"link in","z":"20a421a8.383e4e","name":"","links":["cf4fc38a.66df1"],"x":205,"y":280,"wires":[["2577a499.5abf3c"]]},{"id":"cf4fc38a.66df1","type":"link out","z":"e1413e6b.06f05","name":"Barcode scan","links":["19b56bc1.400174"],"x":35,"y":80,"wires":[]},{"id":"2577a499.5abf3c","type":"function","z":"20a421a8.383e4e","name":"","func":"msg.payload = msg.payload.data;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":280,"wires":[["3fec777e.953278","51d66ae4.ce7d94"]]},{"id":"3fec777e.953278","type":"function","z":"20a421a8.383e4e","name":"","func":"let query = \"SELECT GBTIP,COLOR,LABEL FROM BLUADMIN.GBREGISTRY WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"';\";\n\n\n\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":280,"wires":[["da8538b9.bb0618"]]},{"id":"d2294148.39a8d","type":"function","z":"20a421a8.383e4e","name":"","func":"\nmsg.payload = {\n    \"GBTIP\": msg.payload.GBTIP,\n    \"COLOR\": msg.payload.COLOR,\n    \"LABEL\": msg.payload.LABEL,\n    \"IMAGE\": msg.payload.IMAGE\n   \n   \n\n}\nreturn msg;\n\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":200,"wires":[["2f83820c.d7066e"]]},{"id":"2f83820c.d7066e","type":"split","z":"20a421a8.383e4e","name":"","splt":",","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":990,"y":200,"wires":[["db97edd4.77a7a"]]},{"id":"51d66ae4.ce7d94","type":"function","z":"20a421a8.383e4e","name":"","func":"let query = \"SELECT IMAGE FROM BLUADMIN.GBINUSE WHERE BARCODE = '\";\nquery += msg.payload;\nquery += \"' LIMIT 1;\";\n\n\n\n\nnode.warn(query);\nmsg.payload = query;\nreturn msg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":480,"y":400,"wires":[["9492e3e0.75337"]]},{"id":"9492e3e0.75337","type":"Db2 in","z":"20a421a8.383e4e","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":690,"y":420,"wires":[["d2294148.39a8d"]]},{"id":"da8538b9.bb0618","type":"Db2 in","z":"20a421a8.383e4e","Db2":"6ba3359a.7bca1c","service":"_ext_","query":"","params":"","name":"","x":670,"y":260,"wires":[["d2294148.39a8d"]]},{"id":"db97edd4.77a7a","type":"join","z":"20a421a8.383e4e","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1050,"y":260,"wires":[[]]},{"id":"8ac24c8c.8be7b","type":"debug","z":"20a421a8.383e4e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1080,"y":360,"wires":[]},{"id":"d3969995.e7e968","type":"websocket out","z":"11f2b679.72250a","name":"","server":"5874c8d0.bcf0c8","client":"","x":1670,"y":1700,"wires":[]}]